(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},2552:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>f,tree:()=>c});var n=r(7634),i=r(474),o=r(2889),a=r.n(o),s=r(8551),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);r.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7400)),"/Users/macbook/developer/2025/eco-capture-and-claim/apps/web/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,7503)),"/Users/macbook/developer/2025/eco-capture-and-claim/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,337,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/macbook/developer/2025/eco-capture-and-claim/apps/web/src/app/page.tsx"],u="/page",p={require:r,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2778:(e,t,r)=>{Promise.resolve().then(r.bind(r,9854))},3629:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,1858,23)),Promise.resolve().then(r.t.bind(r,3187,23)),Promise.resolve().then(r.t.bind(r,2947,23)),Promise.resolve().then(r.t.bind(r,6297,23)),Promise.resolve().then(r.t.bind(r,4121,23)),Promise.resolve().then(r.t.bind(r,5951,23))},5340:(e,t,r)=>{Promise.resolve().then(r.bind(r,1350))},9854:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Providers:()=>s});var n=r(931),i=r(7980),o=r(8203),a=r(3218);function s({children:e}){return n.jsx(i.w,{i18n:o,children:n.jsx(a.Ho,{children:e})})}},9374:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2124);Object.defineProperty(t,"CacheControl",{enumerable:!0,get:function(){return n.CacheControl}}),Object.defineProperty(t,"CspDirective",{enumerable:!0,get:function(){return n.CspDirective}}),Object.defineProperty(t,"CspSandboxAllow",{enumerable:!0,get:function(){return n.CspSandboxAllow}}),Object.defineProperty(t,"HashAlgorithm",{enumerable:!0,get:function(){return n.HashAlgorithm}}),Object.defineProperty(t,"Header",{enumerable:!0,get:function(){return n.Header}}),Object.defineProperty(t,"Method",{enumerable:!0,get:function(){return n.Method}}),Object.defineProperty(t,"ResponseType",{enumerable:!0,get:function(){return n.ResponseType}}),Object.defineProperty(t,"SpecialSource",{enumerable:!0,get:function(){return n.SpecialSource}}),Object.defineProperty(t,"SriAsset",{enumerable:!0,get:function(){return n.SriAsset}}),Object.defineProperty(t,"StatusCode",{enumerable:!0,get:function(){return n.StatusCode}}),t.getResponseType=n.getResponseType,t.hashSource=n.hashSource,t.noCache=n.noCache,t.nonceSource=n.nonceSource},2124:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Method=void 0,function(e){e.Get="GET",e.Post="POST",e.Put="PUT",e.Patch="PATCH",e.Delete="DELETE",e.Head="HEAD",e.Options="OPTIONS",e.Connect="CONNECT"}(t.Method||(t.Method={})),t.StatusCode=void 0,function(e){e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.RequestEntityTooLarge=413]="RequestEntityTooLarge",e[e.RequestUriTooLong=414]="RequestUriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RequestedRangeNotSatisfiable=416]="RequestedRangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported"}(t.StatusCode||(t.StatusCode={})),t.Header=void 0,function(e){e.Accept="Accept",e.AcceptEncoding="Accept-Encoding",e.AcceptLanguage="Accept-Language",e.AccessControlAllowCredentials="Access-Control-Allow-Credentials",e.AccessControlAllowHeaders="Access-Control-Allow-Headers",e.AccessControlAllowMethods="Access-Control-Allow-Methods",e.AccessControlAllowOrigin="Access-Control-Allow-Origin",e.AccessControlExposeHeaders="Access-Control-Expose-Headers",e.AccessControlMaxAge="Access-Control-Max-Age",e.AccessControlRequestHeaders="Access-Control-Request-Headers",e.AccessControlRequestMethod="Access-Control-Request-Method",e.Authorization="Authorization",e.CacheControl="Cache-Control",e.CacheStatus="Cache-Status",e.Connection="Connection",e.ContentDisposition="Content-Disposition",e.ContentEncoding="Content-Encoding",e.ContentLength="Content-Length",e.ContentSecurityPolicy="Content-Security-Policy",e.ContentSecurityPolicyReportOnly="Content-Security-Policy-Report-Only",e.ContentType="Content-Type",e.ContentTypeOptions="X-Content-Type-Options",e.Cookie="Cookie",e.DownloadOptions="X-Download-Options",e.ETag="ETag",e.Forwarded="Forwarded",e.ForwardedFor="X-Forwarded-For",e.ForwardedHost="X-Forwarded-Host",e.ForwardedProtocol="X-Forwarded-Proto",e.FrameOptions="X-Frame-Options",e.Host="Host",e.IfNoneMatch="If-None-Match",e.Location="Location",e.Origin="Origin",e.ReferrerPolicy="Referrer-Policy",e.ServerTiming="Server-Timing",e.StrictTransportSecurity="Strict-Transport-Security",e.TimingAllowOrigin="Timing-Allow-Origin",e.Trailer="Trailer",e.TransferEncoding="Transfer-Encoding",e.UserAgent="User-Agent",e.WwwAuthenticate="WWW-Authenticate",e.XhrRedirectedTo="X-XHR-Redirected-To",e.XhrReferer="X-XHR-Referer",e.XssProtecton="X-XSS-Protection",e.XContentTypeOptions="X-Content-Type-Options",e.XDownloadOptions="X-Download-Options",e.XForwardedFor="X-Forwarded-For",e.XForwardedHost="X-Forwarded-Host",e.XForwardedProto="X-Forwarded-Proto",e.XFrameOptions="X-Frame-Options",e.XXhrRedirectedTo="X-XHR-Redirected-To",e.XXhrReferer="X-XHR-Referer",e.XXssProtecton="X-XSS-Protection",e.XXssProtection="X-XSS-Protection"}(t.Header||(t.Header={})),t.CspDirective=void 0,function(e){e.ChildSrc="child-src",e.ConnectSrc="connect-src",e.DefaultSrc="default-src",e.FontSrc="font-src",e.FrameSrc="frame-src",e.ImgSrc="img-src",e.ManifestSrc="manifest-src",e.MediaSrc="media-src",e.ObjectSrc="object-src",e.PrefetchSrc="prefetch-src",e.ScriptSrc="script-src",e.StyleSrc="style-src",e.WebrtcSrc="webrtc-src",e.WorkerSrc="worker-src",e.BaseUri="base-uri",e.PluginTypes="plugin-types",e.Sandbox="sandbox",e.FormAction="form-action",e.FrameAncestors="frame-ancestors",e.ReportUri="report-uri",e.BlockAllMixedContent="block-all-mixed-content",e.RequireSriFor="require-sri-for",e.UpgradeInsecureRequests="upgrade-insecure-requests"}(t.CspDirective||(t.CspDirective={})),t.CspSandboxAllow=void 0,function(e){e.Forms="allow-forms",e.SameOrigin="allow-same-origin",e.Scripts="allow-scripts",e.Popups="allow-popups",e.Modals="allow-modals",e.OrientationLock="allow-orientation-lock",e.PointerLock="allow-pointer-lock",e.Presentation="allow-presentation",e.PopupsToEscapeSandbox="allow-popups-to-escape-sandbox",e.TopNavigation="allow-top-navigation"}(t.CspSandboxAllow||(t.CspSandboxAllow={})),t.SpecialSource=void 0,function(e){e.Any="*",e.Self="'self'",e.UnsafeInline="'unsafe-inline'",e.UnsafeEval="'unsafe-eval'",e.None="'none'",e.StrictDynamic="'strict-dynamic'",e.ReportSample="'report-sample'",e.Data="data:",e.Blob="blob:",e.FileSystem="filesystem:"}(t.SpecialSource||(t.SpecialSource={})),t.SriAsset=void 0,function(e){e.Script="script",e.Style="style"}(t.SriAsset||(t.SriAsset={})),t.HashAlgorithm=void 0,function(e){e.Sha256="sha256",e.Sha384="sha384",e.Sha512="sha512"}(t.HashAlgorithm||(t.HashAlgorithm={})),t.ResponseType=void 0,function(e){e.Informational="1xx",e.Success="2xx",e.Redirection="3xx",e.ClientError="4xx",e.ServerError="5xx",e.Unknown="Unknown"}(t.ResponseType||(t.ResponseType={})),t.CacheControl=void 0,function(e){e.NoCache="no-cache",e.NoStore="no-store",e.MustRevalidate="must-revalidate",e.MaxAge="max-age"}(t.CacheControl||(t.CacheControl={}));let r=`${t.CacheControl.NoCache},${t.CacheControl.NoStore},${t.CacheControl.MustRevalidate},${t.CacheControl.MaxAge}=0`;t.getResponseType=function(e){return e>=100&&e<200?t.ResponseType.Informational:e>=200&&e<300?t.ResponseType.Success:e>=300&&e<400?t.ResponseType.Redirection:e>=400&&e<500?t.ResponseType.ClientError:e>=500&&e<600?t.ResponseType.ServerError:t.ResponseType.Unknown},t.hashSource=function(e,t){return`'${e}-${t}'`},t.noCache=r,t.nonceSource=function(e){return`'nonce-${e}'`}},9254:(e,t,r)=>{e.exports=r(9374)},4627:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHost=void 0,t.decodeHost=function(e){return atob(e)}},205:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildEmbeddedAppUrl=t.getEmbeddedAppUrl=void 0;let n=r(1222),i=n.__importStar(r(3516)),o=r(4965),a=r(7333),s=r(4627);function l(e){return t=>{(0,a.sanitizeHost)()(t,!0);let r=(0,s.decodeHost)(t);return`https://${r}/apps/${e.apiKey}`}}t.getEmbeddedAppUrl=function(e){return t=>n.__awaiter(this,void 0,void 0,function*(){var r=n.__rest(t,[]);let a=yield(0,o.abstractConvertRequest)(r);if(!a)throw new i.MissingRequiredArgument("getEmbeddedAppUrl requires a request object argument");if(!a.url)throw new i.InvalidRequestError("Request does not contain a URL");let s=new URL(a.url,`https://${a.headers.host}`).searchParams.get("host");if("string"!=typeof s)throw new i.InvalidRequestError("Request does not contain a host query parameter");return l(e)(s)})},t.buildEmbeddedAppUrl=l},6928:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shopifyAuth=void 0;let n=r(1637),i=r(5840),o=r(3905),a=r(205),s=r(7989);t.shopifyAuth=function(e){var t;let r={begin:(0,n.begin)(e),callback:(0,n.callback)(e),nonce:i.nonce,safeCompare:o.safeCompare,getEmbeddedAppUrl:(0,a.getEmbeddedAppUrl)(e),buildEmbeddedAppUrl:(0,a.buildEmbeddedAppUrl)(e)};return(null===(t=e.future)||void 0===t?void 0:t.unstable_tokenExchange)&&(r.tokenExchange=(0,s.tokenExchange)(e)),r}},4407:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSession=void 0;let n=r(1222),i=r(9705),o=r(1679),a=r(7644),s=r(2854);t.createSession=function({config:e,accessTokenResponse:t,shop:r,state:l}){let c=!!t.associated_user;if((0,a.logger)(e).info("Creating new session",{shop:r,isOnline:c}),!c)return new o.Session({id:(0,s.getOfflineId)(e)(r),shop:r,state:l,isOnline:c,accessToken:t.access_token,scope:t.scope});{let a;let{access_token:d,scope:u}=t,p=n.__rest(t,["access_token","scope"]),f=new Date(Date.now()+1e3*t.expires_in);return a=e.isEmbeddedApp?(0,s.getJwtSessionId)(e)(r,`${p.associated_user.id}`):(0,i.v4)(),new o.Session({id:a,shop:r,state:l,isOnline:c,accessToken:d,scope:u,expires:f,onlineAccessInfo:p})}}},5840:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nonce=void 0;let n=r(773);t.nonce=function(){return(n.crypto.getRandomValues?n.crypto.getRandomValues(new Uint8Array(15)):n.crypto.randomBytes(15)).map(e=>e%10).join("")}},1637:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callback=t.begin=void 0;let n=r(1222),i=n.__importDefault(r(6431)),o=r(7282),a=n.__importDefault(r(5901)),s=n.__importStar(r(3516)),l=r(8790),c=r(7333),d=r(4965),u=r(7644),p=r(574),f=r(8776),h=r(5840),m=r(3905),y=r(4407),g=({request:e,log:t,func:r})=>{t.debug(`Possible bot request to auth ${r}: `,{userAgent:e.headers["User-Agent"]})};function v(e,t){if(e)throw new s.PrivateAppError(t)}t.begin=function(e){return t=>n.__awaiter(this,void 0,void 0,function*(){var{shop:r,callbackPath:o,isOnline:s}=t,l=n.__rest(t,["shop","callbackPath","isOnline"]);v(e.isCustomStoreApp,"Cannot perform OAuth for private apps");let p=(0,u.logger)(e);p.info("Beginning OAuth",{shop:r,isOnline:s,callbackPath:o});let m=yield(0,d.abstractConvertRequest)(l),y=yield(0,d.abstractConvertIncomingResponse)(l);if((0,i.default)(m.headers["User-Agent"]))return g({request:m,log:p,func:"begin"}),y.statusCode=410,(0,d.abstractConvertResponse)(y,l);let b=new d.Cookies(m,y,{keys:[e.apiSecretKey],secure:!0}),E=(0,h.nonce)();yield b.setAndSign(f.STATE_COOKIE_NAME,E,{expires:new Date(Date.now()+6e4),sameSite:"lax",secure:!0,path:o});let w={client_id:e.apiKey,scope:e.scopes.toString(),redirect_uri:`${e.hostScheme}://${e.hostName}${o}`,state:E,"grant_options[]":s?"per-user":""},S=new a.default;S.putAll(w);let _=(0,c.sanitizeShop)(e)(r,!0),P=`https://${_}/admin/oauth/authorize${S.stringify()}`;return y.statusCode=302,y.statusText="Found",y.headers=Object.assign(Object.assign(Object.assign({},y.headers),b.response.headers),{Location:P}),p.debug(`OAuth started, redirecting to ${P}`,{shop:r,isOnline:s}),(0,d.abstractConvertResponse)(y,l)})},t.callback=function(e){return function(t){var r=n.__rest(t,[]);return n.__awaiter(this,void 0,void 0,function*(){v(e.isCustomStoreApp,"Cannot perform OAuth for private apps");let t=(0,u.logger)(e),a=yield(0,d.abstractConvertRequest)(r),h=new URL(a.url,`${e.hostScheme}://${e.hostName}`).searchParams,b=h.get("shop");if((0,i.default)(a.headers["User-Agent"]))throw g({request:a,log:t,func:"callback"}),new s.BotActivityDetected("Invalid OAuth callback initiated by bot");t.info("Completing OAuth",{shop:b});let E=new d.Cookies(a,{},{keys:[e.apiSecretKey],secure:!0}),w=yield E.getAndVerify(f.STATE_COOKIE_NAME);if(E.deleteCookie(f.STATE_COOKIE_NAME),!w)throw t.error("Could not find OAuth cookie",{shop:b}),new s.CookieNotFound(`Cannot complete OAuth process. Could not find an OAuth cookie for shop url: ${b}`);let S=Object.fromEntries(h.entries());if(!(yield function({config:e,query:t,stateFromCookie:r}){return n.__awaiter(this,void 0,void 0,function*(){return(yield(0,l.validateHmac)(e)(t))&&(0,m.safeCompare)(t.state,r)})}({config:e,query:S,stateFromCookie:w})))throw t.error("Invalid OAuth callback",{shop:b,stateFromCookie:w}),new s.InvalidOAuthError("Invalid OAuth callback.");t.debug("OAuth request is valid, requesting access token",{shop:b});let _={client_id:e.apiKey,client_secret:e.apiSecretKey,code:h.get("code")},P=(0,c.sanitizeShop)(e)(h.get("shop"),!0),C=yield(0,d.abstractFetch)(`https://${P}/admin/oauth/access_token`,{method:"POST",body:JSON.stringify(_),headers:{"Content-Type":p.DataType.JSON,Accept:p.DataType.JSON}});C.ok||(0,o.throwFailedRequest)((yield C.json()),C,!1);let x=(0,y.createSession)({accessTokenResponse:yield C.json(),shop:P,state:w,config:e});return e.isEmbeddedApp||(yield E.setAndSign(f.SESSION_COOKIE_NAME,x.id,{expires:x.expires,sameSite:"lax",secure:!0,path:"/"})),{headers:yield(0,d.abstractConvertHeaders)(E.response.headers,r),session:x}})}}},3905:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeCompare=void 0;let n=r(1222).__importStar(r(3516));t.safeCompare=(e,t)=>{if(typeof e==typeof t){let r=new TextEncoder,n=r.encode(JSON.stringify(e)),i=r.encode(JSON.stringify(t));if(n.length===i.length)return function(e,t){let r=new Uint8Array(e),n=new Uint8Array(t),i=0;for(let e=0;e<r.length;e++)i|=r[e]^n[e];return 0===i}(n,i)}else throw new n.SafeCompareError(`Mismatched data types provided: ${typeof e} and ${typeof t}`);return!1}},7989:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.tokenExchange=t.RequestedTokenType=void 0;let i=r(1222),o=r(7282),a=r(3277),s=r(7333),l=r(5226),c=r(574),d=r(4407);(function(e){e.OnlineAccessToken="urn:shopify:params:oauth:token-type:online-access-token",e.OfflineAccessToken="urn:shopify:params:oauth:token-type:offline-access-token"})(n||(t.RequestedTokenType=n={})),t.tokenExchange=function(e){return({shop:t,sessionToken:r,requestedTokenType:n})=>i.__awaiter(this,void 0,void 0,function*(){yield(0,a.decodeSessionToken)(e)(r);let i={client_id:e.apiKey,client_secret:e.apiSecretKey,grant_type:"urn:ietf:params:oauth:grant-type:token-exchange",subject_token:r,subject_token_type:"urn:ietf:params:oauth:token-type:id_token",requested_token_type:n},u=(0,s.sanitizeShop)(e)(t,!0),p=yield(0,l.abstractFetch)(`https://${u}/admin/oauth/access_token`,{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":c.DataType.JSON,Accept:c.DataType.JSON}});return p.ok||(0,o.throwFailedRequest)((yield p.json()),p,!1),{session:(0,d.createSession)({accessTokenResponse:yield p.json(),shop:u,state:"",config:e})}})}},8776:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STATE_COOKIE_NAME=t.SESSION_COOKIE_NAME=void 0,t.SESSION_COOKIE_NAME="shopify_app_session",t.STATE_COOKIE_NAME="shopify_app_state"},8242:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthScopes=void 0;class r{constructor(e){let t=[];"string"==typeof e?t=e.split(RegExp(`${r.SCOPE_DELIMITER}\\s*`)):Array.isArray(e)?t=e:e&&(t=Array.from(e.expandedScopes)),t=t.map(e=>e.trim()).filter(e=>e.length);let n=this.getImpliedScopes(t),i=new Set(t),o=new Set(n);this.compressedScopes=new Set([...i].filter(e=>!o.has(e))),this.expandedScopes=new Set([...i,...o])}has(e){return 0===(e instanceof r?e:new r(e)).toArray().filter(e=>!this.expandedScopes.has(e)).length}equals(e){let t;return t=e instanceof r?e:new r(e),this.compressedScopes.size===t.compressedScopes.size&&0===this.toArray().filter(e=>!t.has(e)).length}toString(){return this.toArray().join(r.SCOPE_DELIMITER)}toArray(){return[...this.compressedScopes]}getImpliedScopes(e){return e.reduce((e,t)=>{let r=t.match(/^(unauthenticated_)?write_(.*)$/);return r&&e.push(`${r[1]?r[1]:""}read_${r[2]}`),e},[])}}t.AuthScopes=r,r.SCOPE_DELIMITER=","},6454:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestedTokenType=void 0,r(1222).__exportStar(r(8776),t);var n=r(7989);Object.defineProperty(t,"RequestedTokenType",{enumerable:!0,get:function(){return n.RequestedTokenType}})},904:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3894:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancel=void 0;let n=r(1222),i=r(194),o=r(3516),a=`
  mutation appSubscriptionCancel($id: ID!, $prorate: Boolean) {
    appSubscriptionCancel(id: $id, prorate: $prorate) {
      appSubscription {
        id
        name
        test
      }
      userErrors {
        field
        message
      }
    }
  }
`;t.cancel=function(e){return function(t){var r,s,l,c,d,u,p;return n.__awaiter(this,void 0,void 0,function*(){let{session:n,subscriptionId:f,prorate:h=!0}=t,m=new((0,i.graphqlClientClass)({config:e}))({session:n});try{let e=yield m.request(a,{variables:{id:f,prorate:h}});if(null===(s=null===(r=e.data)||void 0===r?void 0:r.appSubscriptionCancel)||void 0===s?void 0:s.userErrors.length)throw new o.BillingError({message:"Error while canceling a subscription",errorData:null===(c=null===(l=e.data)||void 0===l?void 0:l.appSubscriptionCancel)||void 0===c?void 0:c.userErrors});return null===(u=null===(d=e.data)||void 0===d?void 0:d.appSubscriptionCancel)||void 0===u?void 0:u.appSubscription}catch(e){if(e instanceof o.GraphqlQueryError)throw new o.BillingError({message:e.message,errorData:null===(p=e.response)||void 0===p?void 0:p.errors});throw e}})}}},8168:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.check=void 0;let n=r(1222),i=r(194),o=r(3516);function a({plans:e,isTest:t,subscription:r}){return e.includes(r.name)&&(t||!r.test)}function s({plans:e,isTest:t,purchase:r}){return e.includes(r.name)&&(t||!r.test)&&"ACTIVE"===r.status}t.check=function(e){return function({session:t,plans:r,isTest:c=!0,returnObject:d=!1}){return n.__awaiter(this,void 0,void 0,function*(){if(!e.billing)throw new o.BillingError({message:"Attempted to look for purchases without billing configs",errorData:[]});let u=new((0,i.graphqlClientClass)({config:e}))({session:t});return function({plans:e,client:t,isTest:r,returnObject:i}){var o;return n.__awaiter(this,void 0,void 0,function*(){let n;let c=!!i&&{hasActivePayment:!1,oneTimePurchases:[],appSubscriptions:[]},d=null;do{if(n=null===(o=(yield t.request(l,{variables:{endCursor:d}})).data)||void 0===o?void 0:o.currentAppInstallation,i)n.activeSubscriptions.map(t=>{a({plans:e,isTest:r,subscription:t})&&(c.hasActivePayment=!0,c.appSubscriptions.push(t))}),n.oneTimePurchases.edges.map(t=>{s({plans:e,isTest:r,purchase:t.node})&&(c.hasActivePayment=!0,c.oneTimePurchases.push(t.node))});else{let t={plans:e,isTest:r,installation:n};if(function({plans:e,isTest:t,installation:r}){return r.activeSubscriptions.some(r=>a({plans:e,isTest:t,subscription:r}))}(t)||function({plans:e,isTest:t,installation:r}){return r.oneTimePurchases.edges.some(r=>s({plans:e,isTest:t,purchase:r.node}))}(t))return!0}d=n.oneTimePurchases.pageInfo.endCursor}while(null==n?void 0:n.oneTimePurchases.pageInfo.hasNextPage);return c})}({plans:Array.isArray(r)?r:[r],client:u,isTest:c,returnObject:d})})}};let l=`
  query appSubscription($endCursor: String) {
    currentAppInstallation {
      activeSubscriptions {
        id
        name
        test
      }

      oneTimePurchases(first: 250, sortKey: CREATED_AT, after: $endCursor) {
        edges {
          node {
            id
            name
            test
            status
          }
        }
        pageInfo {
          hasNextPage
          endCursor
        }
      }
    }
  }
`},6328:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shopifyBilling=void 0;let n=r(8168),i=r(6607),o=r(3894),a=r(7124);t.shopifyBilling=function(e){return{check:(0,n.check)(e),request:(0,i.request)(e),cancel:(0,o.cancel)(e),subscriptions:(0,a.subscriptions)(e)}}},6607:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.request=void 0;let n=r(1222),i=r(2451),o=r(3516),a=r(205),s=r(194),l=r(773),c=r(6075);t.request=function(e){return function(t){var r,{session:p,plan:f,isTest:h=!0,returnUrl:m,returnObject:y=!1}=t,g=n.__rest(t,["session","plan","isTest","returnUrl","returnObject"]);return n.__awaiter(this,void 0,void 0,function*(){let t;if(!e.billing||!e.billing[f])throw new o.BillingError({message:`Could not find plan ${f} in billing settings`,errorData:[]});let v=Object.assign({},e.billing[f]),b=Object.fromEntries(Object.entries(g).filter(([e,t])=>void 0!==t)),E=p.shop.replace(".myshopify.com",""),w=(0,a.buildEmbeddedAppUrl)(e)((0,l.hashString)(`admin.shopify.com/store/${E}`,c.HashFormat.Base64)),S=`${e.hostScheme}://${e.hostName}?shop=${p.shop}`,_=m||(e.isEmbeddedApp?w:S),P=new((0,s.graphqlClientClass)({config:e}))({session:p});if("lineItems"in v){let e=function(e,t){let r=Object.assign(Object.assign({},e),t),n=[];if(e.lineItems&&t.lineItems){for(let r of e.lineItems){let e=!1;for(let i of t.lineItems)if(r.interval===i.interval){n.push(Object.assign(Object.assign({},r),i)),e=!0;break}e||n.push(r)}r.lineItems=n}return r}(v,b);t=(yield function({billingConfig:e,plan:t,client:r,returnUrl:a,isTest:s}){return n.__awaiter(this,void 0,void 0,function*(){let n=e.lineItems.map(e=>{if(e.interval===i.BillingInterval.Every30Days||e.interval===i.BillingInterval.Annual){let t={interval:e.interval,price:{amount:e.amount,currencyCode:e.currencyCode}};return e.discount&&(t.discount={durationLimitInIntervals:e.discount.durationLimitInIntervals,value:{amount:e.discount.value.amount,percentage:e.discount.value.percentage}}),{plan:{appRecurringPricingDetails:t}}}if(e.interval===i.BillingInterval.Usage)return{plan:{appUsagePricingDetails:{terms:e.terms,cappedAmount:{amount:e.amount,currencyCode:e.currencyCode}}}};throw new o.BillingError({message:"Invalid interval provided",errorData:[e]})}),l=yield r.request(d,{variables:{name:t,trialDays:e.trialDays,replacementBehavior:e.replacementBehavior,returnUrl:a,test:s,lineItems:n}});if(l.errors)throw new o.BillingError({message:"Error while billing the store",errorData:l.errors});return l.data})}({billingConfig:e,plan:f,client:P,returnUrl:_,isTest:h})).appSubscriptionCreate}else t=v.interval===i.BillingInterval.OneTime?(yield function({billingConfig:e,plan:t,client:r,returnUrl:i,isTest:a}){return n.__awaiter(this,void 0,void 0,function*(){let n=yield r.request(u,{variables:{name:t,returnUrl:i,test:a,price:{amount:e.amount,currencyCode:e.currencyCode}}});if(n.errors)throw new o.BillingError({message:"Error while billing the store",errorData:n.errors});return n.data})}({billingConfig:Object.assign(Object.assign({},v),b),plan:f,client:P,returnUrl:_,isTest:h})).appPurchaseOneTimeCreate:v.interval===i.BillingInterval.Usage?(yield function({billingConfig:e,plan:t,client:r,returnUrl:i,isTest:a}){return n.__awaiter(this,void 0,void 0,function*(){let n=yield r.request(d,{variables:{name:t,returnUrl:i,test:a,trialDays:e.trialDays,replacementBehavior:e.replacementBehavior,lineItems:[{plan:{appUsagePricingDetails:{terms:e.usageTerms,cappedAmount:{amount:e.amount,currencyCode:e.currencyCode}}}}]}});if(n.errors)throw new o.BillingError({message:`Error while billing the store:: ${n.errors}`,errorData:n.errors});return n.data})}({billingConfig:Object.assign(Object.assign({},v),b),plan:f,client:P,returnUrl:_,isTest:h})).appSubscriptionCreate:(yield function({billingConfig:e,plan:t,client:r,returnUrl:i,isTest:a}){var s,l,c,u,p;return n.__awaiter(this,void 0,void 0,function*(){let n=yield r.request(d,{variables:{name:t,trialDays:e.trialDays,replacementBehavior:e.replacementBehavior,returnUrl:i,test:a,lineItems:[{plan:{appRecurringPricingDetails:{interval:e.interval,price:{amount:e.amount,currencyCode:e.currencyCode},discount:{durationLimitInIntervals:null===(s=e.discount)||void 0===s?void 0:s.durationLimitInIntervals,value:{amount:null===(c=null===(l=e.discount)||void 0===l?void 0:l.value)||void 0===c?void 0:c.amount,percentage:null===(p=null===(u=e.discount)||void 0===u?void 0:u.value)||void 0===p?void 0:p.percentage}}}}}]}});if(n.errors)throw new o.BillingError({message:"Error while billing the store",errorData:n.errors});return n.data})}({billingConfig:Object.assign(Object.assign({},v),b),plan:f,client:P,returnUrl:_,isTest:h})).appSubscriptionCreate;if(null===(r=t.userErrors)||void 0===r?void 0:r.length)throw new o.BillingError({message:"Error while billing the store",errorData:t.userErrors});return y?t:t.confirmationUrl})}};let d=`
  mutation test(
    $name: String!
    $lineItems: [AppSubscriptionLineItemInput!]!
    $returnUrl: URL!
    $test: Boolean
    $trialDays: Int
    $replacementBehavior: AppSubscriptionReplacementBehavior
  ) {
    appSubscriptionCreate(
      name: $name
      lineItems: $lineItems
      returnUrl: $returnUrl
      test: $test
      trialDays: $trialDays
      replacementBehavior: $replacementBehavior
    ) {
      appSubscription {
        id
        name
        test
      }
      confirmationUrl
      userErrors {
        field
        message
      }
    }
  }
`,u=`
  mutation test(
    $name: String!
    $price: MoneyInput!
    $returnUrl: URL!
    $test: Boolean
  ) {
    appPurchaseOneTimeCreate(
      name: $name
      price: $price
      returnUrl: $returnUrl
      test: $test
    ) {
      appPurchaseOneTime {
        id
        name
        test
      }
      confirmationUrl
      userErrors {
        field
        message
      }
    }
  }
`},7124:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptions=void 0;let n=r(1222),i=r(3516),o=r(194),a=`
  query appSubscription {
    currentAppInstallation {
      activeSubscriptions {
        id
        name
        test
      }
  }
}
`;t.subscriptions=function(e){return function({session:t}){var r;return n.__awaiter(this,void 0,void 0,function*(){if(!e.billing)throw new i.BillingError({message:"Attempted to look for purchases without billing configs",errorData:[]});let n=new((0,o.graphqlClientClass)({config:e}))({session:t});return null===(r=(yield n.request(a)).data)||void 0===r?void 0:r.currentAppInstallation})}}},9891:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9112:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.graphqlClientClass=t.GraphqlClient=void 0;let n=r(1222),i=r(5690),o=r(7644),a=n.__importStar(r(3516)),s=r(5226),l=r(7282);class c{constructor(e){var t,r;let n=this.graphqlClass().config;if(!n.isCustomStoreApp&&!e.session.accessToken)throw new a.MissingRequiredArgument("Missing access token when creating GraphQL client");if(e.apiVersion){let t=e.apiVersion===n.apiVersion?`Admin client has a redundant API version override to the default ${e.apiVersion}`:`Admin client overriding default API version ${n.apiVersion} with ${e.apiVersion}`;(0,o.logger)(n).debug(t)}this.session=e.session,this.apiVersion=e.apiVersion,this.client=(0,i.createAdminApiClient)({accessToken:null!==(t=n.adminApiAccessToken)&&void 0!==t?t:this.session.accessToken,apiVersion:null!==(r=this.apiVersion)&&void 0!==r?r:n.apiVersion,storeDomain:this.session.shop,customFetchApi:s.abstractFetch,logger:(0,l.clientLoggerFactory)(n),userAgentPrefix:(0,l.getUserAgent)(n)})}query(e){var t;return n.__awaiter(this,void 0,void 0,function*(){let r,n;if((0,o.logger)(this.graphqlClass().config).deprecated("10.0.0","The query method is deprecated, and was replaced with the request method.\nSee the migration guide: https://github.com/Shopify/shopify-api-js/blob/main/packages/shopify-api/docs/migrating-to-v9.md#using-the-new-clients."),"string"==typeof e.data&&0===e.data.length||0===Object.entries(e.data).length)throw new a.MissingRequiredArgument("Query missing.");"string"==typeof e.data?r=e.data:(r=e.data.query,n=e.data.variables);let i=Object.fromEntries(Object.entries(null!==(t=null==e?void 0:e.extraHeaders)&&void 0!==t?t:{}).map(([e,t])=>[e,Array.isArray(t)?t.join(", "):t.toString()]));return{body:yield this.request(r,{headers:i,retries:e.tries?e.tries-1:void 0,variables:n}),headers:{}}})}request(e,t){var r;return n.__awaiter(this,void 0,void 0,function*(){let n=yield this.client.request(e,Object.assign({apiVersion:this.apiVersion||this.graphqlClass().config.apiVersion},t));if(n.errors){let e=n.errors.response;(0,l.throwFailedRequest)(n,e,(null!==(r=null==t?void 0:t.retries)&&void 0!==r?r:0)>0)}return n})}graphqlClass(){return this.constructor}}t.GraphqlClient=c,t.graphqlClientClass=function({config:e}){class t extends c{}return t.config=e,Reflect.defineProperty(t,"name",{value:"GraphqlClient"}),t}},194:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestClient=t.restClientClass=t.GraphqlClient=t.graphqlClientClass=void 0;var n=r(9112);Object.defineProperty(t,"graphqlClientClass",{enumerable:!0,get:function(){return n.graphqlClientClass}}),Object.defineProperty(t,"GraphqlClient",{enumerable:!0,get:function(){return n.GraphqlClient}});var i=r(6977);Object.defineProperty(t,"restClientClass",{enumerable:!0,get:function(){return i.restClientClass}}),Object.defineProperty(t,"RestClient",{enumerable:!0,get:function(){return i.RestClient}})},6977:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restClientClass=t.RestClient=void 0;let n=r(1222),i=r(5690),o=r(9254),a=r(7282),s=r(5226),l=n.__importStar(r(3516)),c=r(7644);class d{constructor({session:e,apiVersion:t}){var r;this.loggedDeprecations={};let n=this.restClass().config;if(!n.isCustomStoreApp&&!e.accessToken)throw new l.MissingRequiredArgument("Missing access token when creating REST client");if(t){let e=t===n.apiVersion?`REST client has a redundant API version override to the default ${t}`:`REST client overriding default API version ${n.apiVersion} with ${t}`;(0,c.logger)(n).debug(e)}let o=null!==(r=n.adminApiAccessToken)&&void 0!==r?r:n.apiSecretKey;this.session=e,this.apiVersion=null!=t?t:n.apiVersion,this.client=(0,i.createAdminRestApiClient)({scheme:n.hostScheme,storeDomain:e.shop,apiVersion:null!=t?t:n.apiVersion,accessToken:n.isCustomStoreApp?o:e.accessToken,customFetchApi:s.abstractFetch,logger:(0,a.clientLoggerFactory)(n),userAgentPrefix:(0,a.getUserAgent)(n),defaultRetryTime:this.restClass().RETRY_WAIT_TIME,formatPaths:this.restClass().formatPaths})}get(e){return n.__awaiter(this,void 0,void 0,function*(){return this.request(Object.assign({method:o.Method.Get},e))})}post(e){return n.__awaiter(this,void 0,void 0,function*(){return this.request(Object.assign({method:o.Method.Post},e))})}put(e){return n.__awaiter(this,void 0,void 0,function*(){return this.request(Object.assign({method:o.Method.Put},e))})}delete(e){return n.__awaiter(this,void 0,void 0,function*(){return this.request(Object.assign({method:o.Method.Delete},e))})}request(e){var t,r,i;return n.__awaiter(this,void 0,void 0,function*(){let n;let c={headers:Object.assign(Object.assign({},e.extraHeaders),e.type?{"Content-Type":e.type.toString()}:{}),retries:e.tries?e.tries-1:void 0,searchParams:e.query};switch(e.method){case o.Method.Get:n=yield this.client.get(e.path,c);break;case o.Method.Put:n=yield this.client.put(e.path,Object.assign(Object.assign({},c),{data:e.data}));break;case o.Method.Post:n=yield this.client.post(e.path,Object.assign(Object.assign({},c),{data:e.data}));break;case o.Method.Delete:n=yield this.client.delete(e.path,c);break;default:throw new l.InvalidRequestError(`Unsupported request method '${e.method}'`)}let u=yield n.json(),p=(0,s.canonicalizeHeaders)(Object.fromEntries(n.headers.entries()));n.ok||(0,a.throwFailedRequest)(u,n,(null!==(t=e.tries)&&void 0!==t?t:1)>1);let f={body:u,headers:p};yield this.logDeprecations({method:e.method,url:e.path,headers:c.headers,body:e.data?JSON.stringify(e.data):void 0},f);let h=n.headers.get("Link");if(void 0!==h){let t={limit:(null===(r=e.query)||void 0===r?void 0:r.limit)?null===(i=e.query)||void 0===i?void 0:i.limit.toString():d.DEFAULT_LIMIT};if(h)for(let e of h.split(", ")){let r=e.match(d.LINK_HEADER_REGEXP);if(!r)continue;let n=r[2],i=new URL(r[1]),o=i.searchParams.get("fields"),a=i.searchParams.get("page_info");if(!t.fields&&o&&(t.fields=o.split(",")),a)switch(n){case"previous":t.previousPageUrl=r[1],t.prevPage=this.buildRequestParams(r[1]);break;case"next":t.nextPageUrl=r[1],t.nextPage=this.buildRequestParams(r[1])}}f.pageInfo=t}return f})}restClass(){return this.constructor}buildRequestParams(e){let t=new URL(e);return{path:t.pathname.replace(RegExp("^/admin/api/[^/]+/(.*).json$"),"$1"),query:Object.fromEntries(t.searchParams.entries())}}logDeprecations(e,t){return n.__awaiter(this,void 0,void 0,function*(){let r=this.restClass().config,n=(0,s.getHeader)(t.headers,"X-Shopify-API-Deprecated-Reason");if(n){let t={message:n,path:e.url};e.body&&(t.body=`${e.body.substring(0,100)}...`);let i=yield(0,s.createSHA256HMAC)(r.apiSecretKey,JSON.stringify(t),s.HashFormat.Hex);if(!Object.keys(this.loggedDeprecations).includes(i)||Date.now()-this.loggedDeprecations[i]>=d.DEPRECATION_ALERT_DELAY){this.loggedDeprecations[i]=Date.now();let e=Error().stack,n=`API Deprecation Notice ${new Date().toLocaleString()} : ${JSON.stringify(t)}  -  Stack Trace: ${e}`;yield(0,c.logger)(r).warning(n)}}})}}t.RestClient=d,d.LINK_HEADER_REGEXP=/<([^<]+)>; rel="([^"]+)"/,d.DEFAULT_LIMIT="50",d.RETRY_WAIT_TIME=1e3,d.DEPRECATION_ALERT_DELAY=3e5,t.restClientClass=function(e){let{config:t,formatPaths:r}=e;class n extends d{}return n.config=t,n.formatPaths=void 0===r||r,Reflect.defineProperty(n,"name",{value:"RestClient"}),n}},8096:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7282:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throwFailedRequest=t.clientLoggerFactory=t.getUserAgent=void 0;let n=r(1222),i=r(9254),o=n.__importStar(r(3516)),a=r(2451),s=r(6747),l=r(5226),c=r(7644);t.getUserAgent=function(e){let t=`${a.LIBRARY_NAME} v${s.SHOPIFY_API_LIBRARY_VERSION} | ${(0,l.abstractRuntimeString)()}`;return e.userAgentPrefix&&(t=`${e.userAgentPrefix} | ${t}`),t},t.clientLoggerFactory=function(e){return t=>{if(e.logger.httpRequests)switch(t.type){case"HTTP-Response":{let r=t.content;(0,c.logger)(e).debug("Received response for HTTP request",{requestParams:JSON.stringify(r.requestParams),response:JSON.stringify(r.response)});break}case"HTTP-Retry":{let r=t.content;(0,c.logger)(e).debug("Retrying HTTP request",{requestParams:JSON.stringify(r.requestParams),retryAttempt:r.retryAttempt,maxRetries:r.maxRetries,response:JSON.stringify(r.lastResponse)});break}default:(0,c.logger)(e).debug(`HTTP request event: ${t.content}`)}}},t.throwFailedRequest=function(e,t,r){var n,a,s;let c=(0,l.canonicalizeHeaders)(Object.fromEntries(null!==(n=t.headers.entries())&&void 0!==n?n:[]));if(t.status===i.StatusCode.Ok&&e.errors.graphQLErrors)throw new o.GraphqlQueryError({message:null!==(s=null===(a=e.errors.graphQLErrors)||void 0===a?void 0:a[0].message)&&void 0!==s?s:"GraphQL operation failed",response:t,headers:c});let d=[];e.errors&&d.push(JSON.stringify(e.errors,null,2));let u=(0,l.getHeader)(c,"x-request-id");u&&d.push(`If you report this error, please include this id: ${u}`);let p=d.length?`:
${d.join("\n")}`:"",f=t.status,h=t.statusText;switch(!0){case t.status===i.StatusCode.TooManyRequests:if(r)throw new o.HttpMaxRetriesError("Attempted the maximum number of retries for HTTP request.");{let t=(0,l.getHeader)(c,"Retry-After");throw new o.HttpThrottlingError({message:`Shopify is throttling requests${p}`,code:f,statusText:h,body:e,headers:c,retryAfter:t?parseFloat(t):void 0})}case t.status>=i.StatusCode.InternalServerError:if(r)throw new o.HttpMaxRetriesError("Attempted the maximum number of retries for HTTP request.");throw new o.HttpInternalError({message:`Shopify internal error${p}`,code:f,statusText:h,body:e,headers:c});default:throw new o.HttpResponseError({message:`Received an error response (${t.status} ${t.statusText}) from Shopify${p}`,code:f,statusText:h,body:e,headers:c})}}},4662:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.graphqlProxy=void 0;let n=r(1222),i=n.__importStar(r(3516)),o=r(194);t.graphqlProxy=function(e){return({session:t,rawBody:r})=>n.__awaiter(this,void 0,void 0,function*(){let n,a;if(!t.accessToken)throw new i.InvalidSession("Cannot proxy query. Session not authenticated.");let s=new((0,o.graphqlClientClass)({config:e}))({session:t});if("string"==typeof r?n=r:(n=r.query,a=r.variables),!n)throw new i.MissingRequiredArgument("Query missing.");return{body:yield s.request(n,{variables:a}),headers:{}}})}},2825:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9252:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientClasses=void 0;let n=r(194),i=r(2525),o=r(4662);t.clientClasses=function(e){return{Rest:(0,n.restClientClass)({config:e}),Graphql:(0,n.graphqlClientClass)({config:e}),Storefront:(0,i.storefrontClientClass)({config:e}),graphqlProxy:(0,o.graphqlProxy)(e)}}},4533:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.storefrontClientClass=t.StorefrontClient=void 0;let n=r(1222),i=r(3929),o=r(7644),a=n.__importStar(r(3516)),s=r(3516),l=r(5226),c=r(7282);class d{constructor(e){var t;let r;let n=this.storefrontClass().config;if(!n.isCustomStoreApp&&!e.session.accessToken)throw new a.MissingRequiredArgument("Missing access token when creating GraphQL client");if(e.apiVersion){let t=e.apiVersion===n.apiVersion?`Storefront client has a redundant API version override to the default ${e.apiVersion}`:`Storefront client overriding default API version ${n.apiVersion} with ${e.apiVersion}`;(0,o.logger)(n).debug(t)}if(n.isCustomStoreApp){if(!(r=n.privateAppStorefrontAccessToken))throw new s.MissingRequiredArgument("Custom store apps must set the privateAppStorefrontAccessToken property to call the Storefront API.")}else if(!(r=e.session.accessToken))throw new s.MissingRequiredArgument("Session missing access token.");this.session=e.session,this.apiVersion=e.apiVersion,this.client=(0,i.createStorefrontApiClient)({privateAccessToken:r,apiVersion:null!==(t=this.apiVersion)&&void 0!==t?t:n.apiVersion,storeDomain:this.session.shop,customFetchApi:l.abstractFetch,logger:(0,c.clientLoggerFactory)(n),clientName:(0,c.getUserAgent)(n)})}query(e){var t;return n.__awaiter(this,void 0,void 0,function*(){let r,n;if((0,o.logger)(this.storefrontClass().config).deprecated("10.0.0","The query method is deprecated, and was replaced with the request method.\nSee the migration guide: https://github.com/Shopify/shopify-api-js/blob/main/packages/shopify-api/docs/migrating-to-v9.md#using-the-new-clients."),"string"==typeof e.data&&0===e.data.length||0===Object.entries(e.data).length)throw new a.MissingRequiredArgument("Query missing.");"string"==typeof e.data?r=e.data:(r=e.data.query,n=e.data.variables);let i=Object.fromEntries(Object.entries(null!==(t=null==e?void 0:e.extraHeaders)&&void 0!==t?t:{}).map(([e,t])=>[e,Array.isArray(t)?t.join(", "):t.toString()]));return{body:yield this.request(r,{headers:i,retries:e.tries?e.tries-1:void 0,variables:n}),headers:{}}})}request(e,t){var r;return n.__awaiter(this,void 0,void 0,function*(){let n=yield this.client.request(e,Object.assign({apiVersion:this.apiVersion||this.storefrontClass().config.apiVersion},t));if(n.errors){let e=n.errors.response;(0,c.throwFailedRequest)(n,e,(null!==(r=null==t?void 0:t.retries)&&void 0!==r?r:0)>0)}return n})}storefrontClass(){return this.constructor}}t.StorefrontClient=d,t.storefrontClientClass=function(e){let{config:t}=e;class r extends d{}return r.config=t,Reflect.defineProperty(r,"name",{value:"StorefrontClient"}),r}},2525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.storefrontClientClass=t.StorefrontClient=void 0;var n=r(4533);Object.defineProperty(t,"StorefrontClient",{enumerable:!0,get:function(){return n.StorefrontClient}}),Object.defineProperty(t,"storefrontClientClass",{enumerable:!0,get:function(){return n.storefrontClientClass}})},574:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DataType=void 0;let i=r(1222);i.__exportStar(r(8096),t),i.__exportStar(r(2825),t),function(e){e.JSON="application/json",e.GraphQL="application/graphql",e.URLEncoded="application/x-www-form-urlencoded"}(n||(t.DataType=n={}))},2609:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateConfig=void 0;let n=r(1222),i=r(3516),o=r(2451),a=r(8242),s=r(7644);function l(e,t){switch(e){case o.LogSeverity.Debug:console.debug(t);break;case o.LogSeverity.Info:console.log(t);break;case o.LogSeverity.Warning:console.warn(t);break;case o.LogSeverity.Error:console.error(t)}}t.validateConfig=function(e){var t;let r={apiKey:"",apiSecretKey:"",scopes:new a.AuthScopes([]),hostName:"",hostScheme:"https",apiVersion:o.LATEST_API_VERSION,isEmbeddedApp:!0,isCustomStoreApp:!1,logger:{log:l,level:o.LogSeverity.Info,httpRequests:!1,timestamps:!1},future:{}},c=["apiSecretKey","hostName"];"isCustomStoreApp"in e&&e.isCustomStoreApp||(c.push("apiKey"),c.push("scopes")),"isCustomStoreApp"in e&&e.isCustomStoreApp&&(!("adminApiAccessToken"in e)||(null===(t=e.adminApiAccessToken)||void 0===t?void 0:t.length)===0)&&c.push("adminApiAccessToken");let d=[];if(c.forEach(t=>{var r;null!=(r=e[t])&&(!("string"==typeof r||Array.isArray(r))||r.length>0)||d.push(t)}),d.length)throw new i.ShopifyError(`Cannot initialize Shopify API Library. Missing values for: ${d.join(", ")}`);let{hostScheme:u,isCustomStoreApp:p,adminApiAccessToken:f,userAgentPrefix:h,logger:m,privateAppStorefrontAccessToken:y,customShopDomains:g,billing:v}=e;return Object.assign(r,n.__rest(e,["hostScheme","isCustomStoreApp","adminApiAccessToken","userAgentPrefix","logger","privateAppStorefrontAccessToken","customShopDomains","billing"]),{hostName:e.hostName.replace(/\/$/,""),scopes:e.scopes instanceof a.AuthScopes?e.scopes:new a.AuthScopes(e.scopes),hostScheme:null!=u?u:r.hostScheme,isCustomStoreApp:null!=p?p:r.isCustomStoreApp,adminApiAccessToken:null!=f?f:r.adminApiAccessToken,userAgentPrefix:null!=h?h:r.userAgentPrefix,logger:Object.assign(Object.assign({},r.logger),m||{}),privateAppStorefrontAccessToken:null!=y?y:r.privateAppStorefrontAccessToken,customShopDomains:null!=g?g:r.customShopDomains,billing:null!=v?v:r.billing}),r.isCustomStoreApp&&e.adminApiAccessToken===e.apiSecretKey&&(0,s.logger)(r).warning("adminApiAccessToken is set to the same value as apiSecretKey. adminApiAccessToken should be set to the Admin API access token for custom store apps; apiSecretKey should be set to the custom store app's API secret key."),r}},3516:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureDeprecatedError=t.BillingError=t.InvalidRequestError=t.UnsupportedClientType=t.MissingRequiredArgument=t.SessionStorageError=t.MissingWebhookCallbackError=t.InvalidWebhookError=t.InvalidSession=t.CookieNotFound=t.BotActivityDetected=t.InvalidOAuthError=t.GraphqlQueryError=t.RestResourceError=t.HttpThrottlingError=t.HttpInternalError=t.HttpRetriableError=t.HttpResponseError=t.HttpMaxRetriesError=t.HttpRequestError=t.PrivateAppError=t.SafeCompareError=t.InvalidDeliveryMethodError=t.MissingJwtTokenError=t.InvalidJwtError=t.InvalidHostError=t.InvalidShopError=t.InvalidHmacError=t.ShopifyError=void 0;let n=r(1222);class i extends Error{constructor(...e){super(...e),Object.setPrototypeOf(this,new.target.prototype)}}t.ShopifyError=i;class o extends i{}t.InvalidHmacError=o;class a extends i{}t.InvalidShopError=a;class s extends i{}t.InvalidHostError=s;class l extends i{}t.InvalidJwtError=l;class c extends i{}t.MissingJwtTokenError=c;class d extends i{}t.InvalidDeliveryMethodError=d;class u extends i{}t.SafeCompareError=u;class p extends i{}t.PrivateAppError=p;class f extends i{}t.HttpRequestError=f;class h extends i{}t.HttpMaxRetriesError=h;class m extends i{constructor({message:e,code:t,statusText:r,body:n,headers:i}){super(e),this.response={code:t,statusText:r,body:n,headers:i}}}t.HttpResponseError=m;class y extends m{}t.HttpRetriableError=y;class g extends y{}t.HttpInternalError=g;class v extends y{constructor(e){var{retryAfter:t}=e;super(n.__rest(e,["retryAfter"])),this.response.retryAfter=t}}t.HttpThrottlingError=v;class b extends i{}t.RestResourceError=b;class E extends i{constructor({message:e,response:t,headers:r}){super(e),this.response=t,this.headers=r}}t.GraphqlQueryError=E;class w extends i{}t.InvalidOAuthError=w;class S extends i{}t.BotActivityDetected=S;class _ extends i{}t.CookieNotFound=_;class P extends i{}t.InvalidSession=P;class C extends i{constructor({message:e,response:t}){super(e),this.response=t}}t.InvalidWebhookError=C;class x extends C{}t.MissingWebhookCallbackError=x;class A extends i{}t.SessionStorageError=A;class k extends i{}t.MissingRequiredArgument=k;class T extends i{}t.UnsupportedClientType=T;class O extends i{}t.InvalidRequestError=O;class I extends i{constructor({message:e,errorData:t}){super(e),this.message=e,this.errorData=t}}t.BillingError=I;class j extends i{}t.FeatureDeprecatedError=j},9396:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shopifyApi=void 0;let n=r(1222),i=r(3159),o=r(1249),a=r(2609),s=r(9252),l=r(6928),c=r(2896),d=r(6199),u=r(1513),p=r(6328),f=r(7644),h=r(6747),m=r(6977);n.__exportStar(r(3516),t),n.__exportStar(r(3341),t),n.__exportStar(r(477),t),n.__exportStar(r(2451),t),n.__exportStar(r(904),t),n.__exportStar(r(6454),t),n.__exportStar(r(9891),t),n.__exportStar(r(574),t),n.__exportStar(r(3535),t),n.__exportStar(r(4308),t),t.shopifyApi=function(e){var{future:t,restResources:r}=e;let y=Object.assign(Object.assign({},n.__rest(e,["future","restResources"])),{future:t,restResources:r}),g=(0,a.validateConfig)(y),v={config:g,clients:(0,s.clientClasses)(g),auth:(0,l.shopifyAuth)(g),session:(0,c.shopifySession)(g),utils:(0,d.shopifyUtils)(g),webhooks:(0,u.shopifyWebhooks)(g),billing:(0,p.shopifyBilling)(g),logger:(0,f.logger)(g),rest:{}};return r&&(v.rest=(0,i.loadRestResources)({resources:r,config:g,RestClient:(0,m.restClientClass)({config:g})})),v.logger.info(`version ${h.SHOPIFY_API_LIBRARY_VERSION}, environment ${(0,o.abstractRuntimeString)()}`).catch(e=>console.log(e)),v}},7644:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;let n=r(1222),i=r(4696),o=r(2451),a=r(3516),s=r(6747),l=r(976);t.logger=function(e){let t=(0,l.log)(e);return{log:t,debug:(e,r={})=>n.__awaiter(this,void 0,void 0,function*(){return t(o.LogSeverity.Debug,e,r)}),info:(e,r={})=>n.__awaiter(this,void 0,void 0,function*(){return t(o.LogSeverity.Info,e,r)}),warning:(e,r={})=>n.__awaiter(this,void 0,void 0,function*(){return t(o.LogSeverity.Warning,e,r)}),error:(e,r={})=>n.__awaiter(this,void 0,void 0,function*(){return t(o.LogSeverity.Error,e,r)}),deprecated:function(e,r){if((0,i.compare)(s.SHOPIFY_API_LIBRARY_VERSION,e,">="))throw new a.FeatureDeprecatedError(`Feature was deprecated in version ${e}`);return t(o.LogSeverity.Warning,`[Deprecated | ${e}] ${r}`)}}}},976:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=void 0;let n=r(2451);t.log=function(e){return function(t,r,i={}){if(t>e.logger.level)return;let o=[];e.logger.timestamps&&o.push(`${new Date().toISOString().slice(0,-5)}Z`);let a=i.package||"shopify-api";switch(delete i.package,t){case n.LogSeverity.Debug:a=`${a}/DEBUG`;break;case n.LogSeverity.Info:a=`${a}/INFO`;break;case n.LogSeverity.Warning:a=`${a}/WARNING`;break;case n.LogSeverity.Error:a=`${a}/ERROR`}o.push(a);let s=[];Object.entries(i).forEach(([e,t])=>{s.push(`${e}: ${t}`)});let l="";s.length>0&&(l=` | {${s.join(", ")}}`),e.logger.log(t,`[${o.join("] [")}] ${r}${l}`)}}},3341:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Session=void 0;var n=r(1679);Object.defineProperty(t,"Session",{enumerable:!0,get:function(){return n.Session}})},3277:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSessionToken=void 0;let n=r(1222),i=n.__importStar(r(418)),o=n.__importStar(r(3516)),a=r(4941);t.decodeSessionToken=function(e){return(t,{checkAudience:r=!0}={})=>n.__awaiter(this,void 0,void 0,function*(){let n;try{n=(yield i.jwtVerify(t,(0,a.getHMACKey)(e.apiSecretKey),{algorithms:["HS256"],clockTolerance:10})).payload}catch(e){throw new o.InvalidJwtError(`Failed to parse session token '${t}': ${e.message}`)}if(r&&n.aud!==e.apiKey)throw new o.InvalidJwtError("Session token had invalid API key");return n})}},2896:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shopifySession=void 0;let n=r(3277),i=r(2854);t.shopifySession=function(e){return{customAppSession:(0,i.customAppSession)(e),getCurrentId:(0,i.getCurrentSessionId)(e),getOfflineId:(0,i.getOfflineId)(e),getJwtSessionId:(0,i.getJwtSessionId)(e),decodeSessionToken:(0,n.decodeSessionToken)(e)}}},2854:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customAppSession=t.getCurrentSessionId=t.getOfflineId=t.getJwtSessionId=void 0;let n=r(1222),i=r(8776),o=r(4965),a=r(7333),s=r(7644),l=n.__importStar(r(3516)),c=r(3277),d=r(1679);function u(e){return(t,r)=>`${(0,a.sanitizeShop)(e)(t,!0)}_${r}`}function p(e){return t=>`offline_${(0,a.sanitizeShop)(e)(t,!0)}`}t.getJwtSessionId=u,t.getOfflineId=p,t.getCurrentSessionId=function(e){return function(t){var{isOnline:r}=t,a=n.__rest(t,["isOnline"]);return n.__awaiter(this,void 0,void 0,function*(){let t=yield(0,o.abstractConvertRequest)(a),n=(0,s.logger)(e);if(!e.isEmbeddedApp)return n.debug("App is not embedded, looking for session id in cookies",{isOnline:r}),new o.Cookies(t,{},{keys:[e.apiSecretKey]}).getAndVerify(i.SESSION_COOKIE_NAME);{n.debug("App is embedded, looking for session id in JWT payload",{isOnline:r});let i=t.headers.Authorization;if(i){let t=("string"==typeof i?i:i[0]).match(/^Bearer (.+)$/);if(!t)throw n.error("Missing Bearer token in authorization header",{isOnline:r}),new l.MissingJwtTokenError("Missing Bearer token in authorization header");let o=yield(0,c.decodeSessionToken)(e)(t[1]),a=o.dest.replace(/^https:\/\//,"");return(n.debug("Found valid JWT payload",{shop:a,isOnline:r}),r)?u(e)(a,o.sub):p(e)(a)}n.error("Missing Authorization header, was the request made with authenticatedFetch?",{isOnline:r})}})}},t.customAppSession=function(e){return t=>new d.Session({id:"",shop:`${(0,a.sanitizeShop)(e)(t,!0)}`,state:"",isOnline:!1})}},1679:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Session=void 0;let n=r(3516),i=r(8242),o=["id","shop","state","isOnline","scope","accessToken","expires","onlineAccessInfo"];class a{static fromPropertyArray(e){if(!Array.isArray(e))throw new n.InvalidSession("The parameter is not an array: a Session cannot be created from this object.");let t=Object.fromEntries(e.filter(([e,t])=>null!=t).map(([e,t])=>{switch(e.toLowerCase()){case"isonline":return["isOnline",t];case"accesstoken":return["accessToken",t];case"onlineaccessinfo":return["onlineAccessInfo",t];default:return[e.toLowerCase(),t]}}).map(([e,t])=>{switch(e){case"isOnline":if("string"==typeof t)return[e,"true"===t.toString().toLowerCase()];if("number"==typeof t)return[e,!!t];return[e,t];case"scope":return[e,t.toString()];case"expires":return[e,t?new Date(Number(t)):void 0];case"onlineAccessInfo":return[e,{associated_user:{id:Number(t)}}];default:return[e,t]}}));return Object.setPrototypeOf(t,a.prototype),t}constructor(e){Object.assign(this,e)}isActive(e){return!this.isScopeChanged(e)&&!!this.accessToken&&!this.isExpired()}isScopeChanged(e){return!(e instanceof i.AuthScopes?e:new i.AuthScopes(e)).equals(this.scope)}isExpired(e=0){return!!(this.expires&&this.expires.getTime()-e<Date.now())}toObject(){let e={id:this.id,shop:this.shop,state:this.state,isOnline:this.isOnline};return this.scope&&(e.scope=this.scope),this.expires&&(e.expires=this.expires),this.accessToken&&(e.accessToken=this.accessToken),this.onlineAccessInfo&&(e.onlineAccessInfo=this.onlineAccessInfo),e}equals(e){if(!e||!(this.id===e.id&&this.shop===e.shop&&this.state===e.state&&this.isOnline===e.isOnline))return!1;let t=this.toPropertyArray();t.sort(([e],[t])=>e<t?-1:1);let r=e.toPropertyArray();return r.sort(([e],[t])=>e<t?-1:1),JSON.stringify(t)===JSON.stringify(r)}toPropertyArray(){return Object.entries(this).filter(([e,t])=>o.includes(e)&&null!=t).map(([e,t])=>{var r;switch(e){case"expires":return[e,t?t.getTime():void 0];case"onlineAccessInfo":return[e,null===(r=null==t?void 0:t.associated_user)||void 0===r?void 0:r.id];default:return[e,t]}})}}t.Session=a},3535:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2451:(e,t)=>{"use strict";var r,n,i,o,a,s;Object.defineProperty(t,"__esModule",{value:!0}),t.BillingReplacementBehavior=t.BillingInterval=t.privacyTopics=t.ClientType=t.ShopifyHeader=t.LATEST_API_VERSION=t.LIBRARY_NAME=t.ApiVersion=t.LogSeverity=void 0,function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Debug=3]="Debug"}(r||(t.LogSeverity=r={})),function(e){e.October22="2022-10",e.January23="2023-01",e.April23="2023-04",e.July23="2023-07",e.October23="2023-10",e.January24="2024-01",e.Unstable="unstable"}(n||(t.ApiVersion=n={})),t.LIBRARY_NAME="Shopify API Library",t.LATEST_API_VERSION=n.January24,function(e){e.AccessToken="X-Shopify-Access-Token",e.ApiVersion="X-Shopify-API-Version",e.Domain="X-Shopify-Shop-Domain",e.Hmac="X-Shopify-Hmac-Sha256",e.Topic="X-Shopify-Topic",e.WebhookId="X-Shopify-Webhook-Id",e.StorefrontPrivateToken="Shopify-Storefront-Private-Token",e.StorefrontSDKVariant="X-SDK-Variant",e.StorefrontSDKVersion="X-SDK-Version"}(i||(t.ShopifyHeader=i={})),function(e){e.Rest="rest",e.Graphql="graphql"}(o||(t.ClientType=o={})),t.privacyTopics=["CUSTOMERS_DATA_REQUEST","CUSTOMERS_REDACT","SHOP_REDACT"],function(e){e.OneTime="ONE_TIME",e.Every30Days="EVERY_30_DAYS",e.Annual="ANNUAL",e.Usage="USAGE"}(a||(t.BillingInterval=a={})),function(e){e.ApplyImmediately="APPLY_IMMEDIATELY",e.ApplyOnNextBillingCycle="APPLY_ON_NEXT_BILLING_CYCLE",e.Standard="STANDARD"}(s||(t.BillingReplacementBehavior=s={}))},4941:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHMACKey=void 0,t.getHMACKey=function(e){let t=new Uint8Array(e.length);for(let r=0,n=e.length;r<n;r++)t[r]=e.charCodeAt(r);return t}},8790:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTimeInSec=t.validateHmac=t.generateLocalHmac=void 0;let n=r(1222),i=r(773),o=r(6075),a=n.__importStar(r(3516)),s=r(3905),l=n.__importDefault(r(5901));function c(e){return(t,r="admin")=>n.__awaiter(this,void 0,void 0,function*(){let{hmac:a,signature:s}=t,c=n.__rest(t,["hmac","signature"]),d="admin"===r?function(e){let t=new l.default;return Object.keys(e).sort((e,t)=>e.localeCompare(t)).forEach(r=>t.put(r,e[r])),t.stringify(!0)}(c):Object.entries(c).sort(([e],[t])=>e.localeCompare(t)).reduce((e,[t,r])=>`${e}${t}=${Array.isArray(r)?r.join(","):r}`,"");return(0,i.createSHA256HMAC)(e.apiSecretKey,d,o.HashFormat.Hex)})}function d(){return Math.trunc(Date.now()/1e3)}t.generateLocalHmac=c,t.validateHmac=function(e){return(t,{signator:r}={signator:"admin"})=>n.__awaiter(this,void 0,void 0,function*(){if("admin"===r&&!t.hmac)throw new a.InvalidHmacError("Query does not contain an HMAC value.");if("appProxy"===r&&!t.signature)throw new a.InvalidHmacError("Query does not contain a signature value.");(function(e){if(Math.abs(d()-Number(e.timestamp))>90)throw new a.InvalidHmacError("HMAC timestamp is outside of the tolerance range")})(t);let n="appProxy"===r?t.signature:t.hmac,i=yield c(e)(t,r);return(0,s.safeCompare)(n,i)})},t.getCurrentTimeInSec=d},6199:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shopifyUtils=void 0;let n=r(7333),i=r(8790),o=r(3595),a=r(1456);t.shopifyUtils=function(e){return{sanitizeShop:(0,n.sanitizeShop)(e),sanitizeHost:(0,n.sanitizeHost)(),validateHmac:(0,i.validateHmac)(e),versionCompatible:(0,o.versionCompatible)(e),versionPriorTo:(0,o.versionPriorTo)(e),shopAdminUrlToLegacyUrl:a.shopAdminUrlToLegacyUrl,legacyUrlToShopAdminUrl:a.legacyUrlToShopAdminUrl}}},5901:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{static stringify(e){return e&&0!==Object.keys(e).length?new r().putAll(e).stringify():""}constructor(){this.processedQuery=new URLSearchParams}putAll(e){return Object.entries(e).forEach(([e,t])=>this.put(e,t)),this}put(e,t){Array.isArray(t)?this.putArray(e,t):(null==t?void 0:t.constructor)===Object?this.putObject(e,t):this.putSimple(e,t)}putArray(e,t){t.forEach(t=>this.processedQuery.append(`${e}[]`,`${t}`))}putObject(e,t){Object.entries(t).forEach(([t,r])=>{this.processedQuery.append(`${e}[${t}]`,`${r}`)})}putSimple(e,t){this.processedQuery.append(e,`${t}`)}stringify(e=!1){let t=this.processedQuery.toString();return e?t:`?${t}`}}t.default=r},1456:(e,t)=>{"use strict";function r(e){return e.replace(/^https?:\/\//,"").replace(/\/$/,"")}Object.defineProperty(t,"__esModule",{value:!0}),t.legacyUrlToShopAdminUrl=t.shopAdminUrlToLegacyUrl=void 0,t.shopAdminUrlToLegacyUrl=function(e){let t=r(e);if("admin"!==t.split(".")[0])return null;let n=RegExp("admin\\..+/store/([^/]+)"),i=t.match(n);if(!i||2!==i.length)return null;{let e=i[1];return t.includes("spin.dev/store/")?function(e){let t=RegExp("admin\\.web\\.(.+\\.spin\\.dev)/store/(.+)"),r=e.match(t);if(!r||3!==r.length)return null;{let e=r[1],t=r[2];return`${t}.shopify.${e}`}}(t):`${e}.myshopify.com`}},t.legacyUrlToShopAdminUrl=function(e){let t=r(e),n=RegExp("(.+)\\.myshopify\\.com$"),i=t.match(n);if(i&&2===i.length){let e=i[1];return`admin.shopify.com/store/${e}`}return t.endsWith("spin.dev")?function(e){let t=RegExp("(.+)\\.shopify\\.(.+\\.spin\\.dev)"),r=e.match(t);if(!r||3!==r.length)return null;{let e=r[1],t=r[2];return`admin.web.${t}/store/${e}`}}(t):null}},7333:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeHost=t.sanitizeShop=void 0;let n=r(3516),i=r(4627),o=r(1456);t.sanitizeShop=function(e){return(t,r=!1)=>{let i=t,a=["myshopify\\.com","shopify\\.com","myshopify\\.io"];e.customShopDomains&&a.push(...e.customShopDomains.map(e=>"string"==typeof e?e:e.source));let s=RegExp(`^[a-zA-Z0-9][a-zA-Z0-9-_]*\\.(${a.join("|")})[/]*$`);RegExp(`^admin\\.(${a.join("|")})/store/([a-zA-Z0-9][a-zA-Z0-9-_]*)$`).test(i)&&(i=(0,o.shopAdminUrlToLegacyUrl)(i)||"");let l=s.test(i)?i:null;if(!l&&r)throw new n.InvalidShopError("Received invalid shop argument");return l}},t.sanitizeHost=function(){return(e,t=!1)=>{let r=/^[0-9a-zA-Z+/]+={0,2}$/.test(e)?e:null;if(r){let{hostname:e}=new URL(`https://${(0,i.decodeHost)(r)}`);RegExp("\\.(myshopify\\\\.com|shopify\\\\.com|myshopify\\\\.io|spin\\\\.dev)$").test(e)||(r=null)}if(!r&&t)throw new n.InvalidHostError("Received invalid host argument");return r}}},3595:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.versionPriorTo=t.versionCompatible=void 0;let n=r(2451);function i(e){return(t,r=e.apiVersion)=>{if(r===n.ApiVersion.Unstable)return!0;let i=e=>parseInt(e.replace("-",""),10);return i(r)>=i(t)}}t.versionCompatible=i,t.versionPriorTo=function(e){return(t,r=e.apiVersion)=>!i(e)(t,r)}},6747:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHOPIFY_API_LIBRARY_VERSION=void 0,t.SHOPIFY_API_LIBRARY_VERSION="9.0.1"},1513:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shopifyWebhooks=void 0;let n=r(6003),i=r(7757),o=r(5025),a=r(2177);t.shopifyWebhooks=function(e){let t=(0,n.registry)();return{addHandlers:(0,n.addHandlers)(e,t),getTopicsAdded:(0,n.getTopicsAdded)(t),getHandlers:(0,n.getHandlers)(t),register:(0,i.register)(e,t),process:(0,o.process)(e,t),validate:(0,a.validateFactory)(e)}}},5025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.process=void 0;let n=r(1222),i=r(9254),o=r(4965),a=n.__importStar(r(3516)),s=r(7644),l=r(4308),c=r(2177),d={[i.StatusCode.Ok]:"OK",[i.StatusCode.BadRequest]:"Bad Request",[i.StatusCode.Unauthorized]:"Unauthorized",[i.StatusCode.NotFound]:"Not Found",[i.StatusCode.InternalServerError]:"Internal Server Error"};t.process=function(e,t){return function(r){var{rawBody:u}=r,p=n.__rest(r,["rawBody"]);return n.__awaiter(this,void 0,void 0,function*(){let r={statusCode:i.StatusCode.Ok,statusText:d[i.StatusCode.Ok],headers:{}};yield(0,s.logger)(e).info("Receiving webhook request");let f=yield(0,c.validateFactory)(e)(Object.assign({rawBody:u},p)),h="Unknown error while handling webhook";if(f.valid){let c=yield function(e,t,r,o){return n.__awaiter(this,void 0,void 0,function*(){let c=(0,s.logger)(e),{hmac:d,valid:u}=r,p=n.__rest(r,["hmac","valid"]);yield c.debug("Webhook request is valid, looking for HTTP handlers to call",p);let f=t[r.topic]||[],h={statusCode:i.StatusCode.Ok},m=!1;for(let e of f)if(e.deliveryMethod===l.DeliveryMethod.Http){if(!e.callback)throw h.statusCode=i.StatusCode.InternalServerError,h.errorMessage="Cannot call webhooks.process with a webhook handler that doesn't have a callback",new a.MissingWebhookCallbackError({message:h.errorMessage,response:h});m=!0,yield c.debug("Found HTTP handler, triggering it",p);try{yield e.callback(r.topic,r.domain,o,r.webhookId,r.apiVersion)}catch(e){h.statusCode=i.StatusCode.InternalServerError,h.errorMessage=e.message}}return m||(yield c.debug("No HTTP handlers found",p),h.statusCode=i.StatusCode.NotFound,h.errorMessage=`No HTTP webhooks registered for topic ${r.topic}`),h})}(e,t,f,u);r.statusCode=c.statusCode,(0,o.isOK)(r)||(h=c.errorMessage||h)}else{let t=yield function(e,t){return n.__awaiter(this,void 0,void 0,function*(){let r={statusCode:i.StatusCode.InternalServerError,errorMessage:"Unknown error while handling webhook"};switch(t.reason){case l.WebhookValidationErrorReason.MissingHeaders:r.statusCode=i.StatusCode.BadRequest,r.errorMessage=`Missing one or more of the required HTTP headers to process webhooks: [${t.missingHeaders.join(", ")}]`;break;case l.WebhookValidationErrorReason.MissingBody:r.statusCode=i.StatusCode.BadRequest,r.errorMessage="No body was received when processing webhook";break;case l.WebhookValidationErrorReason.InvalidHmac:r.statusCode=i.StatusCode.Unauthorized,r.errorMessage="Could not validate request HMAC"}return yield(0,s.logger)(e).debug(`Webhook request is invalid, returning ${r.statusCode}: ${r.errorMessage}`),r})}(e,f);r.statusCode=t.statusCode,r.statusText=d[r.statusCode],h=t.errorMessage}let m=yield(0,o.abstractConvertResponse)(r,p);if(!(0,o.isOK)(r))throw new a.InvalidWebhookError({message:h,response:m});return Promise.resolve(m)})}}},2982:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryTemplate=void 0,t.queryTemplate=function(e,t){let r=e;return Object.entries(t).forEach(([e,t])=>{r=r.replace(`{{${e}}}`,t)}),r}},7757:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TEMPLATE_MUTATION=t.TEMPLATE_GET_HANDLERS=t.register=void 0;let n=r(1222),i=r(194),o=r(3516),a=r(7644),s=r(2451),l=r(6003),c=r(2982),d=r(4308);function u(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function p({config:e,client:r,topic:i,handlers:s,operation:u}){return n.__awaiter(this,void 0,void 0,function*(){let p=[];for(let h of s)p.push((yield function({config:e,client:r,topic:i,handler:s,operation:u}){return n.__awaiter(this,void 0,void 0,function*(){let n;(0,a.logger)(e).debug("Running webhook mutation",{topic:i,operation:u});try{let a=function(e,r,n,i){let a;let s={};a=n.id?`id: "${n.id}"`:`topic: ${r}`;let u={MUTATION_NAME:f(n,i),IDENTIFIER:a,MUTATION_PARAMS:""};if(i!==d.WebhookOperation.Delete){switch(n.deliveryMethod){case d.DeliveryMethod.Http:s.callbackUrl=`"${(0,l.addHostToCallbackUrl)(e,n.callbackUrl)}"`;break;case d.DeliveryMethod.EventBridge:s.arn=`"${n.arn}"`;break;case d.DeliveryMethod.PubSub:s.pubSubProject=`"${n.pubSubProject}"`,s.pubSubTopic=`"${n.pubSubTopic}"`;break;default:throw new o.InvalidDeliveryMethodError(`Unrecognized delivery method '${n.deliveryMethod}'`)}n.includeFields&&(s.includeFields=JSON.stringify(n.includeFields)),n.metafieldNamespaces&&(s.metafieldNamespaces=JSON.stringify(n.metafieldNamespaces));let t=Object.entries(s).map(([e,t])=>`${e}: ${t}`).join(", ");u.MUTATION_PARAMS=`webhookSubscription: {${t}}`}return(0,c.queryTemplate)(t.TEMPLATE_MUTATION,u)}(e,i,s,u),p=yield r.request(a);n={deliveryMethod:s.deliveryMethod,success:function(e,t,r){let n=f(t,r);return!!(e.data&&e.data[n]&&0===e.data[n].userErrors.length)}(p,s,u),result:p,operation:u}}catch(e){if(e instanceof o.InvalidDeliveryMethodError)n={deliveryMethod:s.deliveryMethod,success:!1,result:{message:e.message},operation:u};else throw e}return n})}({config:e,client:r,topic:i,handler:h,operation:u})));return p})}function f(e,t){switch(t){case d.WebhookOperation.Create:return`${h(e)}Create`;case d.WebhookOperation.Update:return`${h(e)}Update`;case d.WebhookOperation.Delete:return"webhookSubscriptionDelete";default:throw new o.ShopifyError(`Unrecognized operation '${t}'`)}}function h(e){switch(e.deliveryMethod){case d.DeliveryMethod.Http:return"webhookSubscription";case d.DeliveryMethod.EventBridge:return"eventBridgeWebhookSubscription";case d.DeliveryMethod.PubSub:return"pubSubWebhookSubscription";default:throw new o.ShopifyError(`Unrecognized delivery method '${e.deliveryMethod}'`)}}t.register=function(e,r){return function({session:o}){return n.__awaiter(this,void 0,void 0,function*(){let f=(0,a.logger)(e);f.info("Registering webhooks",{shop:o.shop});let h=Object.keys(r).reduce((e,t)=>(e[t]=[],e),{}),m=yield function(e,r){var o,a,s,l,u,p;return n.__awaiter(this,void 0,void 0,function*(){let f;let h=new((0,i.graphqlClientClass)({config:e}))({session:r}),m={},y=null;do{var g;let e=(g=y,(0,c.queryTemplate)(t.TEMPLATE_GET_HANDLERS,{END_CURSOR:JSON.stringify(g)})),r=yield h.request(e);null===(a=null===(o=r.data)||void 0===o?void 0:o.webhookSubscriptions)||void 0===a||a.edges.forEach(e=>{let t=function(e){var t,r;let i;let o=e.node.endpoint;switch(o.__typename){case"WebhookHttpEndpoint":i={deliveryMethod:d.DeliveryMethod.Http,callbackUrl:o.callbackUrl,callback:()=>n.__awaiter(this,void 0,void 0,function*(){})};break;case"WebhookEventBridgeEndpoint":i={deliveryMethod:d.DeliveryMethod.EventBridge,arn:o.arn};break;case"WebhookPubSubEndpoint":i={deliveryMethod:d.DeliveryMethod.PubSub,pubSubProject:o.pubSubProject,pubSubTopic:o.pubSubTopic}}return i.id=e.node.id,i.includeFields=e.node.includeFields,i.metafieldNamespaces=e.node.metafieldNamespaces,null===(t=i.includeFields)||void 0===t||t.sort(),null===(r=i.metafieldNamespaces)||void 0===r||r.sort(),i}(e);m[e.node.topic]||(m[e.node.topic]=[]),m[e.node.topic].push(t)}),y=null===(l=null===(s=r.data)||void 0===s?void 0:s.webhookSubscriptions)||void 0===l?void 0:l.pageInfo.endCursor,f=null===(p=null===(u=r.data)||void 0===u?void 0:u.webhookSubscriptions)||void 0===p?void 0:p.pageInfo.hasNextPage}while(f);return m})}(e,o);for(let t in f.debug(`Existing topics: [${Object.keys(m).join(", ")}]`,{shop:o.shop}),r)!Object.prototype.hasOwnProperty.call(r,t)||s.privacyTopics.includes(t)||(h[t]=yield function({config:e,session:t,topic:r,existingHandlers:o,handlers:a}){return n.__awaiter(this,void 0,void 0,function*(){let n=[],{toCreate:s,toUpdate:c,toDelete:f}=function(e,t,r){let n=r.reduce((t,r)=>(t[(0,l.handlerIdentifier)(e,r)]=r,t),{}),i=t.reduce((t,r)=>(t[(0,l.handlerIdentifier)(e,r)]=r,t),{}),o=Object.assign({},n),a={},s={};for(let e in i){if(!Object.prototype.hasOwnProperty.call(i,e))continue;let t=i[e],r=n[e];e in n?(delete o[e],!function(e,t){let r=u(e.includeFields||[],t.includeFields||[]),n=u(e.metafieldNamespaces||[],t.metafieldNamespaces||[]);return r&&n}(t,r)&&(a[e]=r,a[e].id=t.id)):s[e]=t}return{toCreate:Object.values(o),toUpdate:Object.values(a),toDelete:Object.values(s)}}(e,o,a),h=new((0,i.graphqlClientClass)({config:e}))({session:t}),m=d.WebhookOperation.Create;return n=n.concat((yield p({config:e,client:h,topic:r,operation:m,handlers:s}))),m=d.WebhookOperation.Update,n=n.concat((yield p({config:e,client:h,topic:r,operation:m,handlers:c}))),m=d.WebhookOperation.Delete,n=n.concat((yield p({config:e,client:h,topic:r,operation:m,handlers:f})))})}({config:e,session:o,topic:t,existingHandlers:m[t]||[],handlers:(0,l.getHandlers)(r)(t)}),delete m[t]);for(let t in m){if(!Object.prototype.hasOwnProperty.call(m,t))continue;let r=new((0,i.graphqlClientClass)({config:e}))({session:o});h[t]=yield p({config:e,client:r,topic:t,handlers:m[t],operation:d.WebhookOperation.Delete})}return h})}},t.TEMPLATE_GET_HANDLERS=`query shopifyApiReadWebhookSubscriptions {
  webhookSubscriptions(
    first: 250,
    after: {{END_CURSOR}},
  ) {
    edges {
      node {
        id
        topic
        includeFields
        metafieldNamespaces
        endpoint {
          __typename
          ... on WebhookHttpEndpoint {
            callbackUrl
          }
          ... on WebhookEventBridgeEndpoint {
            arn
          }
          ... on WebhookPubSubEndpoint {
            pubSubProject
            pubSubTopic
          }
        }
      }
    }
    pageInfo {
      endCursor
      hasNextPage
    }
  }
}`,t.TEMPLATE_MUTATION=`
  mutation shopifyApiCreateWebhookSubscription {
    {{MUTATION_NAME}}(
      {{IDENTIFIER}},
      {{MUTATION_PARAMS}}
    ) {
      userErrors {
        field
        message
      }
    }
  }
`},6003:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addHostToCallbackUrl=t.handlerIdentifier=t.getHandlers=t.getTopicsAdded=t.addHandlers=t.topicForStorage=t.registry=void 0;let n=r(3516),i=r(7644),o=r(4308);function a(e){return e.toUpperCase().replace(/\/|\./g,"_")}function s(e,t){let r=t.deliveryMethod;switch(t.deliveryMethod){case o.DeliveryMethod.Http:return`${r}_${l(e,t.callbackUrl)}`;case o.DeliveryMethod.EventBridge:return`${r}_${t.arn}`;case o.DeliveryMethod.PubSub:return`${r}_${t.pubSubProject}:${t.pubSubTopic}`;default:throw new n.InvalidDeliveryMethodError(`Unrecognized delivery method '${t.deliveryMethod}'`)}}function l(e,t){return t.startsWith("/")?`${e.hostScheme}://${e.hostName}${t}`:t}function c(e,t,r,a){var l,c;let d=(0,i.logger)(e);if(null===(l=a.includeFields)||void 0===l||l.sort(),null===(c=a.metafieldNamespaces)||void 0===c||c.sort(),!(r in t)){t[r]=[a];return}let u=s(e,a);for(let i in t[r])if(Object.prototype.hasOwnProperty.call(t[r],i)&&u===s(e,t[r][i])){if(a.deliveryMethod===o.DeliveryMethod.Http){d.info(`Detected multiple handlers for '${r}', webhooks.process will call them sequentially`);break}throw new n.InvalidDeliveryMethodError(`Can only add multiple handlers when deliveryMethod is Http. Invalid handler: ${JSON.stringify(a)}`)}t[r].push(a)}t.registry=function(){return{}},t.topicForStorage=a,t.addHandlers=function(e,t){return function(r){for(let[n,i]of Object.entries(r)){let r=a(n);if(Array.isArray(i))for(let n of i)c(e,t,r,n);else c(e,t,r,i)}}},t.getTopicsAdded=function(e){return function(){return Object.keys(e)}},t.getHandlers=function(e){return function(t){return e[a(t)]||[]}},t.handlerIdentifier=s,t.addHostToCallbackUrl=l},4308:(e,t)=>{"use strict";var r,n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.WebhookValidationErrorReason=t.WebhookOperation=t.DeliveryMethod=void 0,function(e){e.Http="http",e.EventBridge="eventbridge",e.PubSub="pubsub"}(r||(t.DeliveryMethod=r={})),function(e){e.Create="create",e.Update="update",e.Delete="delete"}(n||(t.WebhookOperation=n={})),function(e){e.MissingHeaders="missing_headers",e.MissingBody="missing_body",e.InvalidHmac="invalid_hmac"}(i||(t.WebhookValidationErrorReason=i={}))},2177:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateFactory=void 0;let n=r(1222),i=r(4965),o=r(773),a=r(6075),s=r(2451),l=r(3905),c=r(7644),d=r(4308),u=r(6003),p={apiVersion:s.ShopifyHeader.ApiVersion,domain:s.ShopifyHeader.Domain,hmac:s.ShopifyHeader.Hmac,topic:s.ShopifyHeader.Topic,webhookId:s.ShopifyHeader.WebhookId};t.validateFactory=function(e){return function(t){var{rawBody:r}=t,s=n.__rest(t,["rawBody"]);return n.__awaiter(this,void 0,void 0,function*(){let t=yield(0,i.abstractConvertRequest)(s),f=(0,c.logger)(e),h=function(e,t){if(!e.length)return{valid:!1,reason:d.WebhookValidationErrorReason.MissingBody};let r=[],n=Object.entries(p).reduce((e,[n,o])=>{let a=(0,i.getHeader)(t,o);return a?e[n]=a:r.push(o),e},{});return r.length?{valid:!1,reason:d.WebhookValidationErrorReason.MissingHeaders,missingHeaders:r}:Object.assign(Object.assign({valid:!0},n),{topic:(0,u.topicForStorage)(n.topic)})}(r,t.headers);if(!h.valid)return yield f.debug("Received malformed webhook request",h),h;let{hmac:m,valid:y}=h,g=n.__rest(h,["hmac","valid"]);return(yield f.debug("Webhook request is well formed",g),yield function(e,t,r){return n.__awaiter(this,void 0,void 0,function*(){let n=yield(0,o.createSHA256HMAC)(e,t,a.HashFormat.Base64);return(0,l.safeCompare)(n,r)})}(e.apiSecretKey,r,m))?(yield f.debug("Webhook request is valid",g),h):(yield f.debug("Webhook HMAC validation failed. Please note that events manually triggered from a store's Notifications settings will fail this validation. To test this, please use the CLI or trigger the actual event in a development store."),{valid:!1,reason:d.WebhookValidationErrorReason.InvalidHmac})})}}},3159:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadRestResources=void 0;let n=r(7644);t.loadRestResources=function({resources:e,config:t,RestClient:r}){let i=Object.keys(e)[0];return t.apiVersion!==e[i].apiVersion&&(0,n.logger)(t).warning(`Loading REST resources for API version ${e[i].apiVersion}, which doesn't match the default ${t.apiVersion}`),Object.fromEntries(Object.entries(e).map(([e,n])=>{class i extends n{}return i.setClassProperties({Client:r,config:t}),Object.entries(i.hasOne).map(([e,n])=>{n.setClassProperties({Client:r,config:t})}),Object.entries(i.hasMany).map(([e,n])=>{n.setClassProperties({Client:r,config:t})}),Reflect.defineProperty(i,"name",{value:e}),[e,i]}))}},477:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1828:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=t.setCrypto=void 0;try{t.crypto=crypto}catch(e){}t.setCrypto=function(e){t.crypto=e}},773:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(1222);n.__exportStar(r(6075),t),n.__exportStar(r(1828),t),n.__exportStar(r(3563),t)},6075:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.HashFormat=void 0,function(e){e.Base64="base64",e.Hex="hex"}(r||(t.HashFormat=r={}))},3563:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hashString=t.asBase64=t.asHex=t.createSHA256HMAC=void 0;let n=r(1222),i=r(3516),o=r(1828),a=r(6075);function s(e){return[...new Uint8Array(e)].map(e=>e.toString(16).padStart(2,"0")).join("")}t.createSHA256HMAC=function(e,t,r=a.HashFormat.Base64){return n.__awaiter(this,void 0,void 0,function*(){let n=void 0===(null===o.crypto||void 0===o.crypto?void 0:o.crypto.webcrypto)?o.crypto:o.crypto.webcrypto,i=new TextEncoder,l=yield n.subtle.importKey("raw",i.encode(e),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),d=yield n.subtle.sign("HMAC",l,i.encode(t));return r===a.HashFormat.Base64?c(d):s(d)})},t.asHex=s;let l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function c(e){let t="",r=new Uint8Array(e);for(let e=0;e<r.length;){let n=r[e++],i=r[e++],o=r[e++],a=n>>2,s=(3&n)<<4|i>>4,c=(15&i)<<2|o>>6,d=63&o;isNaN(i)&&(c=64),isNaN(o)&&(d=64),t+=l[a]+l[s]+l[c]+l[d]}return t}t.asBase64=c,t.hashString=function(e,t){let r=new TextEncoder().encode(e);switch(t){case a.HashFormat.Base64:return c(r);case a.HashFormat.Hex:return s(r);default:throw new i.ShopifyError(`Unrecognized hash format '${t}'`)}}},4437:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cookies=void 0;let n=r(1222),i=r(3563),o=r(1079),a=r(1566);class s{static parseCookies(e){let t=Object.fromEntries(e.filter(e=>e.trim().length>0).map(e=>{let[t,...r]=e.split(";"),[n,i]=(0,o.splitN)(t,"=",2).map(e=>e.trim());return[n,Object.assign({name:n,value:i},Object.fromEntries(r.map(e=>(0,o.splitN)(e,"=",2).map(e=>e.trim()))))]}));for(let e of Object.values(t))"string"==typeof e.expires&&(e.expires=new Date(e.expires));return t}static encodeCookie(e){let t="";return t+=`${e.name}=${e.value};`+Object.entries(e).filter(([e])=>!["name","value","expires"].includes(e)).map(([e,t])=>`${e}=${t}`).join("; "),e.expires&&(t+=`;expires=${e.expires.toUTCString()}`),t}constructor(e,t,{keys:r=[]}={}){var n,i;this.response=t,this.receivedCookieJar={},this.outgoingCookieJar={},this.keys=[],r&&(this.keys=r);let o=null!==(n=(0,a.getHeader)(e.headers,"Cookie"))&&void 0!==n?n:"";this.receivedCookieJar=s.parseCookies(o.split(";"));let l=null!==(i=(0,a.getHeaders)(t.headers,"Set-Cookie"))&&void 0!==i?i:[];this.outgoingCookieJar=s.parseCookies(l)}toHeaders(){return Object.values(this.outgoingCookieJar).map(e=>s.encodeCookie(e))}updateHeader(){this.response.headers||(this.response.headers={}),(0,a.removeHeader)(this.response.headers,"Set-Cookie"),this.toHeaders().map(e=>(0,a.addHeader)(this.response.headers,"Set-Cookie",e))}get(e){var t;return null===(t=this.receivedCookieJar[e])||void 0===t?void 0:t.value}deleteCookie(e){this.set(e,"",{path:"/",expires:new Date(0)})}getAndVerify(e){return n.__awaiter(this,void 0,void 0,function*(){let t=this.get(e);if(t){if(!(yield this.isSignedCookieValid(e)))return;return t}})}get canSign(){var e;return(null===(e=this.keys)||void 0===e?void 0:e.length)>0}set(e,t,r={}){this.outgoingCookieJar[e]=Object.assign(Object.assign({},r),{name:e,value:t}),this.updateHeader()}setAndSign(e,t,r={}){return n.__awaiter(this,void 0,void 0,function*(){if(!this.canSign)throw Error("No keys provided for signing.");this.set(e,t,r);let n=`${e}.sig`,o=yield(0,i.createSHA256HMAC)(this.keys[0],t);this.set(n,o,r),this.updateHeader()})}isSignedCookieValid(e){return n.__awaiter(this,void 0,void 0,function*(){let t=`${e}.sig`;if(!this.get(e)||!this.get(t))return this.deleteCookie(t),this.deleteCookie(e),!1;let r=this.get(e),n=this.get(t);return!!(yield Promise.all(this.keys.map(e=>(0,i.createSHA256HMAC)(e,r)))).includes(n)||(this.deleteCookie(t),this.deleteCookie(e),!1)})}}t.Cookies=s},1566:(e,t)=>{"use strict";function r(e){return e.replace(/(^|-)(\w+)/g,(e,t,r)=>t+r.slice(0,1).toUpperCase()+r.slice(1).toLowerCase())}function n(e,t){let n=[];if(!e)return n;let i=r(t);for(let[t,o]of Object.entries(e))r(t)===i&&(Array.isArray(o)?n.push(...o):n.push(o));return n}function i(e){return"number"==typeof e?e.toString():e}function o(e){for(let[t,n]of Object.entries(e)){let o=r(t);e[o]||(e[o]=[]),Array.isArray(e[o])||(e[o]=[i(e[o])]),t!==o&&(delete e[t],e[o].push(...[n].flat().map(e=>i(e))))}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.flatHeaders=t.removeHeader=t.canonicalizeHeaders=t.addHeader=t.setHeader=t.getHeader=t.getHeaders=t.canonicalizeHeaderName=void 0,t.canonicalizeHeaderName=r,t.getHeaders=n,t.getHeader=function(e,t){var r;if(e)return null===(r=n(e,t))||void 0===r?void 0:r[0]},t.setHeader=function(e,t,n){o(e),e[r(t)]=[n]},t.addHeader=function(e,t,n){o(e);let i=r(t),a=e[i];a?Array.isArray(a)||(a=[a]):a=[],e[i]=a,a.push(n)},t.canonicalizeHeaders=o,t.removeHeader=function(e,t){o(e);let n=r(t);delete e[n]},t.flatHeaders=function(e){return Object.entries(e).flatMap(([e,t])=>Array.isArray(t)?t.map(t=>[e,t]):[[e,t]])}},4965:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setAbstractConvertHeadersFunc=t.abstractConvertHeaders=t.setAbstractConvertResponseFunc=t.abstractConvertResponse=t.setAbstractConvertIncomingResponseFunc=t.abstractConvertIncomingResponse=t.setAbstractConvertRequestFunc=t.abstractConvertRequest=t.setAbstractFetchFunc=t.abstractFetch=t.isOK=void 0;let n=r(1222);n.__exportStar(r(4437),t),n.__exportStar(r(1566),t),n.__exportStar(r(1079),t),n.__exportStar(r(1906),t),t.isOK=function(e){return e.statusCode>=200&&e.statusCode<=299},t.abstractFetch=()=>{throw Error("Missing adapter implementation for 'abstractFetch' - make sure to import the appropriate adapter for your platform")},t.setAbstractFetchFunc=function(e){t.abstractFetch=e},t.abstractConvertRequest=()=>{throw Error("Missing adapter implementation for 'abstractConvertRequest' - make sure to import the appropriate adapter for your platform")},t.setAbstractConvertRequestFunc=function(e){t.abstractConvertRequest=e},t.abstractConvertIncomingResponse=()=>Promise.resolve({}),t.setAbstractConvertIncomingResponseFunc=function(e){t.abstractConvertIncomingResponse=e},t.abstractConvertResponse=()=>{throw Error("Missing adapter implementation for 'abstractConvertResponse' - make sure to import the appropriate adapter for your platform")},t.setAbstractConvertResponseFunc=function(e){t.abstractConvertResponse=e},t.abstractConvertHeaders=()=>{throw Error("Missing adapter implementation for 'abstractConvertHeaders' - make sure to import the appropriate adapter for your platform")},t.setAbstractConvertHeadersFunc=function(e){t.abstractConvertHeaders=e}},1906:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1079:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitN=void 0,t.splitN=function(e,t,r){let n=e.split(t),i=Math.min(Math.abs(r),n.length);return[...n.slice(0,i-1),n.slice(i-1).join(t)]}},5226:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(1222);n.__exportStar(r(4965),t),n.__exportStar(r(773),t),n.__exportStar(r(1249),t)},1249:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(1222);n.__exportStar(r(3717),t),n.__exportStar(r(1396),t)},1396:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setAbstractRuntimeString=t.abstractRuntimeString=void 0,t.abstractRuntimeString=()=>{throw Error("Missing adapter implementation for 'abstractRuntimeString' - make sure to import the appropriate adapter for your platform")},t.setAbstractRuntimeString=function(e){t.abstractRuntimeString=e}},3717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4696:(e,t,r)=>{"use strict";r.r(t),r.d(t,{compare:()=>o,compareVersions:()=>n,satisfies:()=>a,validate:()=>i});let n=(e,t)=>{let r=l(e),n=l(t),i=r.pop(),o=n.pop(),a=f(r,n);return 0!==a?a:i&&o?f(i.split("."),o.split(".")):i||o?i?-1:1:0},i=e=>"string"==typeof e&&/^[v\d]/.test(e)&&s.test(e),o=(e,t,r)=>{y(r);let i=n(e,t);return h[r].includes(i)},a=(e,t)=>{let r=t.match(/^([<>=~^]+)/),n=r?r[1]:"=";if("^"!==n&&"~"!==n)return o(e,t,n);let[i,a,s,,c]=l(e),[d,u,p,,h]=l(t),m=[i,a,s],y=[d,null!=u?u:"x",null!=p?p:"x"];if(h&&(!c||0!==f(m,y)||-1===f(c.split("."),h.split("."))))return!1;let g=y.findIndex(e=>"0"!==e)+1,v="~"===n?2:g>1?g:1;return 0===f(m.slice(0,v),y.slice(0,v))&&-1!==f(m.slice(v),y.slice(v))},s=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,l=e=>{if("string"!=typeof e)throw TypeError("Invalid argument expected string");let t=e.match(s);if(!t)throw Error(`Invalid argument not valid semver ('${e}' received)`);return t.shift(),t},c=e=>"*"===e||"x"===e||"X"===e,d=e=>{let t=parseInt(e,10);return isNaN(t)?e:t},u=(e,t)=>typeof e!=typeof t?[String(e),String(t)]:[e,t],p=(e,t)=>{if(c(e)||c(t))return 0;let[r,n]=u(d(e),d(t));return r>n?1:r<n?-1:0},f=(e,t)=>{for(let r=0;r<Math.max(e.length,t.length);r++){let n=p(e[r]||"0",t[r]||"0");if(0!==n)return n}return 0},h={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]},m=Object.keys(h),y=e=>{if("string"!=typeof e)throw TypeError(`Invalid operator type, expected string but got ${typeof e}`);if(-1===m.indexOf(e))throw Error(`Invalid operator, expected one of ${m.join("|")}`)}},418:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cryptoRuntime=t.base64url=t.generateSecret=t.generateKeyPair=t.errors=t.decodeJwt=t.decodeProtectedHeader=t.importJWK=t.importX509=t.importPKCS8=t.importSPKI=t.exportJWK=t.exportSPKI=t.exportPKCS8=t.UnsecuredJWT=t.createRemoteJWKSet=t.createLocalJWKSet=t.EmbeddedJWK=t.calculateJwkThumbprintUri=t.calculateJwkThumbprint=t.EncryptJWT=t.SignJWT=t.GeneralSign=t.FlattenedSign=t.CompactSign=t.FlattenedEncrypt=t.CompactEncrypt=t.jwtDecrypt=t.jwtVerify=t.generalVerify=t.flattenedVerify=t.compactVerify=t.GeneralEncrypt=t.generalDecrypt=t.flattenedDecrypt=t.compactDecrypt=void 0;var n=r(926);Object.defineProperty(t,"compactDecrypt",{enumerable:!0,get:function(){return n.compactDecrypt}});var i=r(7518);Object.defineProperty(t,"flattenedDecrypt",{enumerable:!0,get:function(){return i.flattenedDecrypt}});var o=r(466);Object.defineProperty(t,"generalDecrypt",{enumerable:!0,get:function(){return o.generalDecrypt}});var a=r(8195);Object.defineProperty(t,"GeneralEncrypt",{enumerable:!0,get:function(){return a.GeneralEncrypt}});var s=r(993);Object.defineProperty(t,"compactVerify",{enumerable:!0,get:function(){return s.compactVerify}});var l=r(769);Object.defineProperty(t,"flattenedVerify",{enumerable:!0,get:function(){return l.flattenedVerify}});var c=r(3497);Object.defineProperty(t,"generalVerify",{enumerable:!0,get:function(){return c.generalVerify}});var d=r(4464);Object.defineProperty(t,"jwtVerify",{enumerable:!0,get:function(){return d.jwtVerify}});var u=r(3496);Object.defineProperty(t,"jwtDecrypt",{enumerable:!0,get:function(){return u.jwtDecrypt}});var p=r(5441);Object.defineProperty(t,"CompactEncrypt",{enumerable:!0,get:function(){return p.CompactEncrypt}});var f=r(3759);Object.defineProperty(t,"FlattenedEncrypt",{enumerable:!0,get:function(){return f.FlattenedEncrypt}});var h=r(616);Object.defineProperty(t,"CompactSign",{enumerable:!0,get:function(){return h.CompactSign}});var m=r(4389);Object.defineProperty(t,"FlattenedSign",{enumerable:!0,get:function(){return m.FlattenedSign}});var y=r(7248);Object.defineProperty(t,"GeneralSign",{enumerable:!0,get:function(){return y.GeneralSign}});var g=r(2888);Object.defineProperty(t,"SignJWT",{enumerable:!0,get:function(){return g.SignJWT}});var v=r(3347);Object.defineProperty(t,"EncryptJWT",{enumerable:!0,get:function(){return v.EncryptJWT}});var b=r(8482);Object.defineProperty(t,"calculateJwkThumbprint",{enumerable:!0,get:function(){return b.calculateJwkThumbprint}}),Object.defineProperty(t,"calculateJwkThumbprintUri",{enumerable:!0,get:function(){return b.calculateJwkThumbprintUri}});var E=r(4744);Object.defineProperty(t,"EmbeddedJWK",{enumerable:!0,get:function(){return E.EmbeddedJWK}});var w=r(4570);Object.defineProperty(t,"createLocalJWKSet",{enumerable:!0,get:function(){return w.createLocalJWKSet}});var S=r(2108);Object.defineProperty(t,"createRemoteJWKSet",{enumerable:!0,get:function(){return S.createRemoteJWKSet}});var _=r(5453);Object.defineProperty(t,"UnsecuredJWT",{enumerable:!0,get:function(){return _.UnsecuredJWT}});var P=r(8432);Object.defineProperty(t,"exportPKCS8",{enumerable:!0,get:function(){return P.exportPKCS8}}),Object.defineProperty(t,"exportSPKI",{enumerable:!0,get:function(){return P.exportSPKI}}),Object.defineProperty(t,"exportJWK",{enumerable:!0,get:function(){return P.exportJWK}});var C=r(3780);Object.defineProperty(t,"importSPKI",{enumerable:!0,get:function(){return C.importSPKI}}),Object.defineProperty(t,"importPKCS8",{enumerable:!0,get:function(){return C.importPKCS8}}),Object.defineProperty(t,"importX509",{enumerable:!0,get:function(){return C.importX509}}),Object.defineProperty(t,"importJWK",{enumerable:!0,get:function(){return C.importJWK}});var x=r(8353);Object.defineProperty(t,"decodeProtectedHeader",{enumerable:!0,get:function(){return x.decodeProtectedHeader}});var A=r(6919);Object.defineProperty(t,"decodeJwt",{enumerable:!0,get:function(){return A.decodeJwt}}),t.errors=r(9859);var k=r(5617);Object.defineProperty(t,"generateKeyPair",{enumerable:!0,get:function(){return k.generateKeyPair}});var T=r(6489);Object.defineProperty(t,"generateSecret",{enumerable:!0,get:function(){return T.generateSecret}}),t.base64url=r(4349);var O=r(1376);Object.defineProperty(t,"cryptoRuntime",{enumerable:!0,get:function(){return O.default}})},926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compactDecrypt=void 0;let n=r(7518),i=r(9859),o=r(2332);async function a(e,t,r){if(e instanceof Uint8Array&&(e=o.decoder.decode(e)),"string"!=typeof e)throw new i.JWEInvalid("Compact JWE must be a string or Uint8Array");let{0:a,1:s,2:l,3:c,4:d,length:u}=e.split(".");if(5!==u)throw new i.JWEInvalid("Invalid Compact JWE");let p=await (0,n.flattenedDecrypt)({ciphertext:c,iv:l||void 0,protected:a||void 0,tag:d||void 0,encrypted_key:s||void 0},t,r),f={plaintext:p.plaintext,protectedHeader:p.protectedHeader};return"function"==typeof t?{...f,key:p.key}:f}t.compactDecrypt=a},5441:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactEncrypt=void 0;let n=r(3759);class i{constructor(e){this._flattened=new n.FlattenedEncrypt(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this._flattened.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}t.CompactEncrypt=i},7518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenedDecrypt=void 0;let n=r(653),i=r(1003),o=r(738),a=r(9859),s=r(3417),l=r(4955),c=r(973),d=r(2332),u=r(5060),p=r(4417),f=r(507);async function h(e,t,r){var h;let m,y,g,v,b,E,w;if(!(0,l.default)(e))throw new a.JWEInvalid("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new a.JWEInvalid("JOSE Header missing");if("string"!=typeof e.iv)throw new a.JWEInvalid("JWE Initialization Vector missing or incorrect type");if("string"!=typeof e.ciphertext)throw new a.JWEInvalid("JWE Ciphertext missing or incorrect type");if("string"!=typeof e.tag)throw new a.JWEInvalid("JWE Authentication Tag missing or incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new a.JWEInvalid("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new a.JWEInvalid("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new a.JWEInvalid("JWE AAD incorrect type");if(void 0!==e.header&&!(0,l.default)(e.header))throw new a.JWEInvalid("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!(0,l.default)(e.unprotected))throw new a.JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=(0,n.decode)(e.protected);m=JSON.parse(d.decoder.decode(t))}catch{throw new a.JWEInvalid("JWE Protected Header is invalid")}if(!(0,s.default)(m,e.header,e.unprotected))throw new a.JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let S={...m,...e.header,...e.unprotected};if((0,p.default)(a.JWEInvalid,new Map,null==r?void 0:r.crit,m,S),void 0!==S.zip){if(!m||!m.zip)throw new a.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==S.zip)throw new a.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:_,enc:P}=S;if("string"!=typeof _||!_)throw new a.JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof P||!P)throw new a.JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");let C=r&&(0,f.default)("keyManagementAlgorithms",r.keyManagementAlgorithms),x=r&&(0,f.default)("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(C&&!C.has(_))throw new a.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(x&&!x.has(P))throw new a.JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter not allowed');if(void 0!==e.encrypted_key)try{y=(0,n.decode)(e.encrypted_key)}catch{throw new a.JWEInvalid("Failed to base64url decode the encrypted_key")}let A=!1;"function"==typeof t&&(t=await t(m,e),A=!0);try{g=await (0,c.default)(_,t,y,S,r)}catch(e){if(e instanceof TypeError||e instanceof a.JWEInvalid||e instanceof a.JOSENotSupported)throw e;g=(0,u.default)(P)}try{v=(0,n.decode)(e.iv)}catch{throw new a.JWEInvalid("Failed to base64url decode the iv")}try{b=(0,n.decode)(e.tag)}catch{throw new a.JWEInvalid("Failed to base64url decode the tag")}let k=d.encoder.encode(null!==(h=e.protected)&&void 0!==h?h:"");E=void 0!==e.aad?(0,d.concat)(k,d.encoder.encode("."),d.encoder.encode(e.aad)):k;try{w=(0,n.decode)(e.ciphertext)}catch{throw new a.JWEInvalid("Failed to base64url decode the ciphertext")}let T=await (0,i.default)(P,g,w,v,b,E);"DEF"===S.zip&&(T=await ((null==r?void 0:r.inflateRaw)||o.inflate)(T));let O={plaintext:T};if(void 0!==e.protected&&(O.protectedHeader=m),void 0!==e.aad)try{O.additionalAuthenticatedData=(0,n.decode)(e.aad)}catch{throw new a.JWEInvalid("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(O.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(O.unprotectedHeader=e.header),A)?{...O,key:t}:O}t.flattenedDecrypt=h},3759:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlattenedEncrypt=t.unprotected=void 0;let n=r(653),i=r(24),o=r(738),a=r(2149),s=r(5797),l=r(9859),c=r(3417),d=r(2332),u=r(4417);t.unprotected=Symbol();class p{constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,r){let p,f,h,m,y,g,v;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new l.JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,c.default)(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new l.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let b={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if((0,u.default)(l.JWEInvalid,new Map,null==r?void 0:r.crit,this._protectedHeader,b),void 0!==b.zip){if(!this._protectedHeader||!this._protectedHeader.zip)throw new l.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==b.zip)throw new l.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:E,enc:w}=b;if("string"!=typeof E||!E)throw new l.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof w||!w)throw new l.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if("dir"===E){if(this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===E&&this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");{let n;({cek:f,encryptedKey:p,parameters:n}=await (0,s.default)(E,w,e,this._cek,this._keyManagementParameters)),n&&(r&&t.unprotected in r?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...n}:this.setUnprotectedHeader(n):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...n}:this.setProtectedHeader(n))}if(this._iv||(this._iv=(0,a.default)(w)),m=this._protectedHeader?d.encoder.encode((0,n.encode)(JSON.stringify(this._protectedHeader))):d.encoder.encode(""),this._aad?(y=(0,n.encode)(this._aad),h=(0,d.concat)(m,d.encoder.encode("."),d.encoder.encode(y))):h=m,"DEF"===b.zip){let e=await ((null==r?void 0:r.deflateRaw)||o.deflate)(this._plaintext);({ciphertext:g,tag:v}=await (0,i.default)(w,e,f,this._iv,h))}else({ciphertext:g,tag:v}=await (0,i.default)(w,this._plaintext,f,this._iv,h));let S={ciphertext:(0,n.encode)(g),iv:(0,n.encode)(this._iv),tag:(0,n.encode)(v)};return p&&(S.encrypted_key=(0,n.encode)(p)),y&&(S.aad=y),this._protectedHeader&&(S.protected=d.decoder.decode(m)),this._sharedUnprotectedHeader&&(S.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(S.header=this._unprotectedHeader),S}}t.FlattenedEncrypt=p},466:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generalDecrypt=void 0;let n=r(7518),i=r(9859),o=r(4955);async function a(e,t,r){if(!(0,o.default)(e))throw new i.JWEInvalid("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(o.default))throw new i.JWEInvalid("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new i.JWEInvalid("JWE Recipients has no members");for(let i of e.recipients)try{return await (0,n.flattenedDecrypt)({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:i.encrypted_key,header:i.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,r)}catch{}throw new i.JWEDecryptionFailed}t.generalDecrypt=a},8195:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralEncrypt=void 0;let n=r(3759),i=r(9859),o=r(5060),a=r(3417),s=r(5797),l=r(653),c=r(4417);class d{constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setUnprotectedHeader(e){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}}class u{constructor(e){this._recipients=[],this._plaintext=e}addRecipient(e,t){let r=new d(this,e,{crit:null==t?void 0:t.crit});return this._recipients.push(r),r}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(e){var t,r,d;let u;if(!this._recipients.length)throw new i.JWEInvalid("at least one recipient must be added");if(e={deflateRaw:null==e?void 0:e.deflateRaw},1===this._recipients.length){let[t]=this._recipients,r=await new n.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(t.unprotectedHeader).encrypt(t.key,{...t.options,...e}),i={ciphertext:r.ciphertext,iv:r.iv,recipients:[{}],tag:r.tag};return r.aad&&(i.aad=r.aad),r.protected&&(i.protected=r.protected),r.unprotected&&(i.unprotected=r.unprotected),r.encrypted_key&&(i.recipients[0].encrypted_key=r.encrypted_key),r.header&&(i.recipients[0].header=r.header),i}for(let e=0;e<this._recipients.length;e++){let t=this._recipients[e];if(!(0,a.default)(this._protectedHeader,this._unprotectedHeader,t.unprotectedHeader))throw new i.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let r={...this._protectedHeader,...this._unprotectedHeader,...t.unprotectedHeader},{alg:n}=r;if("string"!=typeof n||!n)throw new i.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===n||"ECDH-ES"===n)throw new i.JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof r.enc||!r.enc)throw new i.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(u){if(u!==r.enc)throw new i.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else u=r.enc;if((0,c.default)(i.JWEInvalid,new Map,t.options.crit,this._protectedHeader,r),void 0!==r.zip&&(!this._protectedHeader||!this._protectedHeader.zip))throw new i.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}let p=(0,o.default)(u),f={ciphertext:"",iv:"",recipients:[],tag:""};for(let i=0;i<this._recipients.length;i++){let o=this._recipients[i],a={};f.recipients.push(a);let c=({...this._protectedHeader,...this._unprotectedHeader,...o.unprotectedHeader}).alg.startsWith("PBES2")?2048+i:void 0;if(0===i){let t=await new n.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(p).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(o.unprotectedHeader).setKeyManagementParameters({p2c:c}).encrypt(o.key,{...o.options,...e,[n.unprotected]:!0});f.ciphertext=t.ciphertext,f.iv=t.iv,f.tag=t.tag,t.aad&&(f.aad=t.aad),t.protected&&(f.protected=t.protected),t.unprotected&&(f.unprotected=t.unprotected),a.encrypted_key=t.encrypted_key,t.header&&(a.header=t.header);continue}let{encryptedKey:h,parameters:m}=await (0,s.default)((null===(t=o.unprotectedHeader)||void 0===t?void 0:t.alg)||(null===(r=this._protectedHeader)||void 0===r?void 0:r.alg)||(null===(d=this._unprotectedHeader)||void 0===d?void 0:d.alg),u,o.key,p,{p2c:c});a.encrypted_key=(0,l.encode)(h),(o.unprotectedHeader||m)&&(a.header={...o.unprotectedHeader,...m})}return f}}t.GeneralEncrypt=u},4744:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedJWK=void 0;let n=r(3780),i=r(4955),o=r(9859);async function a(e,t){let r={...e,...null==t?void 0:t.header};if(!(0,i.default)(r.jwk))throw new o.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let a=await (0,n.importJWK)({...r.jwk,ext:!0},r.alg,!0);if(a instanceof Uint8Array||"public"!==a.type)throw new o.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return a}t.EmbeddedJWK=a},8482:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateJwkThumbprintUri=t.calculateJwkThumbprint=void 0;let n=r(7865),i=r(653),o=r(9859),a=r(2332),s=r(4955),l=(e,t)=>{if("string"!=typeof e||!e)throw new o.JWKInvalid(`${t} missing or invalid`)};async function c(e,t){let r;if(!(0,s.default)(e))throw TypeError("JWK must be an object");if(null!=t||(t="sha256"),"sha256"!==t&&"sha384"!==t&&"sha512"!==t)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(e.kty){case"EC":l(e.crv,'"crv" (Curve) Parameter'),l(e.x,'"x" (X Coordinate) Parameter'),l(e.y,'"y" (Y Coordinate) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":l(e.crv,'"crv" (Subtype of Key Pair) Parameter'),l(e.x,'"x" (Public Key) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":l(e.e,'"e" (Exponent) Parameter'),l(e.n,'"n" (Modulus) Parameter'),r={e:e.e,kty:e.kty,n:e.n};break;case"oct":l(e.k,'"k" (Key Value) Parameter'),r={k:e.k,kty:e.kty};break;default:throw new o.JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}let c=a.encoder.encode(JSON.stringify(r));return(0,i.encode)(await (0,n.default)(t,c))}async function d(e,t){null!=t||(t="sha256");let r=await c(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${r}`}t.calculateJwkThumbprint=c,t.calculateJwkThumbprintUri=d},4570:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLocalJWKSet=t.LocalJWKSet=t.isJWKSLike=void 0;let n=r(3780),i=r(9859),o=r(4955);function a(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(s)}function s(e){return(0,o.default)(e)}t.isJWKSLike=a;class l{constructor(e){if(this._cached=new WeakMap,!a(e))throw new i.JWKSInvalid("JSON Web Key Set malformed");this._jwks=function(e){return"function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}(e)}async getKey(e,t){let{alg:r,kid:n}={...e,...null==t?void 0:t.header},o=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new i.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}(r),a=this._jwks.keys.filter(e=>{let t=o===e.kty;if(t&&"string"==typeof n&&(t=n===e.kid),t&&"string"==typeof e.alg&&(t=r===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t&&"EdDSA"===r&&(t="Ed25519"===e.crv||"Ed448"===e.crv),t)switch(r){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv}return t}),{0:s,length:l}=a;if(0===l)throw new i.JWKSNoMatchingKey;if(1!==l){let e=new i.JWKSMultipleMatchingKeys,{_cached:t}=this;throw e[Symbol.asyncIterator]=async function*(){for(let e of a)try{yield await c(t,e,r)}catch{continue}},e}return c(this._cached,s,r)}}async function c(e,t,r){let o=e.get(t)||e.set(t,{}).get(t);if(void 0===o[r]){let e=await (0,n.importJWK)({...t,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new i.JWKSInvalid("JSON Web Key Set members must be public keys");o[r]=e}return o[r]}t.LocalJWKSet=l,t.createLocalJWKSet=function(e){let t=new l(e);return async function(e,r){return t.getKey(e,r)}}},2108:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRemoteJWKSet=void 0;let n=r(185),i=r(9859),o=r(4570);class a extends o.LocalJWKSet{constructor(e,t){if(super({keys:[]}),this._jwks=void 0,!(e instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:null==t?void 0:t.agent,headers:null==t?void 0:t.headers},this._timeoutDuration="number"==typeof(null==t?void 0:t.timeoutDuration)?null==t?void 0:t.timeoutDuration:5e3,this._cooldownDuration="number"==typeof(null==t?void 0:t.cooldownDuration)?null==t?void 0:t.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof(null==t?void 0:t.cacheMaxAge)?null==t?void 0:t.cacheMaxAge:6e5}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(e,t){this._jwks&&this.fresh()||await this.reload();try{return await super.getKey(e,t)}catch(r){if(r instanceof i.JWKSNoMatchingKey&&!1===this.coolingDown())return await this.reload(),super.getKey(e,t);throw r}}async reload(){this._pendingFetch&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=(0,n.default)(this._url,this._timeoutDuration,this._options).then(e=>{if(!(0,o.isJWKSLike)(e))throw new i.JWKSInvalid("JSON Web Key Set malformed");this._jwks={keys:e.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e})),await this._pendingFetch}}t.createRemoteJWKSet=function(e,t){let r=new a(e,t);return async function(e,t){return r.getKey(e,t)}}},616:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactSign=void 0;let n=r(4389);class i{constructor(e){this._flattened=new n.FlattenedSign(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){let r=await this._flattened.sign(e,t);if(void 0===r.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}t.CompactSign=i},993:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compactVerify=void 0;let n=r(769),i=r(9859),o=r(2332);async function a(e,t,r){if(e instanceof Uint8Array&&(e=o.decoder.decode(e)),"string"!=typeof e)throw new i.JWSInvalid("Compact JWS must be a string or Uint8Array");let{0:a,1:s,2:l,length:c}=e.split(".");if(3!==c)throw new i.JWSInvalid("Invalid Compact JWS");let d=await (0,n.flattenedVerify)({payload:s,protected:a,signature:l},t,r),u={payload:d.payload,protectedHeader:d.protectedHeader};return"function"==typeof t?{...u,key:d.key}:u}t.compactVerify=a},4389:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlattenedSign=void 0;let n=r(653),i=r(7334),o=r(3417),a=r(9859),s=r(2332),l=r(796),c=r(4417);class d{constructor(e){if(!(e instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){let r;if(!this._protectedHeader&&!this._unprotectedHeader)throw new a.JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,o.default)(this._protectedHeader,this._unprotectedHeader))throw new a.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let d={...this._protectedHeader,...this._unprotectedHeader},u=(0,c.default)(a.JWSInvalid,new Map([["b64",!0]]),null==t?void 0:t.crit,this._protectedHeader,d),p=!0;if(u.has("b64")&&"boolean"!=typeof(p=this._protectedHeader.b64))throw new a.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:f}=d;if("string"!=typeof f||!f)throw new a.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,l.default)(f,e,"sign");let h=this._payload;p&&(h=s.encoder.encode((0,n.encode)(h))),r=this._protectedHeader?s.encoder.encode((0,n.encode)(JSON.stringify(this._protectedHeader))):s.encoder.encode("");let m=(0,s.concat)(r,s.encoder.encode("."),h),y=await (0,i.default)(f,e,m),g={signature:(0,n.encode)(y),payload:""};return p&&(g.payload=s.decoder.decode(h)),this._unprotectedHeader&&(g.header=this._unprotectedHeader),this._protectedHeader&&(g.protected=s.decoder.decode(r)),g}}t.FlattenedSign=d},769:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenedVerify=void 0;let n=r(653),i=r(8477),o=r(9859),a=r(2332),s=r(3417),l=r(4955),c=r(796),d=r(4417),u=r(507);async function p(e,t,r){var p;let f,h;if(!(0,l.default)(e))throw new o.JWSInvalid("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new o.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new o.JWSInvalid("JWS Protected Header incorrect type");if(void 0===e.payload)throw new o.JWSInvalid("JWS Payload missing");if("string"!=typeof e.signature)throw new o.JWSInvalid("JWS Signature missing or incorrect type");if(void 0!==e.header&&!(0,l.default)(e.header))throw new o.JWSInvalid("JWS Unprotected Header incorrect type");let m={};if(e.protected)try{let t=(0,n.decode)(e.protected);m=JSON.parse(a.decoder.decode(t))}catch{throw new o.JWSInvalid("JWS Protected Header is invalid")}if(!(0,s.default)(m,e.header))throw new o.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let y={...m,...e.header},g=(0,d.default)(o.JWSInvalid,new Map([["b64",!0]]),null==r?void 0:r.crit,m,y),v=!0;if(g.has("b64")&&"boolean"!=typeof(v=m.b64))throw new o.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:b}=y;if("string"!=typeof b||!b)throw new o.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');let E=r&&(0,u.default)("algorithms",r.algorithms);if(E&&!E.has(b))throw new o.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(v){if("string"!=typeof e.payload)throw new o.JWSInvalid("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new o.JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let w=!1;"function"==typeof t&&(t=await t(m,e),w=!0),(0,c.default)(b,t,"verify");let S=(0,a.concat)(a.encoder.encode(null!==(p=e.protected)&&void 0!==p?p:""),a.encoder.encode("."),"string"==typeof e.payload?a.encoder.encode(e.payload):e.payload);try{f=(0,n.decode)(e.signature)}catch{throw new o.JWSInvalid("Failed to base64url decode the signature")}if(!await (0,i.default)(b,t,f,S))throw new o.JWSSignatureVerificationFailed;if(v)try{h=(0,n.decode)(e.payload)}catch{throw new o.JWSInvalid("Failed to base64url decode the payload")}else h="string"==typeof e.payload?a.encoder.encode(e.payload):e.payload;let _={payload:h};return(void 0!==e.protected&&(_.protectedHeader=m),void 0!==e.header&&(_.unprotectedHeader=e.header),w)?{..._,key:t}:_}t.flattenedVerify=p},7248:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralSign=void 0;let n=r(4389),i=r(9859);class o{constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setProtectedHeader(e){if(this.protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}}class a{constructor(e){this._signatures=[],this._payload=e}addSignature(e,t){let r=new o(this,e,t);return this._signatures.push(r),r}async sign(){if(!this._signatures.length)throw new i.JWSInvalid("at least one signature must be added");let e={signatures:[],payload:""};for(let t=0;t<this._signatures.length;t++){let r=this._signatures[t],o=new n.FlattenedSign(this._payload);o.setProtectedHeader(r.protectedHeader),o.setUnprotectedHeader(r.unprotectedHeader);let{payload:a,...s}=await o.sign(r.key,r.options);if(0===t)e.payload=a;else if(e.payload!==a)throw new i.JWSInvalid("inconsistent use of JWS Unencoded Payload (RFC7797)");e.signatures.push(s)}return e}}t.GeneralSign=a},3497:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generalVerify=void 0;let n=r(769),i=r(9859),o=r(4955);async function a(e,t,r){if(!(0,o.default)(e))throw new i.JWSInvalid("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(o.default))throw new i.JWSInvalid("JWS Signatures missing or incorrect type");for(let i of e.signatures)try{return await (0,n.flattenedVerify)({header:i.header,payload:e.payload,protected:i.protected,signature:i.signature},t,r)}catch{}throw new i.JWSSignatureVerificationFailed}t.generalVerify=a},3496:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jwtDecrypt=void 0;let n=r(926),i=r(3433),o=r(9859);async function a(e,t,r){let a=await (0,n.compactDecrypt)(e,t,r),s=(0,i.default)(a.protectedHeader,a.plaintext,r),{protectedHeader:l}=a;if(void 0!==l.iss&&l.iss!==s.iss)throw new o.JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(void 0!==l.sub&&l.sub!==s.sub)throw new o.JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(void 0!==l.aud&&JSON.stringify(l.aud)!==JSON.stringify(s.aud))throw new o.JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',"aud","mismatch");let c={payload:s,protectedHeader:l};return"function"==typeof t?{...c,key:a.key}:c}t.jwtDecrypt=a},3347:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptJWT=void 0;let n=r(5441),i=r(2332),o=r(3739);class a extends o.ProduceJWT{setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){let r=new n.CompactEncrypt(i.encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),r.setProtectedHeader(this._protectedHeader),this._iv&&r.setInitializationVector(this._iv),this._cek&&r.setContentEncryptionKey(this._cek),this._keyManagementParameters&&r.setKeyManagementParameters(this._keyManagementParameters),r.encrypt(e,t)}}t.EncryptJWT=a},3739:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProduceJWT=void 0;let n=r(1447),i=r(4955),o=r(5034);class a{constructor(e){if(!(0,i.default)(e))throw TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:e}:this._payload={...this._payload,nbf:(0,n.default)(new Date)+(0,o.default)(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:e}:this._payload={...this._payload,exp:(0,n.default)(new Date)+(0,o.default)(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:(0,n.default)(new Date)}:this._payload={...this._payload,iat:e},this}}t.ProduceJWT=a},2888:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignJWT=void 0;let n=r(616),i=r(9859),o=r(2332),a=r(3739);class s extends a.ProduceJWT{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){var r;let a=new n.CompactSign(o.encoder.encode(JSON.stringify(this._payload)));if(a.setProtectedHeader(this._protectedHeader),Array.isArray(null===(r=this._protectedHeader)||void 0===r?void 0:r.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new i.JWTInvalid("JWTs MUST NOT use unencoded payload");return a.sign(e,t)}}t.SignJWT=s},5453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnsecuredJWT=void 0;let n=r(653),i=r(2332),o=r(9859),a=r(3433),s=r(3739);class l extends s.ProduceJWT{encode(){let e=n.encode(JSON.stringify({alg:"none"})),t=n.encode(JSON.stringify(this._payload));return`${e}.${t}.`}static decode(e,t){let r;if("string"!=typeof e)throw new o.JWTInvalid("Unsecured JWT must be a string");let{0:s,1:l,2:c,length:d}=e.split(".");if(3!==d||""!==c)throw new o.JWTInvalid("Invalid Unsecured JWT");try{if(r=JSON.parse(i.decoder.decode(n.decode(s))),"none"!==r.alg)throw Error()}catch{throw new o.JWTInvalid("Invalid Unsecured JWT")}return{payload:(0,a.default)(r,n.decode(l),t),header:r}}}t.UnsecuredJWT=l},4464:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jwtVerify=void 0;let n=r(993),i=r(3433),o=r(9859);async function a(e,t,r){var a;let s=await (0,n.compactVerify)(e,t,r);if((null===(a=s.protectedHeader.crit)||void 0===a?void 0:a.includes("b64"))&&!1===s.protectedHeader.b64)throw new o.JWTInvalid("JWTs MUST NOT use unencoded payload");let l={payload:(0,i.default)(s.protectedHeader,s.payload,r),protectedHeader:s.protectedHeader};return"function"==typeof t?{...l,key:s.key}:l}t.jwtVerify=a},8432:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exportJWK=t.exportPKCS8=t.exportSPKI=void 0;let n=r(3956),i=r(3956),o=r(6886);async function a(e){return(0,n.toSPKI)(e)}async function s(e){return(0,i.toPKCS8)(e)}async function l(e){return(0,o.default)(e)}t.exportSPKI=a,t.exportPKCS8=s,t.exportJWK=l},5617:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateKeyPair=void 0;let n=r(5906);async function i(e,t){return(0,n.generateKeyPair)(e,t)}t.generateKeyPair=i},6489:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSecret=void 0;let n=r(5906);async function i(e,t){return(0,n.generateSecret)(e,t)}t.generateSecret=i},3780:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importJWK=t.importPKCS8=t.importX509=t.importSPKI=void 0;let n=r(653),i=r(3956),o=r(6360),a=r(9859),s=r(4955);async function l(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PUBLIC KEY-----"))throw TypeError('"spki" must be SPKI formatted string');return(0,i.fromSPKI)(e,t,r)}async function c(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN CERTIFICATE-----"))throw TypeError('"x509" must be X.509 formatted string');return(0,i.fromX509)(e,t,r)}async function d(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return(0,i.fromPKCS8)(e,t,r)}async function u(e,t,r){var i;if(!(0,s.default)(e))throw TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');if(null!=r||(r=!0!==e.ext),r)return(0,o.default)({...e,alg:t,ext:null!==(i=e.ext)&&void 0!==i&&i});return(0,n.decode)(e.k);case"RSA":if(void 0!==e.oth)throw new a.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return(0,o.default)({...e,alg:t});default:throw new a.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}t.importSPKI=l,t.importX509=c,t.importPKCS8=d,t.importJWK=u},2200:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwrap=t.wrap=void 0;let n=r(24),i=r(1003),o=r(2149),a=r(653);async function s(e,t,r,i){let s=e.slice(0,7);i||(i=(0,o.default)(s));let{ciphertext:l,tag:c}=await (0,n.default)(s,r,t,i,new Uint8Array(0));return{encryptedKey:l,iv:(0,a.encode)(i),tag:(0,a.encode)(c)}}async function l(e,t,r,n,o){let a=e.slice(0,7);return(0,i.default)(a,t,r,n,o,new Uint8Array(0))}t.wrap=s,t.unwrap=l},2332:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatKdf=t.lengthAndInput=t.uint32be=t.uint64be=t.p2s=t.concat=t.decoder=t.encoder=void 0;let n=r(7865);function i(...e){let t=e.reduce((e,{length:t})=>e+t,0),r=new Uint8Array(t),n=0;return e.forEach(e=>{r.set(e,n),n+=e.length}),r}function o(e,t,r){if(t<0||t>=4294967296)throw RangeError(`value must be >= 0 and <= ${4294967296-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function a(e){let t=new Uint8Array(4);return o(t,e),t}async function s(e,t,r){let i=Math.ceil((t>>3)/32),o=new Uint8Array(32*i);for(let t=0;t<i;t++){let i=new Uint8Array(4+e.length+r.length);i.set(a(t+1)),i.set(e,4),i.set(r,4+e.length),o.set(await (0,n.default)("sha256",i),32*t)}return o.slice(0,t>>3)}t.encoder=new TextEncoder,t.decoder=new TextDecoder,t.concat=i,t.p2s=function(e,r){return i(t.encoder.encode(e),new Uint8Array([0]),r)},t.uint64be=function(e){let t=new Uint8Array(8);return o(t,Math.floor(e/4294967296),0),o(t,e%4294967296,4),t},t.uint32be=a,t.lengthAndInput=function(e){return i(a(e.length),e)},t.concatKdf=s},5060:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bitLength=void 0;let n=r(9859),i=r(7685);function o(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new n.JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}t.bitLength=o,t.default=e=>(0,i.default)(new Uint8Array(o(e)>>3))},7207:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(9859),i=r(2149);t.default=(e,t)=>{if(t.length<<3!==(0,i.bitLength)(e))throw new n.JWEInvalid("Invalid Initialization Vector length")}},796:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(9101),i=r(9008),o=(e,t)=>{if(!(t instanceof Uint8Array)){if(!(0,i.default)(t))throw TypeError((0,n.withAlg)(e,t,...i.types,"Uint8Array"));if("secret"!==t.type)throw TypeError(`${i.types.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},a=(e,t,r)=>{if(!(0,i.default)(t))throw TypeError((0,n.withAlg)(e,t,...i.types));if("secret"===t.type)throw TypeError(`${i.types.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw TypeError(`${i.types.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw TypeError(`${i.types.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw TypeError(`${i.types.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw TypeError(`${i.types.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)};t.default=(e,t,r)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?o(e,t):a(e,t,r)}},901:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(9859);t.default=function(e){if(!(e instanceof Uint8Array)||e.length<8)throw new n.JWEInvalid("PBES2 Salt Input must be 8 or more octets")}},1747:(e,t)=>{"use strict";function r(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function n(e,t){return e.name===t}function i(e){return parseInt(e.name.slice(4),10)}function o(e,t){if(t.length&&!t.some(t=>e.usages.includes(t))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){let r=t.pop();e+=`one of ${t.join(", ")}, or ${r}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw TypeError(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkEncCryptoKey=t.checkSigCryptoKey=void 0,t.checkSigCryptoKey=function(e,t,...a){switch(t){case"HS256":case"HS384":case"HS512":{if(!n(e.algorithm,"HMAC"))throw r("HMAC");let o=parseInt(t.slice(2),10);if(i(e.algorithm.hash)!==o)throw r(`SHA-${o}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!n(e.algorithm,"RSASSA-PKCS1-v1_5"))throw r("RSASSA-PKCS1-v1_5");let o=parseInt(t.slice(2),10);if(i(e.algorithm.hash)!==o)throw r(`SHA-${o}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!n(e.algorithm,"RSA-PSS"))throw r("RSA-PSS");let o=parseInt(t.slice(2),10);if(i(e.algorithm.hash)!==o)throw r(`SHA-${o}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw r("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!n(e.algorithm,"ECDSA"))throw r("ECDSA");let i=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(t);if(e.algorithm.namedCurve!==i)throw r(i,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}o(e,a)},t.checkEncCryptoKey=function(e,t,...a){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!n(e.algorithm,"AES-GCM"))throw r("AES-GCM");let i=parseInt(t.slice(1,4),10);if(e.algorithm.length!==i)throw r(i,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!n(e.algorithm,"AES-KW"))throw r("AES-KW");let i=parseInt(t.slice(1,4),10);if(e.algorithm.length!==i)throw r(i,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw r("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!n(e.algorithm,"PBKDF2"))throw r("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!n(e.algorithm,"RSA-OAEP"))throw r("RSA-OAEP");let o=parseInt(t.slice(9),10)||1;if(i(e.algorithm.hash)!==o)throw r(`SHA-${o}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}o(e,a)}},973:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(830),i=r(636),o=r(6973),a=r(8647),s=r(653),l=r(9859),c=r(5060),d=r(3780),u=r(796),p=r(4955),f=r(2200);async function h(e,t,r,h,m){switch((0,u.default)(e,t,"decrypt"),e){case"dir":if(void 0!==r)throw new l.JWEInvalid("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new l.JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let o,a;if(!(0,p.default)(h.epk))throw new l.JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!i.ecdhAllowed(t))throw new l.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let u=await (0,d.importJWK)(h.epk,e);if(void 0!==h.apu){if("string"!=typeof h.apu)throw new l.JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{o=(0,s.decode)(h.apu)}catch{throw new l.JWEInvalid("Failed to base64url decode the apu")}}if(void 0!==h.apv){if("string"!=typeof h.apv)throw new l.JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=(0,s.decode)(h.apv)}catch{throw new l.JWEInvalid("Failed to base64url decode the apv")}}let f=await i.deriveKey(u,t,"ECDH-ES"===e?h.enc:e,"ECDH-ES"===e?(0,c.bitLength)(h.enc):parseInt(e.slice(-5,-2),10),o,a);if("ECDH-ES"===e)return f;if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");return(0,n.unwrap)(e.slice(-6),f,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");return(0,a.decrypt)(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let n;if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");if("number"!=typeof h.p2c)throw new l.JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');let i=(null==m?void 0:m.maxPBES2Count)||1e4;if(h.p2c>i)throw new l.JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof h.p2s)throw new l.JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{n=(0,s.decode)(h.p2s)}catch{throw new l.JWEInvalid("Failed to base64url decode the p2s")}return(0,o.decrypt)(e,t,r,h.p2c,n)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");return(0,n.unwrap)(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let n,i;if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");if("string"!=typeof h.iv)throw new l.JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof h.tag)throw new l.JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');try{n=(0,s.decode)(h.iv)}catch{throw new l.JWEInvalid("Failed to base64url decode the iv")}try{i=(0,s.decode)(h.tag)}catch{throw new l.JWEInvalid("Failed to base64url decode the tag")}return(0,f.unwrap)(e,t,r,n,i)}default:throw new l.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}t.default=h},5797:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(830),i=r(636),o=r(6973),a=r(8647),s=r(653),l=r(5060),c=r(9859),d=r(8432),u=r(796),p=r(2200);async function f(e,t,r,f,h={}){let m,y,g;switch((0,u.default)(e,r,"encrypt"),e){case"dir":g=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!i.ecdhAllowed(r))throw new c.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:o,apv:a}=h,{epk:u}=h;u||(u=(await i.generateEpk(r)).privateKey);let{x:p,y:v,crv:b,kty:E}=await (0,d.exportJWK)(u),w=await i.deriveKey(r,u,"ECDH-ES"===e?t:e,"ECDH-ES"===e?(0,l.bitLength)(t):parseInt(e.slice(-5,-2),10),o,a);if(y={epk:{x:p,crv:b,kty:E}},"EC"===E&&(y.epk.y=v),o&&(y.apu=(0,s.encode)(o)),a&&(y.apv=(0,s.encode)(a)),"ECDH-ES"===e){g=w;break}g=f||(0,l.default)(t);let S=e.slice(-6);m=await (0,n.wrap)(S,w,g);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":g=f||(0,l.default)(t),m=await (0,a.encrypt)(e,r,g);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{g=f||(0,l.default)(t);let{p2c:n,p2s:i}=h;({encryptedKey:m,...y}=await (0,o.encrypt)(e,r,g,n,i));break}case"A128KW":case"A192KW":case"A256KW":g=f||(0,l.default)(t),m=await (0,n.wrap)(e,r,g);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{g=f||(0,l.default)(t);let{iv:n}=h;({encryptedKey:m,...y}=await (0,p.wrap)(e,r,g,n));break}default:throw new c.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:g,encryptedKey:m,parameters:y}}t.default=f},1447:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>Math.floor(e.getTime()/1e3)},9101:(e,t)=>{"use strict";function r(e,t,...n){if(n.length>2){let t=n.pop();e+=`one of type ${n.join(", ")}, or ${t}.`}else 2===n.length?e+=`one of type ${n[0]} or ${n[1]}.`:e+=`of type ${n[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor&&t.constructor.name&&(e+=` Received an instance of ${t.constructor.name}`),e}Object.defineProperty(t,"__esModule",{value:!0}),t.withAlg=void 0,t.default=(e,...t)=>r("Key must be ",e,...t),t.withAlg=function(e,t,...n){return r(`Key for the ${e} algorithm must be `,t,...n)}},3417:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(...e)=>{let t;let r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0}},4955:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!("object"==typeof e&&null!==e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},2149:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bitLength=void 0;let n=r(9859),i=r(7685);function o(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new n.JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}t.bitLength=o,t.default=e=>(0,i.default)(new Uint8Array(o(e)>>3))},3433:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(9859),i=r(2332),o=r(1447),a=r(5034),s=r(4955),l=e=>e.toLowerCase().replace(/^application\//,""),c=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e)));t.default=(e,t,r={})=>{let d,u;let{typ:p}=r;if(p&&("string"!=typeof e.typ||l(e.typ)!==l(p)))throw new n.JWTClaimValidationFailed('unexpected "typ" JWT header value',"typ","check_failed");try{d=JSON.parse(i.decoder.decode(t))}catch{}if(!(0,s.default)(d))throw new n.JWTInvalid("JWT Claims Set must be a top-level JSON object");let{requiredClaims:f=[],issuer:h,subject:m,audience:y,maxTokenAge:g}=r;for(let e of(void 0!==g&&f.push("iat"),void 0!==y&&f.push("aud"),void 0!==m&&f.push("sub"),void 0!==h&&f.push("iss"),new Set(f.reverse())))if(!(e in d))throw new n.JWTClaimValidationFailed(`missing required "${e}" claim`,e,"missing");if(h&&!(Array.isArray(h)?h:[h]).includes(d.iss))throw new n.JWTClaimValidationFailed('unexpected "iss" claim value',"iss","check_failed");if(m&&d.sub!==m)throw new n.JWTClaimValidationFailed('unexpected "sub" claim value',"sub","check_failed");if(y&&!c(d.aud,"string"==typeof y?[y]:y))throw new n.JWTClaimValidationFailed('unexpected "aud" claim value',"aud","check_failed");switch(typeof r.clockTolerance){case"string":u=(0,a.default)(r.clockTolerance);break;case"number":u=r.clockTolerance;break;case"undefined":u=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:v}=r,b=(0,o.default)(v||new Date);if((void 0!==d.iat||g)&&"number"!=typeof d.iat)throw new n.JWTClaimValidationFailed('"iat" claim must be a number',"iat","invalid");if(void 0!==d.nbf){if("number"!=typeof d.nbf)throw new n.JWTClaimValidationFailed('"nbf" claim must be a number',"nbf","invalid");if(d.nbf>b+u)throw new n.JWTClaimValidationFailed('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==d.exp){if("number"!=typeof d.exp)throw new n.JWTClaimValidationFailed('"exp" claim must be a number',"exp","invalid");if(d.exp<=b-u)throw new n.JWTExpired('"exp" claim timestamp check failed',"exp","check_failed")}if(g){let e=b-d.iat;if(e-u>("number"==typeof g?g:(0,a.default)(g)))throw new n.JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(e<0-u)throw new n.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return d}},5034:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;t.default=e=>{let t=r.exec(e);if(!t)throw TypeError("Invalid time period format");let n=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(n);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*n);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*n);case"day":case"days":case"d":return Math.round(86400*n);case"week":case"weeks":case"w":return Math.round(604800*n);default:return Math.round(31557600*n)}}},507:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)}},4417:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(9859);t.default=function(e,t,r,i,o){let a;if(void 0!==o.crit&&void 0===i.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||void 0===i.crit)return new Set;if(!Array.isArray(i.crit)||0===i.crit.length||i.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let s of(a=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,i.crit)){if(!a.has(s))throw new n.JOSENotSupported(`Extension Header Parameter "${s}" is not recognized`);if(void 0===o[s])throw new e(`Extension Header Parameter "${s}" is missing`);if(a.get(s)&&void 0===i[s])throw new e(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(i.crit)}},830:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwrap=t.wrap=void 0;let n=r(4300),i=r(6113),o=r(9859),a=r(2332),s=r(5681),l=r(1747),c=r(2985),d=r(9101),u=r(2857),p=r(9008);function f(e,t){if(e.symmetricKeySize<<3!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function h(e,t,r){if((0,c.default)(e))return e;if(e instanceof Uint8Array)return(0,i.createSecretKey)(e);if((0,s.isCryptoKey)(e))return(0,l.checkEncCryptoKey)(e,t,r),i.KeyObject.from(e);throw TypeError((0,d.default)(e,...p.types,"Uint8Array"))}t.wrap=(e,t,r)=>{let s=parseInt(e.slice(1,4),10),l=`aes${s}-wrap`;if(!(0,u.default)(l))throw new o.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`);let c=h(t,e,"wrapKey");f(c,e);let d=(0,i.createCipheriv)(l,c,n.Buffer.alloc(8,166));return(0,a.concat)(d.update(r),d.final())},t.unwrap=(e,t,r)=>{let s=parseInt(e.slice(1,4),10),l=`aes${s}-wrap`;if(!(0,u.default)(l))throw new o.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`);let c=h(t,e,"unwrapKey");f(c,e);let d=(0,i.createDecipheriv)(l,c,n.Buffer.alloc(8,166));return(0,a.concat)(d.update(r),d.final())}},3956:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromX509=t.fromSPKI=t.fromPKCS8=t.toPKCS8=t.toSPKI=void 0;let n=r(6113),i=r(4300),o=r(5681),a=r(2985),s=r(9101),l=r(9008),c=(e,t,r)=>{let i;if((0,o.isCryptoKey)(r)){if(!r.extractable)throw TypeError("CryptoKey is not extractable");i=n.KeyObject.from(r)}else if((0,a.default)(r))i=r;else throw TypeError((0,s.default)(r,...l.types));if(i.type!==e)throw TypeError(`key is not a ${e} key`);return i.export({format:"pem",type:t})};t.toSPKI=e=>c("public","spki",e),t.toPKCS8=e=>c("private","pkcs8",e),t.fromPKCS8=e=>(0,n.createPrivateKey)({key:i.Buffer.from(e.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,""),"base64"),type:"pkcs8",format:"der"}),t.fromSPKI=e=>(0,n.createPublicKey)({key:i.Buffer.from(e.replace(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,""),"base64"),type:"spki",format:"der"}),t.fromX509=e=>(0,n.createPublicKey)({key:e,type:"spki",format:"pem"})},3916:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){if(48!==e[0]||(this.buffer=e,this.offset=1,this.decodeLength()!==e.length-this.offset))throw TypeError()}decodeLength(){let e=this.buffer[this.offset++];if(128&e){let t=-129&e;e=0;for(let r=0;r<t;r++)e=e<<8|this.buffer[this.offset+r];this.offset+=t}return e}unsignedInteger(){if(2!==this.buffer[this.offset++])throw TypeError();let e=this.decodeLength();0===this.buffer[this.offset]&&(this.offset++,e--);let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}end(){if(this.offset!==this.buffer.length)throw TypeError()}}t.default=r},6801:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(4300),i=r(9859),o=n.Buffer.from([0]),a=n.Buffer.from([2]),s=n.Buffer.from([3]),l=n.Buffer.from([48]),c=n.Buffer.from([4]),d=e=>{if(e<128)return n.Buffer.from([e]);let t=n.Buffer.alloc(5);t.writeUInt32BE(e,1);let r=1;for(;0===t[r];)r++;return t[r-1]=128|5-r,t.slice(r-1)},u=new Map([["P-256",n.Buffer.from("06 08 2A 86 48 CE 3D 03 01 07".replace(/ /g,""),"hex")],["secp256k1",n.Buffer.from("06 05 2B 81 04 00 0A".replace(/ /g,""),"hex")],["P-384",n.Buffer.from("06 05 2B 81 04 00 22".replace(/ /g,""),"hex")],["P-521",n.Buffer.from("06 05 2B 81 04 00 23".replace(/ /g,""),"hex")],["ecPublicKey",n.Buffer.from("06 07 2A 86 48 CE 3D 02 01".replace(/ /g,""),"hex")],["X25519",n.Buffer.from("06 03 2B 65 6E".replace(/ /g,""),"hex")],["X448",n.Buffer.from("06 03 2B 65 6F".replace(/ /g,""),"hex")],["Ed25519",n.Buffer.from("06 03 2B 65 70".replace(/ /g,""),"hex")],["Ed448",n.Buffer.from("06 03 2B 65 71".replace(/ /g,""),"hex")]]);class p{constructor(){this.length=0,this.elements=[]}oidFor(e){let t=u.get(e);if(!t)throw new i.JOSENotSupported("Invalid or unsupported OID");this.elements.push(t),this.length+=t.length}zero(){this.elements.push(a,n.Buffer.from([1]),o),this.length+=3}one(){this.elements.push(a,n.Buffer.from([1]),n.Buffer.from([1])),this.length+=3}unsignedInteger(e){if(128&e[0]){let t=d(e.length+1);this.elements.push(a,t,o,e),this.length+=2+t.length+e.length}else{let t=0;for(;0===e[t]&&(128&e[t+1])==0;)t++;let r=d(e.length-t);this.elements.push(a,d(e.length-t),e.slice(t)),this.length+=1+r.length+e.length-t}}octStr(e){let t=d(e.length);this.elements.push(c,d(e.length),e),this.length+=1+t.length+e.length}bitStr(e){let t=d(e.length+1);this.elements.push(s,d(e.length+1),o,e),this.length+=1+t.length+e.length+1}add(e){this.elements.push(e),this.length+=e.length}end(e=l){let t=d(this.length);return n.Buffer.concat([e,t,...this.elements],1+t.length+this.length)}}t.default=p},653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=t.encodeBase64=t.decodeBase64=void 0;let n=r(4300),i=r(2332);n.Buffer.isEncoding("base64url")?t.encode=e=>n.Buffer.from(e).toString("base64url"):t.encode=e=>n.Buffer.from(e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),t.decodeBase64=e=>n.Buffer.from(e,"base64"),t.encodeBase64=e=>n.Buffer.from(e).toString("base64"),t.decode=e=>n.Buffer.from(function(e){let t=e;return t instanceof Uint8Array&&(t=i.decoder.decode(t)),t}(e),"base64")},456:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(2332);t.default=function(e,t,r,o,a,s){let l=(0,i.concat)(e,t,r,(0,i.uint64be)(e.length<<3)),c=(0,n.createHmac)(`sha${o}`,a);return c.update(l),c.digest().slice(0,s>>3)}},8722:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(9859),i=r(2985);t.default=(e,t)=>{let r;switch(e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(e.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10);break;default:throw new n.JOSENotSupported(`Content Encryption Algorithm ${e} is not supported either by JOSE or your javascript runtime`)}if(t instanceof Uint8Array){let e=t.byteLength<<3;if(e!==r)throw new n.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}if((0,i.default)(t)&&"secret"===t.type){let e=t.symmetricKeySize<<3;if(e!==r)throw new n.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}throw TypeError("Invalid Content Encryption Key type")}},2973:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setModulusLength=t.weakMap=void 0,t.weakMap=new WeakMap;let r=(e,t)=>{let n=e.readUInt8(1);if((128&n)==0)return 0===t?n:r(e.subarray(2+n),t-1);let i=127&n;n=0;for(let t=0;t<i;t++)n<<=8,n|=e.readUInt8(2+t);return 0===t?n:r(e.subarray(2+n),t-1)},n=(e,t)=>{let n=e.readUInt8(1);return(128&n)==0?r(e.subarray(2),t):r(e.subarray(2+(127&n)),t)},i=e=>{var r,i;if(t.weakMap.has(e))return t.weakMap.get(e);let o=null!==(i=null===(r=e.asymmetricKeyDetails)||void 0===r?void 0:r.modulusLength)&&void 0!==i?i:n(e.export({format:"der",type:"pkcs1"}),"private"===e.type?1:0)-1<<3;return t.weakMap.set(e,o),o};t.setModulusLength=(e,r)=>{t.weakMap.set(e,r)},t.default=(e,t)=>{if(2048>i(e))throw TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}},2857:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0});let i=r(6113);t.default=e=>(n||(n=new Set((0,i.getCiphers)())),n.has(e))},1003:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(7207),o=r(8722),a=r(2332),s=r(9859),l=r(5761),c=r(456),d=r(5681),u=r(1747),p=r(2985),f=r(9101),h=r(2857),m=r(9008);t.default=(e,t,r,y,g,v)=>{let b;if((0,d.isCryptoKey)(t))(0,u.checkEncCryptoKey)(t,e,"decrypt"),b=n.KeyObject.from(t);else if(t instanceof Uint8Array||(0,p.default)(t))b=t;else throw TypeError((0,f.default)(t,...m.types,"Uint8Array"));switch((0,o.default)(e,b),(0,i.default)(e,y),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(e,t,r,i,o,d){let u,f;let m=parseInt(e.slice(1,4),10);(0,p.default)(t)&&(t=t.export());let y=t.subarray(m>>3),g=t.subarray(0,m>>3),v=parseInt(e.slice(-3),10),b=`aes-${m}-cbc`;if(!(0,h.default)(b))throw new s.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let E=(0,c.default)(d,i,r,v,g,m);try{u=(0,l.default)(o,E)}catch{}if(!u)throw new s.JWEDecryptionFailed;try{let e=(0,n.createDecipheriv)(b,y,i);f=(0,a.concat)(e.update(r),e.final())}catch{}if(!f)throw new s.JWEDecryptionFailed;return f}(e,b,r,y,g,v);case"A128GCM":case"A192GCM":case"A256GCM":return function(e,t,r,i,o,a){let l=parseInt(e.slice(1,4),10),c=`aes-${l}-gcm`;if(!(0,h.default)(c))throw new s.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);try{let e=(0,n.createDecipheriv)(c,t,i,{authTagLength:16});e.setAuthTag(o),a.byteLength&&e.setAAD(a,{plaintextLength:r.length});let s=e.update(r);return e.final(),s}catch{throw new s.JWEDecryptionFailed}}(e,b,r,y,g,v);default:throw new s.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},7865:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113);t.default=(e,t)=>(0,n.createHash)(e).update(t).digest()},8981:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(9859);t.default=function(e){switch(e){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new n.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}},636:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ecdhAllowed=t.generateEpk=t.deriveKey=void 0;let n=r(6113),i=r(3837),o=r(3199),a=r(2332),s=r(9859),l=r(5681),c=r(1747),d=r(2985),u=r(9101),p=r(9008),f=(0,i.promisify)(n.generateKeyPair);async function h(e,t,r,i,o=new Uint8Array(0),s=new Uint8Array(0)){let f,h;if((0,l.isCryptoKey)(e))(0,c.checkEncCryptoKey)(e,"ECDH"),f=n.KeyObject.from(e);else if((0,d.default)(e))f=e;else throw TypeError((0,u.default)(e,...p.types));if((0,l.isCryptoKey)(t))(0,c.checkEncCryptoKey)(t,"ECDH","deriveBits"),h=n.KeyObject.from(t);else if((0,d.default)(t))h=t;else throw TypeError((0,u.default)(t,...p.types));let m=(0,a.concat)((0,a.lengthAndInput)(a.encoder.encode(r)),(0,a.lengthAndInput)(o),(0,a.lengthAndInput)(s),(0,a.uint32be)(i)),y=(0,n.diffieHellman)({privateKey:h,publicKey:f});return(0,a.concatKdf)(y,i,m)}async function m(e){let t;if((0,l.isCryptoKey)(e))t=n.KeyObject.from(e);else if((0,d.default)(e))t=e;else throw TypeError((0,u.default)(e,...p.types));switch(t.asymmetricKeyType){case"x25519":return f("x25519");case"x448":return f("x448");case"ec":return f("ec",{namedCurve:(0,o.default)(t)});default:throw new s.JOSENotSupported("Invalid or unsupported EPK")}}t.deriveKey=h,t.generateEpk=m,t.ecdhAllowed=e=>["P-256","P-384","P-521","X25519","X448"].includes((0,o.default)(e))},24:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(7207),o=r(8722),a=r(2332),s=r(456),l=r(5681),c=r(1747),d=r(2985),u=r(9101),p=r(9859),f=r(2857),h=r(9008);t.default=(e,t,r,m,y)=>{let g;if((0,l.isCryptoKey)(r))(0,c.checkEncCryptoKey)(r,e,"encrypt"),g=n.KeyObject.from(r);else if(r instanceof Uint8Array||(0,d.default)(r))g=r;else throw TypeError((0,u.default)(r,...h.types,"Uint8Array"));switch((0,o.default)(e,g),(0,i.default)(e,m),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(e,t,r,i,o){let l=parseInt(e.slice(1,4),10);(0,d.default)(r)&&(r=r.export());let c=r.subarray(l>>3),u=r.subarray(0,l>>3),h=`aes-${l}-cbc`;if(!(0,f.default)(h))throw new p.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let m=(0,n.createCipheriv)(h,c,i),y=(0,a.concat)(m.update(t),m.final()),g=parseInt(e.slice(-3),10),v=(0,s.default)(o,i,y,g,u,l);return{ciphertext:y,tag:v}}(e,t,g,m,y);case"A128GCM":case"A192GCM":case"A256GCM":return function(e,t,r,i,o){let a=parseInt(e.slice(1,4),10),s=`aes-${a}-gcm`;if(!(0,f.default)(s))throw new p.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let l=(0,n.createCipheriv)(s,r,i,{authTagLength:16});o.byteLength&&l.setAAD(o,{plaintextLength:t.length});let c=l.update(t);return l.final(),{ciphertext:c,tag:l.getAuthTag()}}(e,t,g,m,y);default:throw new p.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},185:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(3685),i=r(5687),o=r(2361),a=r(9859),s=r(2332),l=async(e,t,r)=>{let l;switch(e.protocol){case"https:":l=i.get;break;case"http:":l=n.get;break;default:throw TypeError("Unsupported URL protocol.")}let{agent:c,headers:d}=r,u=l(e.href,{agent:c,timeout:t,headers:d}),[p]=await Promise.race([(0,o.once)(u,"response"),(0,o.once)(u,"timeout")]);if(!p)throw u.destroy(),new a.JWKSTimeout;if(200!==p.statusCode)throw new a.JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");let f=[];for await(let e of p)f.push(e);try{return JSON.parse(s.decoder.decode((0,s.concat)(...f)))}catch{throw new a.JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}};t.default=l},2581:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jwkImport=t.jwkExport=t.rsaPssParams=t.oneShotCallback=void 0;let[r,n]=process.versions.node.split(".").map(e=>parseInt(e,10));t.oneShotCallback=r>=16||15===r&&n>=13,t.rsaPssParams=!("electron"in process.versions)&&(r>=17||16===r&&n>=9),t.jwkExport=r>=16||15===r&&n>=9,t.jwkImport=r>=16||15===r&&n>=12},5906:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateKeyPair=t.generateSecret=void 0;let n=r(6113),i=r(3837),o=r(7685),a=r(2973),s=r(9859),l=(0,i.promisify)(n.generateKeyPair);async function c(e,t){let r;switch(e){case"HS256":case"HS384":case"HS512":case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(e.slice(-3),10);break;case"A128KW":case"A192KW":case"A256KW":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10);break;default:throw new s.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return(0,n.createSecretKey)((0,o.default)(new Uint8Array(r>>3)))}async function d(e,t){var r,n;switch(e){case"RS256":case"RS384":case"RS512":case"PS256":case"PS384":case"PS512":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":case"RSA1_5":{let e=null!==(r=null==t?void 0:t.modulusLength)&&void 0!==r?r:2048;if("number"!=typeof e||e<2048)throw new s.JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");let n=await l("rsa",{modulusLength:e,publicExponent:65537});return(0,a.setModulusLength)(n.privateKey,e),(0,a.setModulusLength)(n.publicKey,e),n}case"ES256":return l("ec",{namedCurve:"P-256"});case"ES256K":return l("ec",{namedCurve:"secp256k1"});case"ES384":return l("ec",{namedCurve:"P-384"});case"ES512":return l("ec",{namedCurve:"P-521"});case"EdDSA":switch(null==t?void 0:t.crv){case void 0:case"Ed25519":return l("ed25519");case"Ed448":return l("ed448");default:throw new s.JOSENotSupported("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":let i=null!==(n=null==t?void 0:t.crv)&&void 0!==n?n:"P-256";switch(i){case void 0:case"P-256":case"P-384":case"P-521":return l("ec",{namedCurve:i});case"X25519":return l("x25519");case"X448":return l("x448");default:throw new s.JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}default:throw new s.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}}t.generateSecret=c,t.generateKeyPair=d},3199:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCurve=t.weakMap=void 0;let n=r(4300),i=r(6113),o=r(9859),a=r(5681),s=r(2985),l=r(9101),c=r(9008),d=n.Buffer.from([42,134,72,206,61,3,1,7]),u=n.Buffer.from([43,129,4,0,34]),p=n.Buffer.from([43,129,4,0,35]),f=n.Buffer.from([43,129,4,0,10]);t.weakMap=new WeakMap;let h=e=>{switch(e){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new o.JOSENotSupported("Unsupported key curve for this operation")}},m=(e,r)=>{var n;let y;if((0,a.isCryptoKey)(e))y=i.KeyObject.from(e);else if((0,s.default)(e))y=e;else throw TypeError((0,l.default)(e,...c.types));if("secret"===y.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(y.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${y.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${y.asymmetricKeyType.slice(1)}`;case"ec":{if(t.weakMap.has(y))return t.weakMap.get(y);let e=null===(n=y.asymmetricKeyDetails)||void 0===n?void 0:n.namedCurve;if(e||"private"!==y.type){if(!e){let t=y.export({format:"der",type:"spki"}),r=t[1]<128?14:15,n=t[r],i=t.slice(r+1,r+1+n);if(i.equals(d))e="prime256v1";else if(i.equals(u))e="secp384r1";else if(i.equals(p))e="secp521r1";else if(i.equals(f))e="secp256k1";else throw new o.JOSENotSupported("Unsupported key curve for this operation")}}else e=m((0,i.createPublicKey)(y),!0);if(r)return e;let a=h(e);return t.weakMap.set(y,a),a}default:throw TypeError("Invalid asymmetric key type for this operation")}};t.setCurve=function(e,r){t.weakMap.set(e,r)},t.default=m},2431:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(5681),o=r(1747),a=r(9101),s=r(9008);t.default=function(e,t,r){if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError((0,a.default)(t,...s.types));return(0,n.createSecretKey)(t)}if(t instanceof n.KeyObject)return t;if((0,i.isCryptoKey)(t))return(0,o.checkSigCryptoKey)(t,e,r),n.KeyObject.from(t);throw TypeError((0,a.default)(t,...s.types,"Uint8Array"))}},8142:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(9859);t.default=function(e){switch(e){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new n.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}},9008:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.types=void 0;let n=r(5681),i=r(2985);t.default=e=>(0,i.default)(e)||(0,n.isCryptoKey)(e);let o=["KeyObject"];t.types=o,(globalThis.CryptoKey||(null===n.default||void 0===n.default?void 0:n.default.CryptoKey))&&o.push("CryptoKey")},2985:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(3837);t.default=i.types.isKeyObject?e=>i.types.isKeyObject(e):e=>null!=e&&e instanceof n.KeyObject},6360:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(4300),i=r(6113),o=r(653),a=r(9859),s=r(3199),l=r(2973),c=r(6801),d=r(2581);t.default=e=>{if(d.jwkImport&&"oct"!==e.kty)return e.d?(0,i.createPrivateKey)({format:"jwk",key:e}):(0,i.createPublicKey)({format:"jwk",key:e});switch(e.kty){case"oct":return(0,i.createSecretKey)((0,o.decode)(e.k));case"RSA":{let t=new c.default,r=void 0!==e.d,o=n.Buffer.from(e.n,"base64"),a=n.Buffer.from(e.e,"base64");r?(t.zero(),t.unsignedInteger(o),t.unsignedInteger(a),t.unsignedInteger(n.Buffer.from(e.d,"base64")),t.unsignedInteger(n.Buffer.from(e.p,"base64")),t.unsignedInteger(n.Buffer.from(e.q,"base64")),t.unsignedInteger(n.Buffer.from(e.dp,"base64")),t.unsignedInteger(n.Buffer.from(e.dq,"base64")),t.unsignedInteger(n.Buffer.from(e.qi,"base64"))):(t.unsignedInteger(o),t.unsignedInteger(a));let s={key:t.end(),format:"der",type:"pkcs1"},d=r?(0,i.createPrivateKey)(s):(0,i.createPublicKey)(s);return(0,l.setModulusLength)(d,o.length<<3),d}case"EC":{let t=new c.default,r=void 0!==e.d,o=n.Buffer.concat([n.Buffer.alloc(1,4),n.Buffer.from(e.x,"base64"),n.Buffer.from(e.y,"base64")]);if(r){t.zero();let r=new c.default;r.oidFor("ecPublicKey"),r.oidFor(e.crv),t.add(r.end());let a=new c.default;a.one(),a.octStr(n.Buffer.from(e.d,"base64"));let l=new c.default;l.bitStr(o);let d=l.end(n.Buffer.from([161]));a.add(d);let u=a.end(),p=new c.default;p.add(u);let f=p.end(n.Buffer.from([4]));t.add(f);let h=t.end(),m=(0,i.createPrivateKey)({key:h,format:"der",type:"pkcs8"});return(0,s.setCurve)(m,e.crv),m}let a=new c.default;a.oidFor("ecPublicKey"),a.oidFor(e.crv),t.add(a.end()),t.bitStr(o);let l=t.end(),d=(0,i.createPublicKey)({key:l,format:"der",type:"spki"});return(0,s.setCurve)(d,e.crv),d}case"OKP":{let t=new c.default;if(void 0!==e.d){t.zero();let r=new c.default;r.oidFor(e.crv),t.add(r.end());let o=new c.default;o.octStr(n.Buffer.from(e.d,"base64"));let a=o.end(n.Buffer.from([4]));t.add(a);let s=t.end();return(0,i.createPrivateKey)({key:s,format:"der",type:"pkcs8"})}let r=new c.default;r.oidFor(e.crv),t.add(r.end()),t.bitStr(n.Buffer.from(e.x,"base64"));let o=t.end();return(0,i.createPublicKey)({key:o,format:"der",type:"spki"})}default:throw new a.JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}}},6886:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(653),o=r(3916),a=r(9859),s=r(3199),l=r(5681),c=r(2985),d=r(9101),u=r(9008),p=r(2581),f=e=>{let t;if((0,l.isCryptoKey)(e)){if(!e.extractable)throw TypeError("CryptoKey is not extractable");t=n.KeyObject.from(e)}else if((0,c.default)(e))t=e;else if(e instanceof Uint8Array)return{kty:"oct",k:(0,i.encode)(e)};else throw TypeError((0,d.default)(e,...u.types,"Uint8Array"));if(p.jwkExport){if("secret"!==t.type&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(t.asymmetricKeyType))throw new a.JOSENotSupported("Unsupported key asymmetricKeyType");return t.export({format:"jwk"})}switch(t.type){case"secret":return{kty:"oct",k:(0,i.encode)(t.export())};case"private":case"public":switch(t.asymmetricKeyType){case"rsa":{let e;let r=t.export({format:"der",type:"pkcs1"}),n=new o.default(r);"private"===t.type&&n.unsignedInteger();let a=(0,i.encode)(n.unsignedInteger()),s=(0,i.encode)(n.unsignedInteger());return"private"===t.type&&(e={d:(0,i.encode)(n.unsignedInteger()),p:(0,i.encode)(n.unsignedInteger()),q:(0,i.encode)(n.unsignedInteger()),dp:(0,i.encode)(n.unsignedInteger()),dq:(0,i.encode)(n.unsignedInteger()),qi:(0,i.encode)(n.unsignedInteger())}),n.end(),{kty:"RSA",n:a,e:s,...e}}case"ec":{let e,r,o;let l=(0,s.default)(t);switch(l){case"secp256k1":e=64,r=33,o=-1;break;case"P-256":e=64,r=36,o=-1;break;case"P-384":e=96,r=35,o=-3;break;case"P-521":e=132,r=35,o=-3;break;default:throw new a.JOSENotSupported("Unsupported curve")}if("public"===t.type){let r=t.export({type:"spki",format:"der"});return{kty:"EC",crv:l,x:(0,i.encode)(r.subarray(-e,-e/2)),y:(0,i.encode)(r.subarray(-e/2))}}let c=t.export({type:"pkcs8",format:"der"});return c.length<100&&(r+=o),{...f((0,n.createPublicKey)(t)),d:(0,i.encode)(c.subarray(r,r+e/2))}}case"ed25519":case"x25519":{let e=(0,s.default)(t);if("public"===t.type){let r=t.export({type:"spki",format:"der"});return{kty:"OKP",crv:e,x:(0,i.encode)(r.subarray(-32))}}let r=t.export({type:"pkcs8",format:"der"});return{...f((0,n.createPublicKey)(t)),d:(0,i.encode)(r.subarray(-32))}}case"ed448":case"x448":{let e=(0,s.default)(t);if("public"===t.type){let r=t.export({type:"spki",format:"der"});return{kty:"OKP",crv:e,x:(0,i.encode)(r.subarray("Ed448"===e?-57:-56))}}let r=t.export({type:"pkcs8",format:"der"});return{...f((0,n.createPublicKey)(t)),d:(0,i.encode)(r.subarray("Ed448"===e?-57:-56))}}default:throw new a.JOSENotSupported("Unsupported key asymmetricKeyType")}default:throw new a.JOSENotSupported("Unsupported key type")}};t.default=f},9321:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(3199),o=r(9859),a=r(2973),s=r(2581),l={padding:n.constants.RSA_PKCS1_PSS_PADDING,saltLength:n.constants.RSA_PSS_SALTLEN_DIGEST},c=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);t.default=function(e,t){switch(e){case"EdDSA":if(!["ed25519","ed448"].includes(t.asymmetricKeyType))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");return t;case"RS256":case"RS384":case"RS512":if("rsa"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,a.default)(t,e),t;case s.rsaPssParams&&"PS256":case s.rsaPssParams&&"PS384":case s.rsaPssParams&&"PS512":if("rsa-pss"===t.asymmetricKeyType){let{hashAlgorithm:r,mgf1HashAlgorithm:n,saltLength:i}=t.asymmetricKeyDetails,o=parseInt(e.slice(-3),10);if(void 0!==r&&(r!==`sha${o}`||n!==r))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}`);if(void 0!==i&&i>o>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}`)}else if("rsa"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");return(0,a.default)(t,e),{key:t,...l};case!s.rsaPssParams&&"PS256":case!s.rsaPssParams&&"PS384":case!s.rsaPssParams&&"PS512":if("rsa"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,a.default)(t,e),{key:t,...l};case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let r=(0,i.default)(t),n=c.get(e);if(r!==n)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${n}, got ${r}`);return{dsaEncoding:"ieee-p1363",key:t}}default:throw new o.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}},6973:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=void 0;let n=r(3837),i=r(6113),o=r(7685),a=r(2332),s=r(653),l=r(830),c=r(901),d=r(5681),u=r(1747),p=r(2985),f=r(9101),h=r(9008),m=(0,n.promisify)(i.pbkdf2);function y(e,t){if((0,p.default)(e))return e.export();if(e instanceof Uint8Array)return e;if((0,d.isCryptoKey)(e))return(0,u.checkEncCryptoKey)(e,t,"deriveBits","deriveKey"),i.KeyObject.from(e).export();throw TypeError((0,f.default)(e,...h.types,"Uint8Array"))}let g=async(e,t,r,n=2048,i=(0,o.default)(new Uint8Array(16)))=>{(0,c.default)(i);let d=(0,a.p2s)(e,i),u=parseInt(e.slice(13,16),10)>>3,p=y(t,e),f=await m(p,d,n,u,`sha${e.slice(8,11)}`);return{encryptedKey:await (0,l.wrap)(e.slice(-6),f,r),p2c:n,p2s:(0,s.encode)(i)}};t.encrypt=g;let v=async(e,t,r,n,i)=>{(0,c.default)(i);let o=(0,a.p2s)(e,i),s=parseInt(e.slice(13,16),10)>>3,d=y(t,e),u=await m(d,o,n,s,`sha${e.slice(8,11)}`);return(0,l.unwrap)(e.slice(-6),u,r)};t.decrypt=v},7685:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(6113);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.randomFillSync}})},8647:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=void 0;let n=r(6113),i=r(2973),o=r(5681),a=r(1747),s=r(2985),l=r(9101),c=r(9008),d=(e,t)=>{if("rsa"!==e.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");(0,i.default)(e,t)},u=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return n.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return n.constants.RSA_PKCS1_PADDING;default:return}},p=e=>{switch(e){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function f(e,t,...r){if((0,s.default)(e))return e;if((0,o.isCryptoKey)(e))return(0,a.checkEncCryptoKey)(e,t,...r),n.KeyObject.from(e);throw TypeError((0,l.default)(e,...c.types))}t.encrypt=(e,t,r)=>{let i=u(e),o=p(e),a=f(t,e,"wrapKey","encrypt");return d(a,e),(0,n.publicEncrypt)({key:a,oaepHash:o,padding:i},r)},t.decrypt=(e,t,r)=>{let i=u(e),o=p(e),a=f(t,e,"unwrapKey","decrypt");return d(a,e),(0,n.privateDecrypt)({key:a,oaepHash:o,padding:i},r)}},2115:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="node:crypto"},7334:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0});let i=r(6113),o=r(3837),a=r(8981),s=r(8142),l=r(9321),c=r(2431);n=i.sign.length>3?(0,o.promisify)(i.sign):i.sign;let d=async(e,t,r)=>{let o=(0,c.default)(e,t,"sign");if(e.startsWith("HS")){let t=i.createHmac((0,s.default)(e),o);return t.update(r),t.digest()}return n((0,a.default)(e),r,(0,l.default)(e,o))};t.default=d},5761:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113).timingSafeEqual;t.default=n},8477:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0});let i=r(6113),o=r(3837),a=r(8981),s=r(9321),l=r(7334),c=r(2431),d=r(2581);n=i.verify.length>4&&d.oneShotCallback?(0,o.promisify)(i.verify):i.verify;let u=async(e,t,r,o)=>{let d=(0,c.default)(e,t,"verify");if(e.startsWith("HS")){let t=await (0,l.default)(e,d,o);try{return i.timingSafeEqual(r,t)}catch{return!1}}let u=(0,a.default)(e),p=(0,s.default)(e,d);try{return await n(u,o,p,r)}catch{return!1}};t.default=u},5681:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCryptoKey=void 0;let n=r(6113),i=r(3837),o=n.webcrypto;t.default=o,t.isCryptoKey=i.types.isCryptoKey?e=>i.types.isCryptoKey(e):e=>!1},738:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deflate=t.inflate=void 0;let n=r(3837),i=r(9796),o=r(9859),a=(0,n.promisify)(i.inflateRaw),s=(0,n.promisify)(i.deflateRaw);t.inflate=e=>a(e,{maxOutputLength:25e4}).catch(()=>{throw new o.JWEDecompressionFailed}),t.deflate=e=>s(e)},4349:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0;let n=r(653);t.encode=n.encode,t.decode=n.decode},6919:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeJwt=void 0;let n=r(4349),i=r(2332),o=r(4955),a=r(9859);t.decodeJwt=function(e){let t,r;if("string"!=typeof e)throw new a.JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:s,length:l}=e.split(".");if(5===l)throw new a.JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(3!==l)throw new a.JWTInvalid("Invalid JWT");if(!s)throw new a.JWTInvalid("JWTs must contain a payload");try{t=(0,n.decode)(s)}catch{throw new a.JWTInvalid("Failed to base64url decode the payload")}try{r=JSON.parse(i.decoder.decode(t))}catch{throw new a.JWTInvalid("Failed to parse the decoded payload as JSON")}if(!(0,o.default)(r))throw new a.JWTInvalid("Invalid JWT Claims Set");return r}},8353:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeProtectedHeader=void 0;let n=r(4349),i=r(2332),o=r(4955);t.decodeProtectedHeader=function(e){let t;if("string"==typeof e){let r=e.split(".");(3===r.length||5===r.length)&&([t]=r)}else if("object"==typeof e&&e){if("protected"in e)t=e.protected;else throw TypeError("Token does not contain a Protected Header")}try{if("string"!=typeof t||!t)throw Error();let e=JSON.parse(i.decoder.decode((0,n.decode)(t)));if(!(0,o.default)(e))throw Error();return e}catch{throw TypeError("Invalid Token or Protected Header formatting")}}},9859:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JWSSignatureVerificationFailed=t.JWKSTimeout=t.JWKSMultipleMatchingKeys=t.JWKSNoMatchingKey=t.JWKSInvalid=t.JWKInvalid=t.JWTInvalid=t.JWSInvalid=t.JWEInvalid=t.JWEDecompressionFailed=t.JWEDecryptionFailed=t.JOSENotSupported=t.JOSEAlgNotAllowed=t.JWTExpired=t.JWTClaimValidationFailed=t.JOSEError=void 0;class r extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,this.constructor)}}t.JOSEError=r;class n extends r{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(e,t="unspecified",r="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=t,this.reason=r}}t.JWTClaimValidationFailed=n;class i extends r{static get code(){return"ERR_JWT_EXPIRED"}constructor(e,t="unspecified",r="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=t,this.reason=r}}t.JWTExpired=i;class o extends r{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}t.JOSEAlgNotAllowed=o;class a extends r{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}t.JOSENotSupported=a;class s extends r{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}t.JWEDecryptionFailed=s;class l extends r{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}}t.JWEDecompressionFailed=l;class c extends r{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}t.JWEInvalid=c;class d extends r{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}t.JWSInvalid=d;class u extends r{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}t.JWTInvalid=u;class p extends r{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}t.JWKInvalid=p;class f extends r{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}t.JWKSInvalid=f;class h extends r{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}t.JWKSNoMatchingKey=h;class m extends r{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}t.JWKSMultipleMatchingKeys=m,Symbol.asyncIterator;class y extends r{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}t.JWKSTimeout=y;class g extends r{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}t.JWSSignatureVerificationFailed=g},1376:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(2115);t.default=n.default},9828:e=>{var t="undefined"!=typeof Element,r="function"==typeof Map,n="function"==typeof Set,i="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;e.exports=function(e,o){try{return function e(o,a){if(o===a)return!0;if(o&&a&&"object"==typeof o&&"object"==typeof a){var s,l,c,d;if(o.constructor!==a.constructor)return!1;if(Array.isArray(o)){if((s=o.length)!=a.length)return!1;for(l=s;0!=l--;)if(!e(o[l],a[l]))return!1;return!0}if(r&&o instanceof Map&&a instanceof Map){if(o.size!==a.size)return!1;for(d=o.entries();!(l=d.next()).done;)if(!a.has(l.value[0]))return!1;for(d=o.entries();!(l=d.next()).done;)if(!e(l.value[1],a.get(l.value[0])))return!1;return!0}if(n&&o instanceof Set&&a instanceof Set){if(o.size!==a.size)return!1;for(d=o.entries();!(l=d.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(a)){if((s=o.length)!=a.length)return!1;for(l=s;0!=l--;)if(o[l]!==a[l])return!1;return!0}if(o.constructor===RegExp)return o.source===a.source&&o.flags===a.flags;if(o.valueOf!==Object.prototype.valueOf&&"function"==typeof o.valueOf&&"function"==typeof a.valueOf)return o.valueOf()===a.valueOf();if(o.toString!==Object.prototype.toString&&"function"==typeof o.toString&&"function"==typeof a.toString)return o.toString()===a.toString();if((s=(c=Object.keys(o)).length)!==Object.keys(a).length)return!1;for(l=s;0!=l--;)if(!Object.prototype.hasOwnProperty.call(a,c[l]))return!1;if(t&&o instanceof Element)return!1;for(l=s;0!=l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!o.$$typeof)&&!e(o[c[l]],a[c[l]]))return!1;return!0}return o!=o&&a!=a}(e,o)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},9705:(e,t,r)=>{"use strict";let n,i;r.r(t),r.d(t,{NIL:()=>P,parse:()=>v,stringify:()=>h,v1:()=>g,v3:()=>E,v4:()=>S,v5:()=>_,validate:()=>u,version:()=>C});var o=r(6113),a=r.n(o);let s=new Uint8Array(256),l=s.length;function c(){return l>s.length-16&&(a().randomFillSync(s),l=0),s.slice(l,l+=16)}let d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=function(e){return"string"==typeof e&&d.test(e)},p=[];for(let e=0;e<256;++e)p.push((e+256).toString(16).slice(1));function f(e,t=0){return p[e[t+0]]+p[e[t+1]]+p[e[t+2]]+p[e[t+3]]+"-"+p[e[t+4]]+p[e[t+5]]+"-"+p[e[t+6]]+p[e[t+7]]+"-"+p[e[t+8]]+p[e[t+9]]+"-"+p[e[t+10]]+p[e[t+11]]+p[e[t+12]]+p[e[t+13]]+p[e[t+14]]+p[e[t+15]]}let h=function(e,t=0){let r=f(e,t);if(!u(r))throw TypeError("Stringified UUID is invalid");return r},m=0,y=0,g=function(e,t,r){let o=t&&r||0,a=t||Array(16),s=(e=e||{}).node||n,l=void 0!==e.clockseq?e.clockseq:i;if(null==s||null==l){let t=e.random||(e.rng||c)();null==s&&(s=n=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==l&&(l=i=(t[6]<<8|t[7])&16383)}let d=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:y+1,p=d-m+(u-y)/1e4;if(p<0&&void 0===e.clockseq&&(l=l+1&16383),(p<0||d>m)&&void 0===e.nsecs&&(u=0),u>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");m=d,y=u,i=l;let h=((268435455&(d+=122192928e5))*1e4+u)%4294967296;a[o++]=h>>>24&255,a[o++]=h>>>16&255,a[o++]=h>>>8&255,a[o++]=255&h;let g=d/4294967296*1e4&268435455;a[o++]=g>>>8&255,a[o++]=255&g,a[o++]=g>>>24&15|16,a[o++]=g>>>16&255,a[o++]=l>>>8|128,a[o++]=255&l;for(let e=0;e<6;++e)a[o+e]=s[e];return t||f(a)},v=function(e){let t;if(!u(e))throw TypeError("Invalid UUID");let r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function b(e,t,r){function n(e,n,i,o){var a;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=v(n)),(null===(a=n)||void 0===a?void 0:a.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),(s=r(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,i){o=o||0;for(let e=0;e<16;++e)i[o+e]=s[e];return i}return f(s)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}let E=b("v3",48,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),a().createHash("md5").update(e).digest()}),w={randomUUID:a().randomUUID},S=function(e,t,r){if(w.randomUUID&&!t&&!e)return w.randomUUID();let n=(e=e||{}).random||(e.rng||c)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return f(n)},_=b("v5",80,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),a().createHash("sha1").update(e).digest()}),P="00000000-0000-0000-0000-000000000000",C=function(e){if(!u(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},1362:(e,t,r)=>{"use strict";r.d(t,{O:()=>o});var n=r(4044),i=r(3218);if(!i.vc.SUPABASE_URL||!i.vc.SUPABASE_ANON_KEY)throw Error("Missing required Supabase configuration");let o=(0,n.eI)(i.vc.SUPABASE_URL,i.vc.SUPABASE_ANON_KEY)},3218:(e,t,r)=>{"use strict";r.d(t,{Ho:()=>p,vc:()=>h,aC:()=>f});var n=r(8799);let i=n.z.enum(["collector","business"]),o=n.z.enum(["active","used","expired"]),a=n.z.enum(["credit","coupon"]),s=n.z.object({latitude:n.z.number(),longitude:n.z.number()});n.z.object({id:n.z.string().uuid(),email:n.z.string().email(),name:n.z.string(),phone:n.z.string().optional(),role:i,location:s.optional(),createdAt:n.z.date(),updatedAt:n.z.date()}),n.z.object({id:n.z.string().uuid(),userId:n.z.string().uuid(),containerId:n.z.string(),timestamp:n.z.date(),location:s,batteryType:n.z.string(),certificateId:n.z.string().uuid().optional(),createdAt:n.z.date()}),n.z.object({id:n.z.string().uuid(),recyclingRecordId:n.z.string().uuid(),userId:n.z.string().uuid(),businessId:n.z.string().uuid().optional(),issueDate:n.z.date(),validUntil:n.z.date(),status:o,createdAt:n.z.date(),updatedAt:n.z.date()}),n.z.object({id:n.z.string().uuid(),userId:n.z.string().uuid(),type:a,amount:n.z.number(),shopifyProductId:n.z.string().optional(),expiryDate:n.z.date().optional(),status:o,createdAt:n.z.date(),updatedAt:n.z.date()});var l=r(931),c=r(958),d=r(1362);let u=(0,c.createContext)({session:null,user:null,loading:!0,error:null}),p=({children:e})=>{let[t,r]=(0,c.useState)(null),[n,i]=(0,c.useState)(null),[o,a]=(0,c.useState)(!0),[s,p]=(0,c.useState)(null);return(0,c.useEffect)(()=>{d.O.auth.getSession().then(({data:{session:e},error:t})=>{t&&(console.error("Error getting session:",t),p(t.message)),console.log("Initial session:",e),r(e),i(e?.user??null),a(!1)});let{data:{subscription:e}}=d.O.auth.onAuthStateChange(async(e,t)=>{if(console.log("Auth state change event:",e),console.log("New session:",t),r(t),i(t?.user??null),a(!1),t?.user){let{error:e}=await d.O.auth.getUser();e?(console.error("Error verifying user:",e),p(e.message)):p(null)}});return()=>e.unsubscribe()},[]),l.jsx(u.Provider,{value:{session:t,user:n,loading:o,error:s},children:e})},f=()=>{let e=(0,c.useContext)(u);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},h={SUPABASE_URL:process.env.NEXT_PUBLIC_SUPABASE_URL,SUPABASE_ANON_KEY:process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY}},1350:(e,t,r)=>{"use strict";let n;r.r(t),r.d(t,{EcoCuponManager:()=>rB});var i,o=r(931),a=r(958),s=r.n(a),l=r(1362);r(5384);var c=r(9396),d=r(8799),u={SHOPIFY_API_KEY:process.env.NEXT_PUBLIC_SHOPIFY_API_KEY||"",SHOPIFY_API_SECRET:process.env.SHOPIFY_API_SECRET||"",SHOPIFY_ACCESS_TOKEN:process.env.SHOPIFY_ACCESS_TOKEN||"",SHOPIFY_SHOP_NAME:process.env.NEXT_PUBLIC_SHOPIFY_SHOP_NAME||""},p=d.z.object({code:d.z.string().min(3).max(50).regex(/^[A-Z0-9-_]+$/),discountType:d.z.enum(["percentage","fixed_amount"]),discountValue:d.z.number().positive().max(100),minPurchaseAmount:d.z.number().positive().optional(),maxDiscountAmount:d.z.number().positive().optional(),startDate:d.z.date(),expiryDate:d.z.date(),usageLimit:d.z.number().int().positive().optional(),userId:d.z.string().uuid()}),f=class e{constructor(){if(!u.SHOPIFY_API_KEY||!u.SHOPIFY_API_SECRET||!u.SHOPIFY_ACCESS_TOKEN)throw Error("Missing required Shopify configuration");this.shopify=(0,c.shopifyApi)({apiKey:u.SHOPIFY_API_KEY,apiSecretKey:u.SHOPIFY_API_SECRET,scopes:["write_discounts"],hostName:u.SHOPIFY_SHOP_NAME,isEmbeddedApp:!0,apiVersion:c.ApiVersion.January24})}static getInstance(){return e.instance||(e.instance=new e),e.instance}async createEcoCupon(e){try{let t=p.parse(e);if(t.expiryDate<=t.startDate)throw Error("La fecha de expiraci\xf3n debe ser posterior a la fecha de inicio");let r=new this.shopify.clients.Rest({session:new c.Session({id:"",shop:u.SHOPIFY_SHOP_NAME,state:"",isOnline:!0,accessToken:u.SHOPIFY_ACCESS_TOKEN})}),n=await r.post({path:"price_rules",data:{price_rule:{title:`EcoCupon - ${t.code}`,target_type:"line_item",target_selection:"all",allocation_method:"across",value_type:"percentage"===t.discountType?"percentage":"fixed_amount",value:-t.discountValue,customer_selection:"all",starts_at:t.startDate.toISOString(),ends_at:t.expiryDate.toISOString(),usage_limit:t.usageLimit,prerequisite_subtotal_range:t.minPurchaseAmount?{greater_than_or_equal_to:t.minPurchaseAmount}:void 0}}}),{data:i,error:o}=await l.O.from("ecocupons").insert([{code:t.code,discount_type:t.discountType,discount_value:t.discountValue,min_purchase_amount:t.minPurchaseAmount,max_discount_amount:t.maxDiscountAmount,start_date:t.startDate.toISOString(),expiry_date:t.expiryDate.toISOString(),usage_limit:t.usageLimit,user_id:t.userId,shopify_price_rule_id:n.body.price_rule.id}]).select().single();if(o)throw o;return i}catch(e){throw console.error("Error creating EcoCupon:",e),e}}async validateEcoCupon(e){try{let t=e.trim().toUpperCase();if(!/^[A-Z0-9-_]+$/.test(t))return{valid:!1,message:"C\xf3digo inv\xe1lido"};let{data:r,error:n}=await l.O.from("ecocupons").select("*").eq("code",t).eq("status","active").single();if(n)throw n;if(!r)return{valid:!1,message:"Cup\xf3n no encontrado"};if(r.expiry_date&&new Date(r.expiry_date)<new Date)return await this.deactivateEcoCupon(r.id),{valid:!1,message:"Cup\xf3n expirado"};if(r.usage_limit&&r.times_used>=r.usage_limit)return await this.deactivateEcoCupon(r.id),{valid:!1,message:"Cup\xf3n alcanz\xf3 el l\xedmite de uso"};return{valid:!0,cupon:r}}catch(e){throw console.error("Error validating eco cupon:",e),e}}async deactivateEcoCupon(e){try{if(!/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e))throw Error("Invalid cupon ID format");let{data:t,error:r}=await l.O.from("ecocupons").update({status:"inactive"}).eq("id",e).select().single();if(r)throw r;if(t.shopify_price_rule_id){let e=new this.shopify.clients.Rest({session:new c.Session({id:"",shop:u.SHOPIFY_SHOP_NAME,state:"",isOnline:!0,accessToken:u.SHOPIFY_ACCESS_TOKEN})});await e.put({path:`price_rules/${t.shopify_price_rule_id}`,data:{price_rule:{status:"disabled"}}})}return t}catch(e){throw console.error("Error deactivating eco cupon:",e),e}}async incrementCuponUsage(e){try{let t=e.trim().toUpperCase();if(!/^[A-Z0-9-_]+$/.test(t))throw Error("Invalid coupon code format");let{data:r,error:n}=await l.O.from("ecocupons").update({times_used:{increment:1}}).eq("code",t).select().single();if(n)throw n;return r.usage_limit&&r.times_used>=r.usage_limit&&await this.deactivateEcoCupon(r.id),r}catch(e){throw console.error("Error incrementing cupon usage:",e),e}}async getEcoCupons(e){try{let{data:t,error:r}=await l.O.from("ecocupons").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(r)throw r;return t}catch(e){throw console.error("Error getting EcoCupons:",e),e}}async getEcoCupon(e){try{let{data:t,error:r}=await l.O.from("ecocupons").select("*").eq("code",e).single();if(r)throw r;return t}catch(e){throw console.error("Error getting EcoCupon:",e),e}}async updateEcoCupon(e,t){try{let{data:r,error:n}=await l.O.from("ecocupons").update(t).eq("code",e).select().single();if(n)throw n;return r}catch(e){throw console.error("Error updating EcoCupon:",e),e}}async deleteEcoCupon(e){try{let{error:t}=await l.O.from("ecocupons").delete().eq("code",e);if(t)throw t}catch(e){throw console.error("Error deleting EcoCupon:",e),e}}},h=r(8504);let m=(0,a.createContext)(!1);var y=r(8025);function g(e){let t=typeof e;return null!=e&&("object"===t||"function"===t)}function v(...e){return e.filter(Boolean).join(" ")}function b(e,t){return`${e}${t.charAt(0).toUpperCase()}${t.slice(1)}`}function E(e){let t=Object.entries(e).filter(([e,t])=>null!=t);return t.length?Object.fromEntries(t):void 0}function w(e,t,r,n){return n?Object.fromEntries(Object.entries(g(n)?Object.fromEntries(Object.entries(n).map(([e,t])=>[e,`var(--p-${r}-${t})`])):{[y.vi[0]]:`var(--p-${r}-${n})`}).map(([r,n])=>[`--pc-${e}-${t}-${r}`,n])):{}}function S(e,t,r){return r?g(r)?Object.fromEntries(Object.entries(r).map(([r,n])=>[`--pc-${e}-${t}-${r}`,n])):{[`--pc-${e}-${t}-${y.vi[0]}`]:r}:{}}function _(e){let{as:t="div",bevel:r=!0,borderRadius:n,boxShadow:i,children:o,zIndex:a="0"}=e;return s().createElement(t,{className:"Polaris-ShadowBevel",style:{"--pc-shadow-bevel-z-index":a,...S("shadow-bevel","content",P(r,e=>e?'""':"none")),...S("shadow-bevel","box-shadow",P(r,e=>e?`var(--p-shadow-${i})`:"none")),...S("shadow-bevel","border-radius",P(r,e=>e?`var(--p-border-radius-${n})`:"var(--p-border-radius-0)"))}},o)}function P(e,t){return"boolean"==typeof e?t(e):Object.fromEntries(Object.entries(e).map(([e,r])=>[e,t(r)]))}var C={listReset:"Polaris-Box--listReset",Box:"Polaris-Box",visuallyHidden:"Polaris-Box--visuallyHidden",printHidden:"Polaris-Box--printHidden"};let x=(0,a.forwardRef)(({as:e="div",background:t,borderColor:r,borderStyle:n,borderWidth:i,borderBlockStartWidth:o,borderBlockEndWidth:a,borderInlineStartWidth:l,borderInlineEndWidth:c,borderRadius:d,borderEndStartRadius:u,borderEndEndRadius:p,borderStartStartRadius:f,borderStartEndRadius:h,children:m,color:y,id:g,minHeight:b,minWidth:S,maxWidth:_,overflowX:P,overflowY:x,outlineColor:A,outlineStyle:k,outlineWidth:T,padding:O,paddingBlock:I,paddingBlockStart:j,paddingBlockEnd:M,paddingInline:R,paddingInlineStart:H,paddingInlineEnd:D,role:N,shadow:W,tabIndex:K,width:J,printHidden:$,visuallyHidden:F,position:U,insetBlockStart:B,insetBlockEnd:L,insetInlineStart:q,insetInlineEnd:z,zIndex:V,opacity:G,...X},Y)=>{let Z={"--pc-box-color":y?`var(--p-color-${y})`:void 0,"--pc-box-background":t?`var(--p-color-${t})`:void 0,"--pc-box-border-color":r?"transparent"===r?"transparent":`var(--p-color-${r})`:void 0,"--pc-box-border-style":n||(r||i||o||a||l||c?"solid":void 0),"--pc-box-border-radius":d?`var(--p-border-radius-${d})`:void 0,"--pc-box-border-end-start-radius":u?`var(--p-border-radius-${u})`:void 0,"--pc-box-border-end-end-radius":p?`var(--p-border-radius-${p})`:void 0,"--pc-box-border-start-start-radius":f?`var(--p-border-radius-${f})`:void 0,"--pc-box-border-start-end-radius":h?`var(--p-border-radius-${h})`:void 0,"--pc-box-border-width":i?`var(--p-border-width-${i})`:void 0,"--pc-box-border-block-start-width":o?`var(--p-border-width-${o})`:void 0,"--pc-box-border-block-end-width":a?`var(--p-border-width-${a})`:void 0,"--pc-box-border-inline-start-width":l?`var(--p-border-width-${l})`:void 0,"--pc-box-border-inline-end-width":c?`var(--p-border-width-${c})`:void 0,"--pc-box-min-height":b,"--pc-box-min-width":S,"--pc-box-max-width":_,"--pc-box-outline-color":A?`var(--p-color-${A})`:void 0,"--pc-box-outline-style":k||(A||T?"solid":void 0),"--pc-box-outline-width":T?`var(--p-border-width-${T})`:void 0,"--pc-box-overflow-x":P,"--pc-box-overflow-y":x,...w("box","padding-block-start","space",j||I||O),...w("box","padding-block-end","space",M||I||O),...w("box","padding-inline-start","space",H||R||O),...w("box","padding-inline-end","space",D||R||O),"--pc-box-shadow":W?`var(--p-shadow-${W})`:void 0,"--pc-box-width":J,position:U,"--pc-box-inset-block-start":B?`var(--p-space-${B})`:void 0,"--pc-box-inset-block-end":L?`var(--p-space-${L})`:void 0,"--pc-box-inset-inline-start":q?`var(--p-space-${q})`:void 0,"--pc-box-inset-inline-end":z?`var(--p-space-${z})`:void 0,zIndex:V,opacity:G},Q=v(C.Box,F&&C.visuallyHidden,$&&C.printHidden,"ul"===e&&C.listReset);return s().createElement(e,{className:Q,id:g,ref:Y,style:E(Z),role:N,tabIndex:K,...X},m)});x.displayName="Box";let A=({children:e,background:t="bg-surface",padding:r={xs:"400"},roundedAbove:n="sm"})=>{let i=!!(0,h.kC)()[`${n}Up`];return s().createElement(m.Provider,{value:!0},s().createElement(_,{boxShadow:"100",borderRadius:i?"300":"0",zIndex:"32"},s().createElement(x,{background:t,padding:r,overflowX:"clip",overflowY:"clip",minHeight:"100%"},e)))};var k={BlockStack:"Polaris-BlockStack",listReset:"Polaris-BlockStack--listReset",fieldsetReset:"Polaris-BlockStack--fieldsetReset"};let T=({as:e="div",children:t,align:r,inlineAlign:n,gap:i,id:o,reverseOrder:a=!1,...l})=>{let c=v(k.BlockStack,("ul"===e||"ol"===e)&&k.listReset,"fieldset"===e&&k.fieldsetReset),d={"--pc-block-stack-align":r?`${r}`:null,"--pc-block-stack-inline-align":n?`${n}`:null,"--pc-block-stack-order":a?"column-reverse":"column",...w("block-stack","gap","space",i)};return s().createElement(e,{className:c,id:o,style:E(d),...l},t)};var O=function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),a.createElement("path",{d:"M12.72 13.78a.75.75 0 1 0 1.06-1.06l-2.72-2.72 2.72-2.72a.75.75 0 0 0-1.06-1.06l-2.72 2.72-2.72-2.72a.75.75 0 0 0-1.06 1.06l2.72 2.72-2.72 2.72a.75.75 0 1 0 1.06 1.06l2.72-2.72 2.72 2.72Z"}))};O.displayName="XIcon";let I=(0,a.createContext)(!1);var j=r(7885);function M(e,t,r,n){let i=(0,a.useRef)(t),o=(0,a.useRef)(n);(0,j.L)(()=>{i.current=t},[t]),(0,j.L)(()=>{o.current=n},[n]),(0,a.useEffect)(()=>{let t;if(!("string"==typeof e&&null!==r))return;if(void 0===r)t=window;else if("current"in r){if(null===r.current)return;t=r.current}else t=r;let n=o.current,a=e=>i.current(e);return t.addEventListener(e,a,n),()=>{t.removeEventListener(e,a,n)}},[e,r])}var R={Banner:"Polaris-Banner",keyFocused:"Polaris-Banner--keyFocused",withinContentContainer:"Polaris-Banner--withinContentContainer",withinPage:"Polaris-Banner--withinPage",DismissIcon:"Polaris-Banner__DismissIcon","text-success-on-bg-fill":"Polaris-Banner--textSuccessOnBgFill","text-success":"Polaris-Banner__text--success","text-warning-on-bg-fill":"Polaris-Banner--textWarningOnBgFill","text-warning":"Polaris-Banner__text--warning","text-critical-on-bg-fill":"Polaris-Banner--textCriticalOnBgFill","text-critical":"Polaris-Banner__text--critical","text-info-on-bg-fill":"Polaris-Banner--textInfoOnBgFill","text-info":"Polaris-Banner__text--info","icon-secondary":"Polaris-Banner__icon--secondary"},H=function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),a.createElement("path",{fillRule:"evenodd",d:"M15.78 5.97a.75.75 0 0 1 0 1.06l-6.5 6.5a.75.75 0 0 1-1.06 0l-3.25-3.25a.75.75 0 1 1 1.06-1.06l2.72 2.72 5.97-5.97a.75.75 0 0 1 1.06 0Z"}))};H.displayName="CheckIcon";var D=function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),a.createElement("path",{d:"M10 6.75a.75.75 0 0 1 .75.75v3.5a.75.75 0 1 1-1.5 0v-3.5a.75.75 0 0 1 .75-.75Z"}),a.createElement("path",{d:"M11 13.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"}),a.createElement("path",{fillRule:"evenodd",d:"M10 3.5c-1.045 0-1.784.702-2.152 1.447a449.26 449.26 0 0 1-2.005 3.847l-.028.052a403.426 403.426 0 0 0-2.008 3.856c-.372.752-.478 1.75.093 2.614.57.863 1.542 1.184 2.464 1.184h7.272c.922 0 1.895-.32 2.464-1.184.57-.864.465-1.862.093-2.614-.21-.424-1.113-2.147-2.004-3.847l-.032-.061a429.497 429.497 0 0 1-2.005-3.847c-.368-.745-1.107-1.447-2.152-1.447Zm-.808 2.112c.404-.816 1.212-.816 1.616 0 .202.409 1.112 2.145 2.022 3.88a418.904 418.904 0 0 1 2.018 3.875c.404.817 0 1.633-1.212 1.633h-7.272c-1.212 0-1.617-.816-1.212-1.633.202-.408 1.113-2.147 2.023-3.883a421.932 421.932 0 0 0 2.017-3.872Z"}))};D.displayName="AlertTriangleIcon";var N=function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),a.createElement("path",{d:"M10 6a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5a.75.75 0 0 1 .75-.75Z"}),a.createElement("path",{d:"M11 13a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"}),a.createElement("path",{fillRule:"evenodd",d:"M11.237 3.177a1.75 1.75 0 0 0-2.474 0l-5.586 5.585a1.75 1.75 0 0 0 0 2.475l5.586 5.586a1.75 1.75 0 0 0 2.474 0l5.586-5.586a1.75 1.75 0 0 0 0-2.475l-5.586-5.585Zm-1.414 1.06a.25.25 0 0 1 .354 0l5.586 5.586a.25.25 0 0 1 0 .354l-5.586 5.585a.25.25 0 0 1-.354 0l-5.586-5.585a.25.25 0 0 1 0-.354l5.586-5.586Z"}))};N.displayName="AlertDiamondIcon";var W=function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),a.createElement("path",{d:"M10 14a.75.75 0 0 1-.75-.75v-3.5a.75.75 0 0 1 1.5 0v3.5a.75.75 0 0 1-.75.75Z"}),a.createElement("path",{d:"M9 7a1 1 0 1 1 2 0 1 1 0 0 1-2 0Z"}),a.createElement("path",{fillRule:"evenodd",d:"M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Zm-1.5 0a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0Z"}))};W.displayName="InfoIcon";let K={success:{withinPage:{background:"bg-fill-success",text:"text-success-on-bg-fill",icon:"text-success-on-bg-fill"},withinContentContainer:{background:"bg-surface-success",text:"text-success",icon:"text-success"},icon:H},warning:{withinPage:{background:"bg-fill-warning",text:"text-warning-on-bg-fill",icon:"text-warning-on-bg-fill"},withinContentContainer:{background:"bg-surface-warning",text:"text-warning",icon:"text-warning"},icon:D},critical:{withinPage:{background:"bg-fill-critical",text:"text-critical-on-bg-fill",icon:"text-critical-on-bg-fill"},withinContentContainer:{background:"bg-surface-critical",text:"text-critical",icon:"text-critical"},icon:N},info:{withinPage:{background:"bg-fill-info",text:"text-info-on-bg-fill",icon:"text-info-on-bg-fill"},withinContentContainer:{background:"bg-surface-info",text:"text-info",icon:"text-info"},icon:W}},J=(e,t)=>e===t;var $={ButtonGroup:"Polaris-ButtonGroup",Item:"Polaris-ButtonGroup__Item","Item-plain":"Polaris-ButtonGroup__Item--plain",variantSegmented:"Polaris-ButtonGroup--variantSegmented","Item-focused":"Polaris-ButtonGroup__Item--focused",fullWidth:"Polaris-ButtonGroup--fullWidth",extraTight:"Polaris-ButtonGroup--extraTight",tight:"Polaris-ButtonGroup--tight",loose:"Polaris-ButtonGroup--loose",noWrap:"Polaris-ButtonGroup--noWrap"};function F(e){let[t,r]=(0,a.useState)(e);return{value:t,toggle:(0,a.useCallback)(()=>r(e=>!e),[]),setTrue:(0,a.useCallback)(()=>r(!0),[]),setFalse:(0,a.useCallback)(()=>r(!1),[])}}function U({button:e}){let{value:t,setTrue:r,setFalse:n}=F(!1),i=v($.Item,t&&$["Item-focused"],"plain"===e.props.variant&&$["Item-plain"]);return s().createElement("div",{className:i,onFocus:r,onBlur:n},e)}function B({children:e,gap:t,variant:r,fullWidth:n,connectedTop:i,noWrap:o}){let l=v($.ButtonGroup,t&&$[t],r&&$[b("variant",r)],n&&$.fullWidth,o&&$.noWrap),c=(function(e,t=()=>!0){return a.Children.toArray(e).filter(e=>(0,a.isValidElement)(e)&&t(e))})(e).map((e,t)=>s().createElement(U,{button:e,key:t}));return s().createElement("div",{className:l,"data-buttongroup-variant":r,"data-buttongroup-connected-top":i,"data-buttongroup-full-width":n,"data-buttongroup-no-wrap":o},c)}class L extends Error{constructor(e=""){super(`${e?`${e} `:e}Your application must be wrapped in an <AppProvider> component. See https://polaris.shopify.com/components/app-provider for implementation instructions.`),this.name="MissingAppProviderError"}}var q=r(8611);function z(){let e=(0,a.useContext)(q.O);if(!e)throw new L("No i18n was provided.");return e}var V={root:"Polaris-Text--root",block:"Polaris-Text--block",truncate:"Polaris-Text--truncate",visuallyHidden:"Polaris-Text--visuallyHidden",start:"Polaris-Text--start",center:"Polaris-Text--center",end:"Polaris-Text--end",justify:"Polaris-Text--justify",base:"Polaris-Text--base",inherit:"Polaris-Text--inherit",disabled:"Polaris-Text--disabled",success:"Polaris-Text--success",critical:"Polaris-Text--critical",caution:"Polaris-Text--caution",subdued:"Polaris-Text--subdued",magic:"Polaris-Text--magic","magic-subdued":"Polaris-Text__magic--subdued","text-inverse":"Polaris-Text__text--inverse","text-inverse-secondary":"Polaris-Text--textInverseSecondary",headingXs:"Polaris-Text--headingXs",headingSm:"Polaris-Text--headingSm",headingMd:"Polaris-Text--headingMd",headingLg:"Polaris-Text--headingLg",headingXl:"Polaris-Text--headingXl",heading2xl:"Polaris-Text--heading2xl",heading3xl:"Polaris-Text--heading3xl",bodyXs:"Polaris-Text--bodyXs",bodySm:"Polaris-Text--bodySm",bodyMd:"Polaris-Text--bodyMd",bodyLg:"Polaris-Text--bodyLg",regular:"Polaris-Text--regular",medium:"Polaris-Text--medium",semibold:"Polaris-Text--semibold",bold:"Polaris-Text--bold",break:"Polaris-Text--break",numeric:"Polaris-Text--numeric","line-through":"Polaris-Text__line--through"};let G=({alignment:e,as:t,breakWord:r,children:n,tone:i,fontWeight:o,id:a,numeric:l=!1,truncate:c=!1,variant:d,visuallyHidden:u=!1,textDecorationLine:p})=>{let f=t||(u?"span":"p"),h=v(V.root,d&&V[d],o&&V[o],(e||c)&&V.block,e&&V[e],r&&V.break,i&&V[i],l&&V.numeric,c&&V.truncate,u&&V.visuallyHidden,p&&V[p]);return s().createElement(f,Object.assign({className:h},a&&{id:a}),n)};var X={Icon:"Polaris-Icon",toneInherit:"Polaris-Icon--toneInherit",toneBase:"Polaris-Icon--toneBase",toneSubdued:"Polaris-Icon--toneSubdued",toneCaution:"Polaris-Icon--toneCaution",toneWarning:"Polaris-Icon--toneWarning",toneCritical:"Polaris-Icon--toneCritical",toneInteractive:"Polaris-Icon--toneInteractive",toneInfo:"Polaris-Icon--toneInfo",toneSuccess:"Polaris-Icon--toneSuccess",tonePrimary:"Polaris-Icon--tonePrimary",toneEmphasis:"Polaris-Icon--toneEmphasis",toneMagic:"Polaris-Icon--toneMagic",toneTextCaution:"Polaris-Icon--toneTextCaution",toneTextWarning:"Polaris-Icon--toneTextWarning",toneTextCritical:"Polaris-Icon--toneTextCritical",toneTextInfo:"Polaris-Icon--toneTextInfo",toneTextPrimary:"Polaris-Icon--toneTextPrimary",toneTextSuccess:"Polaris-Icon--toneTextSuccess",toneTextMagic:"Polaris-Icon--toneTextMagic",Svg:"Polaris-Icon__Svg",Img:"Polaris-Icon__Img",Placeholder:"Polaris-Icon__Placeholder"};function Y({source:e,tone:t,accessibilityLabel:r}){let n;n="function"==typeof e?"function":"placeholder"===e?"placeholder":"external";let i=v(X.Icon,t&&X[b("tone",t)]),{mdDown:o}=(0,h.kC)(),a={function:s().createElement(e,Object.assign({className:X.Svg,focusable:"false","aria-hidden":"true"},o?{viewBox:"1 1 18 18"}:{})),placeholder:s().createElement("div",{className:X.Placeholder}),external:s().createElement("img",{className:X.Img,src:`data:image/svg+xml;utf8,${e}`,alt:"","aria-hidden":"true"})};return s().createElement("span",{className:i},r&&s().createElement(G,{as:"span",visuallyHidden:!0},r),a[n])}var Z=function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),a.createElement("path",{fillRule:"evenodd",d:"M14.53 12.28a.75.75 0 0 1-1.06 0l-3.47-3.47-3.47 3.47a.75.75 0 0 1-1.06-1.06l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06Z"}))};Z.displayName="ChevronUpIcon";var Q=function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),a.createElement("path",{fillRule:"evenodd",d:"M5.72 8.47a.75.75 0 0 1 1.06 0l3.47 3.47 3.47-3.47a.75.75 0 1 1 1.06 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 0-1.06Z"}))};Q.displayName="ChevronDownIcon";var ee=function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),a.createElement("path",{d:"M10.884 4.323a1.25 1.25 0 0 0-1.768 0l-2.646 2.647a.75.75 0 0 0 1.06 1.06l2.47-2.47 2.47 2.47a.75.75 0 1 0 1.06-1.06l-2.646-2.647Z"}),a.createElement("path",{d:"m13.53 13.03-2.646 2.647a1.25 1.25 0 0 1-1.768 0l-2.646-2.647a.75.75 0 0 1 1.06-1.06l2.47 2.47 2.47-2.47a.75.75 0 0 1 1.06 1.06Z"}))};ee.displayName="SelectIcon";let et='a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not([aria-disabled="true"]):not([tabindex="-1"]):not(:disabled),*[tabindex]',er='a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not([aria-disabled="true"]):not([tabindex="-1"]):not(:disabled),*[tabindex]:not([tabindex="-1"])',en=({currentTarget:e})=>e.blur();function ei(e,t=!0){return!t&&el(e,et)?e:e.querySelector(et)}function eo(e,t=!0){ei(e,t)?.focus()}function ea(e,t=!0){return!t&&el(e,er)?e:e.querySelector(er)}function es(e,t=!0){if(!t&&el(e,er))return e;let r=e.querySelectorAll(er);return r[r.length-1]}function el(e,t){if(e.matches)return e.matches(t);let r=(e.ownerDocument||document).querySelectorAll(t),n=r.length;for(;--n>=0&&r.item(n)!==e;)return n>-1}var ec={Button:"Polaris-Button",disabled:"Polaris-Button--disabled",pressed:"Polaris-Button--pressed",variantPrimary:"Polaris-Button--variantPrimary",variantSecondary:"Polaris-Button--variantSecondary",variantTertiary:"Polaris-Button--variantTertiary",variantPlain:"Polaris-Button--variantPlain",removeUnderline:"Polaris-Button--removeUnderline",variantMonochromePlain:"Polaris-Button--variantMonochromePlain",toneSuccess:"Polaris-Button--toneSuccess",toneCritical:"Polaris-Button--toneCritical",sizeMicro:"Polaris-Button--sizeMicro",sizeSlim:"Polaris-Button--sizeSlim",sizeMedium:"Polaris-Button--sizeMedium",sizeLarge:"Polaris-Button--sizeLarge",textAlignCenter:"Polaris-Button--textAlignCenter",textAlignStart:"Polaris-Button--textAlignStart",textAlignLeft:"Polaris-Button--textAlignLeft",textAlignEnd:"Polaris-Button--textAlignEnd",textAlignRight:"Polaris-Button--textAlignRight",fullWidth:"Polaris-Button--fullWidth",iconOnly:"Polaris-Button--iconOnly",iconWithText:"Polaris-Button--iconWithText",disclosure:"Polaris-Button--disclosure",loading:"Polaris-Button--loading",pressable:"Polaris-Button--pressable",hidden:"Polaris-Button--hidden",Icon:"Polaris-Button__Icon",Spinner:"Polaris-Button__Spinner"},ed=r(9277),eu={Spinner:"Polaris-Spinner",sizeSmall:"Polaris-Spinner--sizeSmall",sizeLarge:"Polaris-Spinner--sizeLarge"};function ep({size:e="large",accessibilityLabel:t,hasFocusableParent:r}){let n=(0,ed.u)(),i=v(eu.Spinner,e&&eu[b("size",e)]),o="large"===e?s().createElement("svg",{viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg"},s().createElement("path",{d:"M15.542 1.487A21.507 21.507 0 00.5 22c0 11.874 9.626 21.5 21.5 21.5 9.847 0 18.364-6.675 20.809-16.072a1.5 1.5 0 00-2.904-.756C37.803 34.755 30.473 40.5 22 40.5 11.783 40.5 3.5 32.217 3.5 22c0-8.137 5.3-15.247 12.942-17.65a1.5 1.5 0 10-.9-2.863z"})):s().createElement("svg",{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},s().createElement("path",{d:"M7.229 1.173a9.25 9.25 0 1011.655 11.412 1.25 1.25 0 10-2.4-.698 6.75 6.75 0 11-8.506-8.329 1.25 1.25 0 10-.75-2.385z"})),a={...!r&&{role:"status"}},l=(n||!r)&&s().createElement(G,{as:"span",visuallyHidden:!0},t);return s().createElement(s().Fragment,null,s().createElement("span",{className:i},o),s().createElement("span",a,l))}var ef=r(3262),eh=r(271);let em=(0,a.memo)((0,a.forwardRef)(function(e,t){let r;let n=(0,a.useContext)(eh.F);if(n)return s().createElement(n,Object.assign({},ef.Wo.props,e,{ref:t}));let{external:i,url:o,target:l,...c}=e,d="_blank"===(r=i?"_blank":l??void 0)?"noopener noreferrer":void 0;return s().createElement("a",Object.assign({target:r},c,{href:o,rel:d},ef.Wo.props,{ref:t}))}));function ey({id:e,children:t,className:r,url:n,external:i,target:o,download:l,submit:c,disabled:d,loading:u,pressed:p,accessibilityLabel:f,role:h,ariaControls:m,ariaExpanded:y,ariaDescribedBy:g,ariaChecked:v,onClick:b,onFocus:E,onBlur:w,onKeyDown:S,onKeyPress:_,onKeyUp:P,onMouseEnter:C,onTouchStart:x,...A}){let k={id:e,className:r,"aria-label":f},T={...k,role:h,onClick:b,onFocus:E,onBlur:w,onMouseUp:en,onMouseEnter:C,onTouchStart:x},O=function(e,t){let r=(0,a.useCallback)(t=>{e&&(t.preventDefault(),t.stopPropagation())},[e]);return e?r:t}(d,b);return n?d?s().createElement("a",k,t):s().createElement(em,Object.assign({},T,{url:n,external:i,target:o,download:l},A),t):s().createElement("button",Object.assign({},T,{"aria-disabled":d,type:c?"submit":"button","aria-busy":!!u||void 0,"aria-controls":m,"aria-expanded":y,"aria-describedby":g,"aria-checked":v,"aria-pressed":p,onKeyDown:S,onKeyUp:P,onKeyPress:_,onClick:O,tabIndex:d?-1:void 0},A),t)}function eg({id:e,children:t,url:r,disabled:n,external:i,download:o,target:a,submit:l,loading:c,pressed:d,accessibilityLabel:u,role:p,ariaControls:f,ariaExpanded:m,ariaDescribedBy:y,ariaChecked:g,onClick:E,onFocus:w,onBlur:S,onKeyDown:_,onKeyPress:P,onKeyUp:C,onMouseEnter:x,onTouchStart:A,onPointerDown:k,icon:T,disclosure:O,removeUnderline:I,size:j="medium",textAlign:M="center",fullWidth:R,dataPrimaryLink:H,tone:D,variant:N="secondary"}){let W=z(),K=n||c,{mdUp:J}=(0,h.kC)(),$=v(ec.Button,ec.pressable,ec[b("variant",N)],ec[b("size",j)],ec[b("textAlign",M)],R&&ec.fullWidth,O&&ec.disclosure,T&&t&&ec.iconWithText,T&&null==t&&ec.iconOnly,K&&ec.disabled,c&&ec.loading,d&&!n&&!r&&ec.pressed,I&&ec.removeUnderline,D&&ec[b("tone",D)]),F=O?s().createElement("span",{className:c?ec.hidden:ec.Icon},s().createElement(Y,{source:c?"placeholder":"select"===O?ee:"up"===O?Z:Q})):null,U="string"==typeof T||"object"==typeof T&&T.body||"function"==typeof T?s().createElement(Y,{source:c?"placeholder":T}):T,B=U?s().createElement("span",{className:c?ec.hidden:ec.Icon},U):null,L=["plain","monochromePlain"].includes(N),q="medium";L?q="regular":"primary"===N&&(q=J?"medium":"semibold");let V="bodySm";("large"===j||L&&"micro"!==j)&&(V="bodyMd");let X=t?s().createElement(G,{as:"span",variant:V,fontWeight:q,key:n?"text-disabled":"text"},t):null,et=c?s().createElement("span",{className:ec.Spinner},s().createElement(ep,{size:"small",accessibilityLabel:W.translate("Polaris.Button.spinnerAccessibilityLabel")})):null;return s().createElement(ey,Object.assign({},{id:e,className:$,accessibilityLabel:u,ariaDescribedBy:y,role:p,onClick:E,onFocus:w,onBlur:S,onMouseUp:en,onMouseEnter:x,onTouchStart:A,"data-primary-link":H},{url:r,external:i,download:o,target:a},{submit:l,disabled:K,loading:c,ariaControls:f,ariaExpanded:m,ariaChecked:g,pressed:d,onKeyDown:_,onKeyUp:C,onKeyPress:P,onPointerDown:k}),et,B,X,F)}let ev=function({as:e="div",align:t,direction:r="row",blockAlign:n,gap:i,wrap:o=!0,children:a}){let l={"--pc-inline-stack-align":t,"--pc-inline-stack-block-align":n,"--pc-inline-stack-wrap":o?"wrap":"nowrap",...w("inline-stack","gap","space",i),...S("inline-stack","flex-direction",r)};return s().createElement(e,{className:"Polaris-InlineStack",style:l},a)},eb=(0,a.forwardRef)(function(e,t){let{tone:r,stopAnnouncements:n}=e,i=(0,a.useContext)(m),{wrapperRef:o,handleKeyUp:l,handleBlur:c,handleMouseUp:d,shouldShowFocus:u}=function(e){let t=(0,a.useRef)(null),[r,n]=(0,a.useState)(!1);return(0,a.useImperativeHandle)(e,()=>({focus:()=>{t.current?.focus(),n(!0)}}),[]),{wrapperRef:t,handleKeyUp:e=>{e.target===t.current&&n(!0)},handleBlur:()=>n(!1),handleMouseUp:e=>{e.currentTarget.blur(),n(!1)},shouldShowFocus:r}}(t),p=v(R.Banner,u&&R.keyFocused,i?R.withinContentContainer:R.withinPage);return s().createElement(I.Provider,{value:!0},s().createElement("div",{className:p,tabIndex:0,ref:o,role:"warning"===r||"critical"===r?"alert":"status","aria-live":n?"off":"polite",onMouseUp:d,onKeyUp:l,onBlur:c},s().createElement(eE,e)))});function eE({tone:e="info",icon:t,hideIcon:r,onDismiss:n,action:i,secondaryAction:o,title:l,children:c}){let d=z(),u=(0,a.useContext)(m),p=!l&&!u,f=Object.keys(K).includes(e)?e:"info",h=K[f][u?"withinContentContainer":"withinPage"],y={backgroundColor:h.background,textColor:h.text,bannerTitle:l?s().createElement(G,{as:"h2",variant:"headingSm",breakWord:!0},l):null,bannerIcon:r?null:s().createElement("span",{className:R[h.icon]},s().createElement(Y,{source:t??K[f].icon})),actionButtons:i||o?s().createElement(B,null,i&&s().createElement(eg,Object.assign({onClick:i.onAction},i),i.content),o&&s().createElement(eg,Object.assign({onClick:o.onAction},o),o.content)):null,dismissButton:n?s().createElement(eg,{variant:"tertiary",icon:s().createElement("span",{className:R[p?"icon-secondary":h.icon]},s().createElement(Y,{source:O})),onClick:n,accessibilityLabel:d.translate("Polaris.Banner.dismissButton")}):null},g=c?s().createElement(G,{as:"span",variant:"bodyMd"},c):null;return u?s().createElement(e_,y,g):p?s().createElement(eS,y,g):s().createElement(ew,y,g)}function ew({backgroundColor:e,textColor:t,bannerTitle:r,bannerIcon:n,actionButtons:i,dismissButton:o,children:a}){let{smUp:l}=(0,h.kC)(),c=a||i;return s().createElement(x,{width:"100%"},s().createElement(T,{align:"space-between"},s().createElement(x,{background:e,color:t,borderStartStartRadius:l?"300":void 0,borderStartEndRadius:l?"300":void 0,borderEndStartRadius:!c&&l?"300":void 0,borderEndEndRadius:!c&&l?"300":void 0,padding:"300"},s().createElement(ev,{align:"space-between",blockAlign:"center",gap:"200",wrap:!1},s().createElement(ev,{gap:"100",wrap:!1},n,r),o)),c&&s().createElement(x,{padding:{xs:"300",md:"400"},paddingBlockStart:"300"},s().createElement(T,{gap:"200"},s().createElement("div",null,a),i))))}function eS({backgroundColor:e,bannerIcon:t,actionButtons:r,dismissButton:n,children:i}){let[o,l]=(0,a.useState)("center"),c=(0,a.useRef)(null),d=(0,a.useRef)(null),u=(0,a.useRef)(null),p=(0,a.useCallback)(()=>{let e=c.current?.offsetHeight,t=d.current?.offsetHeight||u.current?.offsetHeight;e&&t&&(e>t?l("start"):l("center"))},[]);return(0,a.useEffect)(()=>p(),[p]),M("resize",p),s().createElement(x,{width:"100%",padding:"300",borderRadius:"300"},s().createElement(ev,{align:"space-between",blockAlign:o,wrap:!1},s().createElement(x,{width:"100%"},s().createElement(ev,{gap:"200",wrap:!1,blockAlign:o},t?s().createElement("div",{ref:d},s().createElement(x,{background:e,borderRadius:"200",padding:"100"},t)):null,s().createElement(x,{ref:c,width:"100%"},s().createElement(T,{gap:"200"},s().createElement("div",null,i),r)))),s().createElement("div",{ref:u,className:R.DismissIcon},n)))}function e_({backgroundColor:e,textColor:t,bannerTitle:r,bannerIcon:n,actionButtons:i,dismissButton:o,children:a}){return s().createElement(x,{width:"100%",background:e,padding:"200",borderRadius:"200",color:t},s().createElement(ev,{align:"space-between",blockAlign:"start",wrap:!1,gap:"200"},s().createElement(ev,{gap:"150",wrap:!1},n,s().createElement(x,{width:"100%"},s().createElement(T,{gap:"200"},s().createElement(T,{gap:"050"},r,s().createElement("div",null,a)),i))),o))}var eP=r(9828),eC=r.n(eP),ex=r(2333);function eA(e,t,r,n){return e>=t+("left"===n?0:30)&&e<=r-30}var ek={DataTable:"Polaris-DataTable",condensed:"Polaris-DataTable--condensed",Navigation:"Polaris-DataTable__Navigation",Pip:"Polaris-DataTable__Pip","Pip-visible":"Polaris-DataTable__Pip--visible",ScrollContainer:"Polaris-DataTable__ScrollContainer",Table:"Polaris-DataTable__Table",TableRow:"Polaris-DataTable__TableRow",Cell:"Polaris-DataTable__Cell",IncreasedTableDensity:"Polaris-DataTable__IncreasedTableDensity",ZebraStripingOnData:"Polaris-DataTable__ZebraStripingOnData",RowCountIsEven:"Polaris-DataTable__RowCountIsEven",ShowTotalsInFooter:"Polaris-DataTable__ShowTotalsInFooter","Cell-separate":"Polaris-DataTable__Cell--separate","Cell-firstColumn":"Polaris-DataTable__Cell--firstColumn","Cell-numeric":"Polaris-DataTable__Cell--numeric","Cell-truncated":"Polaris-DataTable__Cell--truncated","Cell-header":"Polaris-DataTable__Cell--header","Cell-sortable":"Polaris-DataTable__Cell--sortable","Heading-left":"Polaris-DataTable__Heading--left","Cell-verticalAlignTop":"Polaris-DataTable__Cell--verticalAlignTop","Cell-verticalAlignBottom":"Polaris-DataTable__Cell--verticalAlignBottom","Cell-verticalAlignMiddle":"Polaris-DataTable__Cell--verticalAlignMiddle","Cell-verticalAlignBaseline":"Polaris-DataTable__Cell--verticalAlignBaseline",hoverable:"Polaris-DataTable--hoverable","Cell-hovered":"Polaris-DataTable__Cell--hovered",Icon:"Polaris-DataTable__Icon",Heading:"Polaris-DataTable__Heading",StickyHeaderEnabled:"Polaris-DataTable__StickyHeaderEnabled",StickyHeaderWrapper:"Polaris-DataTable__StickyHeaderWrapper","Cell-sorted":"Polaris-DataTable__Cell--sorted","Cell-total":"Polaris-DataTable__Cell--total",ShowTotals:"Polaris-DataTable__ShowTotals","Cell-total-footer":"Polaris-DataTable--cellTotalFooter",Footer:"Polaris-DataTable__Footer",StickyHeaderInner:"Polaris-DataTable__StickyHeaderInner","StickyHeaderInner-isSticky":"Polaris-DataTable__StickyHeaderInner--isSticky",StickyHeaderTable:"Polaris-DataTable__StickyHeaderTable",FixedFirstColumn:"Polaris-DataTable__FixedFirstColumn",StickyTableHeadingsRow:"Polaris-DataTable__StickyTableHeadingsRow",TooltipContent:"Polaris-DataTable__TooltipContent"},eT=function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),a.createElement("path",{fillOpacity:.33,fillRule:"evenodd",d:"M9.116 4.823a1.25 1.25 0 0 1 1.768 0l2.646 2.647a.75.75 0 0 1-1.06 1.06l-2.47-2.47-2.47 2.47a.75.75 0 1 1-1.06-1.06l2.646-2.647Z"}),a.createElement("path",{fillRule:"evenodd",d:"M9.116 15.177a1.25 1.25 0 0 0 1.768 0l2.646-2.647a.75.75 0 0 0-1.06-1.06l-2.47 2.47-2.47-2.47a.75.75 0 0 0-1.06 1.06l2.646 2.647Z"}))};eT.displayName="SortDescendingIcon";var eO=function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),a.createElement("path",{fillRule:"evenodd",d:"M9.116 4.323a1.25 1.25 0 0 1 1.768 0l2.646 2.647a.75.75 0 0 1-1.06 1.06l-2.47-2.47-2.47 2.47a.75.75 0 1 1-1.06-1.06l2.646-2.647Z"}),a.createElement("path",{fillOpacity:.33,fillRule:"evenodd",d:"M9.116 15.677a1.25 1.25 0 0 0 1.768 0l2.646-2.647a.75.75 0 0 0-1.06-1.06l-2.47 2.47-2.47-2.47a.75.75 0 0 0-1.06 1.06l2.646 2.647Z"}))};eO.displayName="SortAscendingIcon";var eI={TooltipContainer:"Polaris-Tooltip__TooltipContainer",HasUnderline:"Polaris-Tooltip__HasUnderline"},ej=r(8931),eM=r(5698),eR=r.n(eM),eH=r(2915),eD=r(6554);let eN=["light","dark-experimental"],eW=e=>eN.includes(e);function eK(e){let{as:t="div",children:r,className:n,theme:i=y.x0}=e;return s().createElement(eH.Do.Provider,{value:i},s().createElement(eH.Ni.Provider,{value:(0,eH.gh)(i)},s().createElement(t,{"data-portal-id":e["data-portal-id"],className:v((0,y.fP)(i),"Polaris-ThemeProvider--themeContainer",n)},r)))}function eJ({children:e,idPrefix:t="",onPortalCreated:r=e$}){let n=(0,eH.Cg)(),{container:i}=function(){let e=(0,a.useContext)(eD.j);if(!e)throw Error("No portals manager was provided. Your application must be wrapped in an <AppProvider> component. See https://polaris.shopify.com/components/app-provider for implementation instructions.");return e}(),o=(0,a.useId)(),l=""!==t?`${t}-${o}`:o;return(0,a.useEffect)(()=>{r()},[r]),i?(0,eM.createPortal)(s().createElement(eK,{theme:eW(n)?n:y.x0,"data-portal-id":l},e),i):null}function e$(){}var eF={TooltipOverlay:"Polaris-Tooltip-TooltipOverlay",Tail:"Polaris-Tooltip-TooltipOverlay__Tail",positionedAbove:"Polaris-Tooltip-TooltipOverlay--positionedAbove",measuring:"Polaris-Tooltip-TooltipOverlay--measuring",measured:"Polaris-Tooltip-TooltipOverlay--measured",instant:"Polaris-Tooltip-TooltipOverlay--instant",Content:"Polaris-Tooltip-TooltipOverlay__Content",default:"Polaris-Tooltip-TooltipOverlay--default",wide:"Polaris-Tooltip-TooltipOverlay--wide"},eU=r(5107);function eB(){return new eU.U({top:window.scrollY,left:window.scrollX,height:window.innerHeight,width:document.body.clientWidth})}var eL={PositionedOverlay:"Polaris-PositionedOverlay",fixed:"Polaris-PositionedOverlay--fixed",preventInteraction:"Polaris-PositionedOverlay--preventInteraction"};let eq=Symbol("unique_identifier"),ez=(0,a.createContext)(void 0);var eV={Scrollable:"Polaris-Scrollable",hasTopShadow:"Polaris-Scrollable--hasTopShadow",hasBottomShadow:"Polaris-Scrollable--hasBottomShadow",horizontal:"Polaris-Scrollable--horizontal",vertical:"Polaris-Scrollable--vertical",scrollbarWidthThin:"Polaris-Scrollable--scrollbarWidthThin",scrollbarWidthNone:"Polaris-Scrollable--scrollbarWidthNone",scrollbarWidthAuto:"Polaris-Scrollable--scrollbarWidthAuto",scrollbarGutterStable:"Polaris-Scrollable--scrollbarGutterStable","scrollbarGutterStableboth-edges":"Polaris-Scrollable__scrollbarGutterStableboth--edges"},eG=r(7529),eX=r(2675);let eY=(0,a.forwardRef)(({children:e,className:t,horizontal:r=!0,vertical:n=!0,shadow:i,hint:o,focusable:l,scrollbarWidth:c="thin",scrollbarGutter:d,onScrolledToBottom:u,...p},f)=>{let[h,m]=(0,a.useState)(!1),[y,g]=(0,a.useState)(!1),E=function(e){let t=(0,a.useRef)(eq);return t.current===eq&&(t.current=e()),t}(()=>new eG.s),w=(0,a.useRef)(null),S=(0,a.useCallback)((e,t={})=>{let r=t.behavior||"smooth",n=eZ()?"auto":r;w.current?.scrollTo({top:e,behavior:n})},[]),_=(0,a.useRef)();(0,a.useImperativeHandle)(f||_,()=>({scrollTo:S}));let P=(0,a.useCallback)(()=>{let e=w.current;e&&requestAnimationFrame(()=>{let{scrollTop:t,clientHeight:r,scrollHeight:n}=e,i=t+r>=n-2;m(t>0),g(!i),n>r&&i&&u&&u()})},[u]);(function(e){let t=(0,ed.u)(),r=(0,a.useRef)(!1);t&&!r.current&&(r.current=!0,e())})(()=>{P(),o&&requestAnimationFrame(()=>(function(e){if(!e||eZ())return;let t=Math.min(100,e.scrollHeight-e.clientHeight)-2,r=()=>{requestAnimationFrame(()=>{e.scrollTop>=t&&(e.removeEventListener("scroll",r),e.scrollTo({top:0,behavior:"smooth"}))})};e.addEventListener("scroll",r),e.scrollTo({top:100,behavior:"smooth"})})(w.current))}),(0,a.useEffect)(()=>{let e=w.current;if(!e)return;let t=(0,ex.D)(P,50,{trailing:!0});return E.current?.setContainer(e),e.addEventListener("scroll",P),globalThis.addEventListener("resize",t),()=>{e.removeEventListener("scroll",P),globalThis.removeEventListener("resize",t)}},[E,P]);let C=v(t,eV.Scrollable,n&&eV.vertical,r&&eV.horizontal,i&&h&&eV.hasTopShadow,i&&y&&eV.hasBottomShadow,c&&eV[b("scrollbarWidth",c)],d&&eV[b("scrollbarGutter",d.replace(" ",""))]);return s().createElement(ez.Provider,{value:S},s().createElement(eX.p.Provider,{value:E.current},s().createElement("div",Object.assign({className:C},ef.fm.props,p,{ref:w,tabIndex:l?0:void 0}),e)))});function eZ(){try{return window.matchMedia("(prefers-reduced-motion: reduce)").matches}catch(e){return!1}}eY.displayName="Scrollable",eY.ScrollTo=function(){let e=(0,a.useRef)(null),t=(0,a.useContext)(ez);(0,a.useEffect)(()=>{t&&e.current&&t(e.current.offsetTop)},[t]);let r=(0,a.useId)();return s().createElement("a",{id:r,ref:e})},eY.forNode=e=>{let t=e.closest(ef.fm.selector);return t instanceof HTMLElement?t:document};var eQ=r(5092);let e0={childList:!0,subtree:!0,characterData:!0,attributeFilter:["style"]};class e1 extends a.PureComponent{constructor(e){super(e),this.state={measuring:!0,activatorRect:(0,eU.P)(this.props.activator),right:void 0,left:void 0,top:0,height:0,width:null,positioning:"below",zIndex:null,outsideScrollableContainer:!1,lockPosition:!1,chevronOffset:0},this.overlay=null,this.scrollableContainers=[],this.overlayDetails=()=>{let{measuring:e,left:t,right:r,positioning:n,height:i,activatorRect:o,chevronOffset:a}=this.state;return{measuring:e,left:t,right:r,desiredHeight:i,positioning:n,activatorRect:o,chevronOffset:a}},this.setOverlay=e=>{this.overlay=e},this.setScrollableContainers=()=>{let e=[],t=eY.forNode(this.props.activator);if(t)for(e.push(t);t?.parentElement;)e.push(t=eY.forNode(t.parentElement));this.scrollableContainers=e},this.registerScrollHandlers=()=>{this.scrollableContainers.forEach(e=>{e.addEventListener("scroll",this.handleMeasurement)})},this.unregisterScrollHandlers=()=>{this.scrollableContainers.forEach(e=>{e.removeEventListener("scroll",this.handleMeasurement)})},this.handleMeasurement=()=>{let{lockPosition:e,top:t}=this.state;this.observer.disconnect(),this.setState(({left:e,top:t,right:r})=>({left:e,right:r,top:t,height:0,positioning:"below",measuring:!0}),()=>{if(null==this.overlay||null==this.firstScrollableContainer)return;let{activator:r,preferredPosition:n="below",preferredAlignment:i="center",onScrollOut:o,fullWidth:a,fixed:s,preferInputActivator:l=!0}=this.props,c=l&&r.querySelector("input")||r,d=(0,eU.P)(c),u=(0,eU.P)(this.overlay),p=this.firstScrollableContainer===document?document.body:this.firstScrollableContainer,f=(0,eU.P)(p),h=a||"cover"===n?new eU.U({...u,width:d.width}):u;p===document.body&&(f.height=document.body.scrollHeight);let m=0,y=p.querySelector(`${ef.VT.selector}`);y&&(m=y.clientHeight);let g=this.overlay.firstElementChild&&this.overlay.firstChild instanceof HTMLElement?function(e){let t=window.getComputedStyle(e);return{activator:parseFloat(t.marginTop||"0"),container:parseFloat(t.marginBottom||"0"),horizontal:parseFloat(t.marginLeft||"0")}}(this.overlay.firstElementChild):{activator:0,container:0,horizontal:0},v=eB(),b=function(e){let t=e.closest(ef.EY.selector)||document.body,r=t===document.body?"auto":parseInt(window.getComputedStyle(t).zIndex||"0",10);return"auto"===r||isNaN(r)?null:r}(r),E=function(e,t,r,n,i,o,a,s=0){let l=e.top,c=l+e.height,d=e.top-s,u=i.height-e.top-e.height,p=t.height,f=r.activator+r.container,h=r.container,m=e.top-Math.max(n.top,0),y=i.top+Math.min(i.height,n.top+n.height)-(e.top+e.height),g=m>=h,v=y>=h,b=Math.min(d,p),E=Math.min(d+e.height,p),w=Math.min(u+e.height,p),S=a?0:i.top,_={height:b-f,top:l+S-b,positioning:"above"},P={height:Math.min(u,p)-f,top:c+S,positioning:"below"},C={height:E-f,top:l+S-b+e.height+f,positioning:"cover"};return"above"===o?(g||m>=y&&!v)&&(d>p||d>u)?_:P:"below"===o?(v||y>=m&&!g)&&(u>p||u>d)?P:_:"cover"===o?(v||y>=m&&!g)&&(u+e.height>p||u>d)?{height:w-f,top:l+S,positioning:"cover"}:C:g&&v?d>u?_:P:m>h?_:P}(d,h,g,f,v,n,s,m),w=function(e,t,r,n,i){let o=r.width-t.width;return"left"===i?Math.min(o,Math.max(0,e.left-n.horizontal)):"right"===i?Math.min(o,Math.max(0,r.width-(e.left+e.width)-n.horizontal)):Math.min(o,Math.max(0,e.center.x-t.width/2))}(d,h,v,g,i),S=d.center.x-w+2*g.horizontal;this.setState({measuring:!1,activatorRect:(0,eU.P)(r),left:"right"!==i?w:void 0,right:"right"===i?w:void 0,top:e?t:E.top,lockPosition:!!s,height:E.height||0,width:a||"cover"===n?h.width:null,positioning:E.positioning,outsideScrollableContainer:null!=o&&function(e,t){let{center:r}=e;return r.y<t.top||r.y>t.top+t.height}(d,function(e,t=eB()){let r=Math.max(e.top,0),n=Math.max(e.left,0),i=Math.min(e.top+e.height,t.height),o=Math.min(e.left+e.width,t.width);return new eU.U({top:r,left:n,height:i-r,width:o-n})}(f)),zIndex:null==b?b:b+1,chevronOffset:S},()=>{this.overlay&&(this.observer.observe(this.overlay,e0),this.observer.observe(r,e0))})})},this.observer=new MutationObserver(this.handleMeasurement)}componentDidMount(){this.setScrollableContainers(),this.scrollableContainers.length&&!this.props.fixed&&this.registerScrollHandlers(),this.handleMeasurement()}componentWillUnmount(){this.observer.disconnect(),this.scrollableContainers.length&&!this.props.fixed&&this.unregisterScrollHandlers()}componentDidUpdate(){let{outsideScrollableContainer:e,top:t}=this.state,{onScrollOut:r,active:n}=this.props;n&&null!=r&&0!==t&&e&&r()}render(){let{left:e,right:t,top:r,zIndex:n,width:i}=this.state,{render:o,fixed:a,preventInteraction:l,classNames:c,zIndexOverride:d}=this.props,u={top:null==r||isNaN(r)?void 0:r,left:null==e||isNaN(e)?void 0:e,right:null==t||isNaN(t)?void 0:t,width:null==i||isNaN(i)?void 0:i,zIndex:d||n||void 0},p=v(eL.PositionedOverlay,a&&eL.fixed,l&&eL.preventInteraction,c);return s().createElement("div",{className:p,style:u,ref:this.setOverlay},s().createElement(eQ.h,{event:"resize",handler:this.handleMeasurement}),o(this.overlayDetails()))}get firstScrollableContainer(){return this.scrollableContainers[0]??null}forceUpdatePosition(){requestAnimationFrame(this.handleMeasurement)}}let e2=s().createElement(s().Fragment,null,s().createElement("path",{d:"M18.829 8.171 11.862.921A3 3 0 0 0 7.619.838L0 8.171h1.442l6.87-6.612a2 2 0 0 1 2.83.055l6.3 6.557h1.387Z",fill:"var(--p-color-tooltip-tail-up-border-experimental)"}),s().createElement("path",{d:"M17.442 10.171h-16v-2l6.87-6.612a2 2 0 0 1 2.83.055l6.3 6.557v2Z",fill:"var(--p-color-bg-surface)"})),e5=s().createElement(s().Fragment,null,s().createElement("path",{d:"m0 2 6.967 7.25a3 3 0 0 0 4.243.083L18.829 2h-1.442l-6.87 6.612a2 2 0 0 1-2.83-.055L1.387 2H0Z",fill:"var(--p-color-tooltip-tail-down-border-experimental)"}),s().createElement("path",{d:"M1.387 0h16v2l-6.87 6.612a2 2 0 0 1-2.83-.055L1.387 2V0Z",fill:"var(--p-color-bg-surface)"}));function e4({active:e,activator:t,preferredPosition:r="above",preventInteraction:n,id:i,children:o,accessibilityLabel:a,width:l,padding:c,borderRadius:d,zIndexOverride:u,instant:p}){let f=z();return e?s().createElement(e1,{active:e,activator:t,preferredPosition:r,preventInteraction:n,render:function(e){let{measuring:t,desiredHeight:r,positioning:n,chevronOffset:u}=e,h=v(eF.TooltipOverlay,t&&eF.measuring,!t&&eF.measured,p&&eF.instant,"above"===n&&eF.positionedAbove),m=v(eF.Content,l&&eF[l]),y=t?void 0:{minHeight:r},g={"--pc-tooltip-chevron-x-pos":`${u}px`,"--pc-tooltip-border-radius":d?`var(--p-border-radius-${d})`:void 0,"--pc-tooltip-padding":c&&"default"===c?"var(--p-space-100) var(--p-space-200)":`var(--p-space-${c})`};return s().createElement("div",Object.assign({style:g,className:h},ef.EY.props),s().createElement("svg",{className:eF.Tail,width:"19",height:"11",fill:"none"},"above"===n?e5:e2),s().createElement("div",{id:i,role:"tooltip",className:m,style:{...y,...g},"aria-label":a?f.translate("Polaris.TooltipOverlay.accessibilityLabel",{label:a}):void 0},o))},zIndexOverride:u}):null}function e6({children:e,content:t,dismissOnMouseOut:r,active:n,hoverDelay:i,preferredPosition:o="above",activatorWrapper:l="span",accessibilityLabel:c,width:d="default",padding:u="default",borderRadius:p,zIndexOverride:f,hasUnderline:h,persistOnClick:m,onOpen:y,onClose:g}){let{value:b,setTrue:E,setFalse:w}=F(!!n),{value:S,toggle:_}=F(!!n&&!!m),[P,C]=(0,a.useState)(null),{presenceList:x,addPresence:A,removePresence:k}=function(){let e=(0,a.useContext)(ej.o);if(!e)throw Error("No ephemeral presence manager was provided. Your application must be wrapped in an <AppProvider> component. See https://polaris.shopify.com/components/app-provider for implementation instructions.");return e}(),T=(0,a.useId)(),O=(0,a.useRef)(null),I=(0,a.useRef)(!1),[j,M]=(0,a.useState)(!n),R=(0,a.useRef)(null),H=(0,a.useRef)(null),D=(0,a.useCallback)(()=>{!1!==n&&E()},[n,E]);(0,a.useEffect)(()=>{let e=(O.current?ei(O.current):null)||O.current;e&&(e.tabIndex=0,e.setAttribute("aria-describedby",T),e.setAttribute("data-polaris-tooltip-activator","true"))},[T,e]),(0,a.useEffect)(()=>()=>{R.current&&clearTimeout(R.current),H.current&&clearTimeout(H.current)},[]);let N=(0,a.useCallback)(()=>{M(!x.tooltip&&!b),y?.(),A("tooltip")},[A,x.tooltip,y,b]),W=(0,a.useCallback)(()=>{g?.(),M(!1),H.current=setTimeout(()=>{k("tooltip")},150)},[k,g]),K=(0,a.useCallback)(e=>{"Escape"===e.key&&(W?.(),w(),m&&_())},[w,W,m,_]);(0,a.useEffect)(()=>{!1===n&&b&&(W(),w())},[n,b,W,w]);let J=P?s().createElement(eJ,{idPrefix:"tooltip"},s().createElement(e4,{id:T,preferredPosition:o,activator:P,active:b,accessibilityLabel:c,onClose:e3,preventInteraction:r,width:d,padding:u,borderRadius:p||"200",zIndexOverride:f,instant:!j},s().createElement(G,{as:"span",variant:"bodyMd"},t))):null,$=v("div"===l&&eI.TooltipContainer,h&&eI.HasUnderline);return s().createElement(l,{onFocus:()=>{N(),D()},onBlur:()=>{W(),w(),m&&_()},onMouseLeave:function(){R.current&&(clearTimeout(R.current),R.current=null),I.current=!1,W(),S||w()},onMouseOver:function(){I.current||(I.current=!0,i&&!x.tooltip?R.current=setTimeout(()=>{N(),D()},i):(N(),D()))},onMouseDown:m?_:void 0,ref:function(e){if(null==e){O.current=null,C(null);return}e.firstElementChild instanceof HTMLElement&&C(e.firstElementChild),O.current=e},onKeyUp:K,className:$},e,J)}function e3(){}function e7({content:e,contentType:t,nthColumn:r,firstColumn:n,truncate:i,header:o,total:a,totalInFooter:l,sorted:c,sortable:d,sortDirection:u,inFixedNthColumn:p,verticalAlign:f="top",defaultSortDirection:h="ascending",onSort:m,colSpan:y,setRef:g=()=>{},stickyHeadingCell:E=!1,stickyCellWidth:w,hovered:S=!1,handleFocus:_=()=>{},hasFixedNthColumn:P=!1,fixedCellVisible:C=!1,firstColumnMinWidth:x,style:A,lastFixedFirstColumn:k}){let T=z(),O=v(ek.Cell,ek[`Cell-${b("verticalAlign",f)}`],n&&ek["Cell-firstColumn"],i&&ek["Cell-truncated"],o&&ek["Cell-header"],a&&ek["Cell-total"],l&&ek["Cell-total-footer"],"numeric"===t&&ek["Cell-numeric"],d&&ek["Cell-sortable"],c&&ek["Cell-sorted"],E&&ek.StickyHeaderCell,S&&ek["Cell-hovered"],k&&p&&C&&ek["Cell-separate"],r&&p&&E&&ek.FixedFirstColumn),I=v(o&&ek.Heading,o&&"text"===t&&ek["Heading-left"]),j=v(d&&ek.Icon),M=c&&u?u:h,R="ascending"===u?"descending":"ascending",H=T.translate("Polaris.DataTable.sortAccessibilityLabel",{direction:c?R:M}),D=s().createElement("span",{className:j},s().createElement(Y,{source:"descending"===M?eT:eO,accessibilityLabel:H})),N=!(E&&P&&r&&!p),W=s().createElement("button",{className:I,onClick:m,onFocus:_,tabIndex:N?0:-1},D,e),K=d?W:e,J=y&&y>1?{colSpan:y}:{},$=r&&x?{minWidth:x}:{minWidth:w},F=s().createElement("th",Object.assign({ref:g},ef.oU.props,J,{className:O,"aria-sort":u,style:{...A,...$},"data-index-table-sticky-heading":!0}),K),U=o?s().createElement("th",Object.assign({},ef.oU.props,{"aria-sort":u},J,{ref:g,className:O,scope:"col",style:{...$}}),K):s().createElement("th",Object.assign({},J,{ref:g,className:O,scope:"row",style:{...$}}),i?s().createElement(e8,{className:ek.TooltipContent},e):e),B=o||n||r?U:s().createElement("td",Object.assign({className:O},J),e);return E?F:B}let e8=({children:e,className:t=""})=>{let r=(0,a.useRef)(null),{current:n}=r,i=s().createElement("span",{ref:r,className:t},e);return n?.scrollWidth>n?.offsetWidth?s().createElement(e6,{content:r.current.innerText},i):i};var e9=function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),a.createElement("path",{fillRule:"evenodd",d:"M11.764 5.204a.75.75 0 0 1 .032 1.06l-3.516 3.736 3.516 3.736a.75.75 0 1 1-1.092 1.028l-4-4.25a.75.75 0 0 1 0-1.028l4-4.25a.75.75 0 0 1 1.06-.032Z"}))};e9.displayName="ChevronLeftIcon";var te=function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),a.createElement("path",{fillRule:"evenodd",d:"M7.72 14.53a.75.75 0 0 1 0-1.06l3.47-3.47-3.47-3.47a.75.75 0 0 1 1.06-1.06l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06 0Z"}))};te.displayName="ChevronRightIcon",function(e){e.Input="INPUT",e.Textarea="TEXTAREA",e.Select="SELECT",e.ContentEditable="contenteditable"}(i||(i={}));var tt={Pagination:"Polaris-Pagination",table:"Polaris-Pagination--table",TablePaginationActions:"Polaris-Pagination__TablePaginationActions"};function tr({keyCode:e,handler:t,keyEvent:r="keyup",options:n,useCapture:i}){let o=(0,a.useRef)({handler:t,keyCode:e});(0,j.L)(()=>{o.current={handler:t,keyCode:e}},[t,e]);let s=(0,a.useCallback)(e=>{let{handler:t,keyCode:r}=o.current;e.keyCode===r&&t(e)},[]);return(0,a.useEffect)(()=>(document.addEventListener(r,s,i||n),()=>{document.removeEventListener(r,s,i||n)}),[r,s,i,n]),null}function tn({hasNext:e,hasPrevious:t,nextURL:r,previousURL:n,onNext:i,onPrevious:o,nextTooltip:l,previousTooltip:c,nextKeys:d,previousKeys:u,accessibilityLabel:p,accessibilityLabels:f,label:h,type:m="page"}){let y=z(),g=(0,a.createRef)(),b=p||y.translate("Polaris.Pagination.pagination"),E=f?.previous||y.translate("Polaris.Pagination.previous"),w=f?.next||y.translate("Polaris.Pagination.next"),S=s().createElement(eg,{icon:e9,accessibilityLabel:E,url:n,onClick:o,disabled:!t,id:"previousURL"}),_=c&&t?s().createElement(e6,{activatorWrapper:"span",content:c,preferredPosition:"below"},S):S,P=s().createElement(eg,{icon:te,accessibilityLabel:w,url:r,onClick:i,disabled:!e,id:"nextURL"}),C=l&&e?s().createElement(e6,{activatorWrapper:"span",content:l,preferredPosition:"below"},P):P,A=o||ta,k=u&&(n||o)&&t&&u.map(e=>s().createElement(tr,{key:e,keyCode:e,handler:n?to(ti("previousURL",g)):to(A)})),T=i||ta,O=d&&(r||i)&&e&&d.map(e=>s().createElement(tr,{key:e,keyCode:e,handler:r?to(ti("nextURL",g)):to(T)}));if("table"===m){let e=h?s().createElement(x,{padding:"300",paddingBlockStart:"0",paddingBlockEnd:"0"},s().createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium"},h)):null;return s().createElement("nav",{"aria-label":b,ref:g,className:v(tt.Pagination,tt.table)},k,O,s().createElement(x,{background:"bg-surface-secondary",paddingBlockStart:"150",paddingBlockEnd:"150",paddingInlineStart:"300",paddingInlineEnd:"200"},s().createElement(ev,{align:"center",blockAlign:"center"},s().createElement("div",{className:tt.TablePaginationActions,"data-buttongroup-variant":"segmented"},s().createElement("div",null,_),e,s().createElement("div",null,C)))))}let I=e&&t?s().createElement("span",null,h):s().createElement(G,{tone:"subdued",as:"span"},h),j=h?s().createElement(x,{padding:"300",paddingBlockStart:"0",paddingBlockEnd:"0"},s().createElement("div",{"aria-live":"polite"},I)):null;return s().createElement("nav",{"aria-label":b,ref:g,className:tt.Pagination},k,O,s().createElement(B,{variant:"segmented"},_,j,C))}function ti(e,t){return()=>{if(null==t.current)return;let r=t.current.querySelector(`#${e}`);r&&r.click()}}function to(e){return()=>{!function(){if(null==document||null==document.activeElement)return!1;let{tagName:e}=document.activeElement;return e===i.Input||e===i.Textarea||e===i.Select||document.activeElement.hasAttribute(i.ContentEditable)}()&&e()}}function ta(){}function ts({children:e,onMount:t,fallback:r=null}){let n=(0,ed.u)();return(0,a.useEffect)(()=>{n&&t&&t()},[n,t]),s().createElement(s().Fragment,null,n?e:r)}class tl extends a.Component{constructor(...e){super(...e),this.state={isSticky:!1,style:{}},this.placeHolderNode=null,this.stickyNode=null,this.setPlaceHolderNode=e=>{this.placeHolderNode=e},this.setStickyNode=e=>{this.stickyNode=e},this.handlePositioning=(e,t=0,r=0,n=0)=>{let{isSticky:i}=this.state;(e&&!i||!e&&i)&&(this.adjustPlaceHolderNode(e),this.setState({isSticky:!i},()=>null==this.props.onStickyChange?null:(this.props.onStickyChange(!i),null==this.props.boundingElement)?null:void this.props.boundingElement.toggleAttribute("data-sticky-active"))),this.setState({style:e?{position:"fixed",top:t,left:r,width:n}:{}})},this.adjustPlaceHolderNode=e=>{this.placeHolderNode&&this.stickyNode&&(this.placeHolderNode.style.paddingBottom=e?`${(0,eU.P)(this.stickyNode).height}px`:"0px")}}componentDidMount(){let{boundingElement:e,offset:t=!1,disableWhenStacked:r=!1,stickyManager:n}=this.props;this.stickyNode&&this.placeHolderNode&&n.registerStickyItem({stickyNode:this.stickyNode,placeHolderNode:this.placeHolderNode,handlePositioning:this.handlePositioning,offset:t,boundingElement:e,disableWhenStacked:r})}componentWillUnmount(){let{stickyManager:e}=this.props;this.stickyNode&&e.unregisterStickyItem(this.stickyNode)}render(){let{style:e,isSticky:t}=this.state,{children:r}=this.props,n="function"==typeof r?r(t):r;return s().createElement("div",null,s().createElement("div",{ref:this.setPlaceHolderNode}),s().createElement("div",{ref:this.setStickyNode,style:e},n))}}function tc(e){let t=function(){let e=(0,a.useContext)(eX.p);if(!e)throw new L("No StickyManager was provided.");return e}();return s().createElement(tl,Object.assign({},e,{stickyManager:t}))}function td({columnVisibilityData:e,isScrolledFarthestLeft:t,isScrolledFarthestRight:r,navigateTableLeft:n,navigateTableRight:i,fixedFirstColumns:o,setRef:a=()=>{}}){let l=z(),c=e.map((e,t)=>{if(t<o)return;let r=v(ek.Pip,e.isVisible&&ek["Pip-visible"]);return s().createElement("div",{className:r,key:`pip-${t}`})}),d=l.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"left"}),u=l.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"right"});return s().createElement("div",{className:ek.Navigation,ref:a},s().createElement(eg,{variant:"tertiary",icon:e9,disabled:t,accessibilityLabel:d,onClick:n}),c,s().createElement(eg,{variant:"tertiary",icon:te,disabled:r,accessibilityLabel:u,onClick:i}))}let tu=e=>{let t=[];return e&&e.forEach(e=>{t.push(e.clientHeight)}),t};class tp extends a.PureComponent{constructor(...e){super(...e),this.state={condensed:!1,columnVisibilityData:[],isScrolledFarthestLeft:!0,isScrolledFarthestRight:!1,rowHovered:void 0},this.dataTable=(0,a.createRef)(),this.scrollContainer=(0,a.createRef)(),this.table=(0,a.createRef)(),this.stickyTable=(0,a.createRef)(),this.stickyNav=null,this.headerNav=null,this.tableHeadings=[],this.stickyHeadings=[],this.tableHeadingWidths=[],this.stickyHeaderActive=!1,this.scrollStopTimer=null,this.handleResize=(0,ex.D)(()=>{let{table:{current:e},scrollContainer:{current:t}}=this,r=!1;e&&t&&(r=e.scrollWidth>t.clientWidth+1),this.setState({condensed:r,...this.calculateColumnVisibilityData(r)})}),this.setCellRef=({ref:e,index:t,inStickyHeader:r})=>{if(null!=e){if(r){this.stickyHeadings[t]=e;let r=e.querySelector("button");null!=r&&r.addEventListener("focus",this.handleHeaderButtonFocus)}else this.tableHeadings[t]=e,this.tableHeadingWidths[t]=e.clientWidth}},this.changeHeadingFocus=()=>{let e;let{tableHeadings:t,stickyHeadings:r,stickyNav:n,headerNav:i}=this,o=r.findIndex(e=>e===document.activeElement?.parentElement),a=t.findIndex(e=>e===document.activeElement?.parentElement),s=n?.querySelectorAll("button"),l=i?.querySelectorAll("button"),c=-1;s?.forEach((e,t)=>{e===document.activeElement&&(c=t)});let d=-1;return(l?.forEach((e,t)=>{e===document.activeElement&&(d=t)}),o<0&&a<0&&c<0&&d<0)?null:(o>=0?e=t[o].querySelector("button"):a>=0&&(e=r[a].querySelector("button")),c>=0?e=l?.[c]:d>=0&&(e=s?.[d]),null==e)?null:void(e.style.visibility="visible",e.focus(),e.style.removeProperty("visibility"))},this.calculateColumnVisibilityData=e=>{let t=this.fixedFirstColumns(),{table:{current:r},scrollContainer:{current:n},dataTable:{current:i}}=this,{stickyHeader:o}=this.props;if((o||e)&&r&&n&&i){let e=r.querySelectorAll(ef.oU.selector),o=e[t-1],a=t?o.offsetLeft+o.offsetWidth:0;if(e.length>0){let r=e.length-1,o=n.scrollLeft+a,s=n.scrollLeft+i.offsetWidth,l={firstVisibleColumnIndex:r,tableLeftVisibleEdge:o,tableRightVisibleEdge:s},c=[...e].map(function(e){return function(t,r){let{firstVisibleColumnIndex:n,tableLeftVisibleEdge:i,tableRightVisibleEdge:o}=e,a=t.offsetLeft,s=a+t.offsetWidth,l=eA(a,i,o,"left"),c=eA(s,i,o,"right"),d=l||c,u=t.offsetWidth;return d&&(e.firstVisibleColumnIndex=Math.min(n,r)),{leftEdge:a,rightEdge:s,isVisible:d,width:u,index:r}}}(l)),d=c[c.length-1],u=t?o===a:0===o;return{columnVisibilityData:c,...function(e,t){let{firstVisibleColumnIndex:r}=e;return{previousColumn:t[Math.max(r-1,0)],currentColumn:t[r]}}(l,c),isScrolledFarthestLeft:u,isScrolledFarthestRight:d.rightEdge<=s}}}return{columnVisibilityData:[],previousColumn:void 0,currentColumn:void 0}},this.handleHeaderButtonFocus=e=>{let t=this.fixedFirstColumns();if(null==this.scrollContainer.current||null==e.target||0===this.state.columnVisibilityData.length)return;let r=e.target.parentNode,n=this.scrollContainer.current.scrollLeft,i=this.scrollContainer.current.offsetWidth,o=this.state.columnVisibilityData.length>0?this.state.columnVisibilityData[t]?.rightEdge:0,a=r.offsetLeft,s=r.offsetLeft+r.offsetWidth;n>a-o&&(this.scrollContainer.current.scrollLeft=a-o),s>n+i&&(this.scrollContainer.current.scrollLeft=s-i)},this.stickyHeaderScrolling=()=>{let{current:e}=this.stickyTable,{current:t}=this.scrollContainer;null!=e&&null!=t&&(e.scrollLeft=t.scrollLeft)},this.scrollListener=()=>{this.scrollStopTimer&&clearTimeout(this.scrollStopTimer),this.scrollStopTimer=setTimeout(()=>{this.setState(e=>({...this.calculateColumnVisibilityData(e.condensed)}))},100),this.setState({isScrolledFarthestLeft:this.scrollContainer.current?.scrollLeft===0}),this.props.stickyHeader&&this.stickyHeaderActive&&this.stickyHeaderScrolling()},this.handleHover=e=>()=>{this.setState({rowHovered:e})},this.handleFocus=e=>{let t=this.fixedFirstColumns();if(null==this.scrollContainer.current||null==e.target)return;let r=e.target.parentNode,n=this.props?this.state.columnVisibilityData[t]?.rightEdge:0,i=r.offsetLeft-n;this.scrollContainer.current.scrollLeft>i&&(this.scrollContainer.current.scrollLeft=i)},this.navigateTable=e=>{let t=this.fixedFirstColumns(),{currentColumn:r,previousColumn:n}=this.state,i=this.state.columnVisibilityData[t-1]?.rightEdge;if(!r||!n)return;let o=0;for(let e=0;e<r.index;e++)o+=this.state.columnVisibilityData[e].width;let{current:a}=this.scrollContainer;return()=>{let s=0;s=t?"right"===e?o-i+r.width:o-n.width-i:"right"===e?r.rightEdge:n.leftEdge,a&&(a.scrollLeft=s,requestAnimationFrame(()=>{this.setState(e=>({...this.calculateColumnVisibilityData(e.condensed)}))}))}},this.renderHeading=({heading:e,headingIndex:t,inFixedNthColumn:r,inStickyHeader:n})=>{let i;let{sortable:o,truncate:a=!1,columnContentTypes:l,defaultSortDirection:c,initialSortColumnIndex:d=0,verticalAlign:u,firstColumnMinWidth:p}=this.props,f=this.fixedFirstColumns(),{sortDirection:h=c,sortedColumnIndex:m=d,isScrolledFarthestLeft:y}=this.state,g=`heading-cell-${t}`,v=`stickyheader-${t}`,b=n?v:g;if(o){let e=o[t],r=e&&m===t;i={defaultSortDirection:c,sorted:r,sortable:e,sortDirection:r?h:"none",onSort:this.defaultOnSort(t),fixedNthColumn:f,inFixedNthColumn:f}}let E=n?this.tableHeadingWidths[t]:void 0,w={header:!0,stickyHeadingCell:n,content:e,contentType:l[t],nthColumn:t<f,fixedFirstColumns:f,truncate:a,headingIndex:t,...i,verticalAlign:u,handleFocus:this.handleFocus,stickyCellWidth:E,fixedCellVisible:!y,firstColumnMinWidth:p};return r&&n?[s().createElement(e7,Object.assign({key:b},w,{setRef:e=>{this.setCellRef({ref:e,index:t,inStickyHeader:n})},inFixedNthColumn:!1})),s().createElement(e7,Object.assign({key:`${b}-sticky`},w,{setRef:e=>{this.setCellRef({ref:e,index:t,inStickyHeader:n})},inFixedNthColumn:!!f,lastFixedFirstColumn:t===f-1,style:{left:this.state.columnVisibilityData[t]?.leftEdge}}))]:s().createElement(e7,Object.assign({key:b},w,{setRef:e=>{this.setCellRef({ref:e,index:t,inStickyHeader:n})},lastFixedFirstColumn:t===f-1,inFixedNthColumn:r}))},this.totalsRowHeading=()=>{let{i18n:e,totals:t,totalsName:r}=this.props,n=r||{singular:e.translate("Polaris.DataTable.totalRowHeading"),plural:e.translate("Polaris.DataTable.totalsRowHeading")};return t&&t.filter(e=>""!==e).length>1?n.plural:n.singular},this.renderTotals=({total:e,index:t})=>{let r,n;let i=this.fixedFirstColumns(),o=`totals-cell-${t}`,{truncate:a=!1,verticalAlign:l,columnContentTypes:c}=this.props;0===t&&(r=this.totalsRowHeading()),""!==e&&t>0&&(n=c[t],r=e);let d=this.props.showTotalsInFooter;return s().createElement(e7,{total:!0,totalInFooter:d,nthColumn:t<=i-1,firstColumn:0===t,key:o,content:r,contentType:n,truncate:a,verticalAlign:l})},this.getColSpan=(e,t,r,n)=>{if(this.fixedFirstColumns())return 1;let i=e||1,o=t||r,a=Math.floor(o/i);return 0===n?a+o%i:a},this.defaultRenderRow=({row:e,index:t,inFixedNthColumn:r,rowHeights:n})=>{let{columnContentTypes:i,truncate:o=!1,verticalAlign:a,hoverable:l=!0,headings:c}=this.props,{condensed:d}=this.state,u=this.fixedFirstColumns(),p=v(ek.TableRow,l&&ek.hoverable);return s().createElement("tr",{key:`row-${t}`,className:p,onMouseEnter:this.handleHover(t),onMouseLeave:this.handleHover()},e.map((l,p)=>{let f=t===this.state.rowHovered,h=`cell-${p}-row-${t}`,m=this.getColSpan(e.length,c.length,i.length,p);return s().createElement(e7,{key:h,content:l,contentType:i[p],nthColumn:p<=u-1,firstColumn:0===p,truncate:o,verticalAlign:a,colSpan:m,hovered:f,style:n?{height:`${n[t]}px`}:{},inFixedNthColumn:d&&r})}))},this.defaultOnSort=e=>{let{onSort:t,defaultSortDirection:r="ascending",initialSortColumnIndex:n}=this.props,{sortDirection:i=r,sortedColumnIndex:o=n}=this.state,a=r;return o===e&&(a="ascending"===i?"descending":"ascending"),()=>{this.setState({sortDirection:a,sortedColumnIndex:e},()=>{t&&t(e,a)})}}}componentDidMount(){this.handleResize()}componentDidUpdate(e){eC()(e,this.props)||this.handleResize()}componentWillUnmount(){this.handleResize.cancel()}render(){let{headings:e,totals:t,showTotalsInFooter:r,rows:n,footerContent:i,hideScrollIndicator:o=!1,increasedTableDensity:a=!1,hasZebraStripingOnData:l=!1,stickyHeader:c=!1,hasFixedFirstColumn:d=!1,pagination:u}=this.props,{condensed:p,columnVisibilityData:f,isScrolledFarthestLeft:h,isScrolledFarthestRight:m}=this.state,y=this.fixedFirstColumns(),g=n.length%2==0,b=v(ek.DataTable,p&&ek.condensed,t&&ek.ShowTotals,r&&ek.ShowTotalsInFooter,l&&ek.ZebraStripingOnData,l&&g&&ek.RowCountIsEven),E=v(ek.TableWrapper,p&&ek.condensed,a&&ek.IncreasedTableDensity,c&&ek.StickyHeaderEnabled),w=s().createElement("tr",null,e.map((e,t)=>this.renderHeading({heading:e,headingIndex:t,inFixedNthColumn:!1,inStickyHeader:!1}))),S=t?s().createElement("tr",null,t.map((e,t)=>this.renderTotals({total:e,index:t}))):null,_=n.map(e=>e.slice(0,y)),P=e.slice(0,y),C=t?.slice(0,y),x=this.table.current?.children[0].childNodes,A=this.table.current?.children[1].childNodes,k=tu(x),T=tu(A),O=p&&0!==y&&s().createElement("table",{className:v(ek.FixedFirstColumn,!h&&ek.separate),style:{width:`${f[y-1]?.rightEdge}px`}},s().createElement("thead",null,s().createElement("tr",{style:{height:`${k[0]}px`}},P.map((e,t)=>this.renderHeading({heading:e,headingIndex:t,inFixedNthColumn:!0,inStickyHeader:!1}))),t&&!r&&s().createElement("tr",{style:{height:`${k[1]}px`}},C?.map((e,t)=>this.renderTotals({total:e,index:t})))),s().createElement("tbody",null,_.map((e,t)=>this.defaultRenderRow({row:e,index:t,inFixedNthColumn:!0,rowHeights:T}))),t&&r&&s().createElement("tfoot",null,s().createElement("tr",null,C?.map((e,t)=>this.renderTotals({total:e,index:t}))))),I=n.map((e,t)=>this.defaultRenderRow({row:e,index:t,inFixedNthColumn:!1})),j=i?s().createElement("div",{className:ek.Footer},i):null,M=u?s().createElement(tn,Object.assign({type:"table"},u)):null,R=r?null:S,H=r?s().createElement("tfoot",null,S):null,D=e=>o?null:s().createElement(td,{columnVisibilityData:f,isScrolledFarthestLeft:h,isScrolledFarthestRight:m,navigateTableLeft:this.navigateTable("left"),navigateTableRight:this.navigateTable("right"),fixedFirstColumns:y,setRef:t=>{"header"===e?this.headerNav=t:"sticky"===e&&(this.stickyNav=t)}}),N=c?s().createElement(ts,null,s().createElement("div",{className:ek.StickyHeaderWrapper,role:"presentation"},s().createElement(tc,{boundingElement:this.dataTable.current,onStickyChange:e=>{this.changeHeadingFocus(),this.stickyHeaderActive=e}},t=>{let r=v(ek.StickyHeaderInner,t&&ek["StickyHeaderInner-isSticky"]),n=v(ek.StickyHeaderTable,!h&&ek.separate);return s().createElement("div",{className:r},s().createElement("div",null,D("sticky")),s().createElement("table",{className:n,ref:this.stickyTable},s().createElement("thead",null,s().createElement("tr",{className:ek.StickyTableHeadingsRow},e.map((e,t)=>this.renderHeading({heading:e,headingIndex:t,inFixedNthColumn:!!(t<=y-1&&y),inStickyHeader:!0}))))))}))):null;return s().createElement("div",{className:E,ref:this.dataTable},N,D("header"),s().createElement("div",{className:b},s().createElement("div",{className:ek.ScrollContainer,ref:this.scrollContainer},s().createElement(eQ.h,{event:"resize",handler:this.handleResize}),s().createElement(eQ.h,{capture:!0,passive:!0,event:"scroll",handler:this.scrollListener}),O,s().createElement("table",{className:ek.Table,ref:this.table},s().createElement("thead",null,w,R),s().createElement("tbody",null,I),H)),M,j))}fixedFirstColumns(){let{hasFixedFirstColumn:e,fixedFirstColumns:t=0,headings:r}=this.props,n=e&&!t?1:t;return n>=r.length?0:n}}function tf(e){let t=z();return s().createElement(tp,Object.assign({},e,{i18n:t}))}function th(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}function tm(){return(tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}function ty(e,t){return(ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tg(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ty(e,t)}let tv=s().createContext(null);function tb(e,t){var r=Object.create(null);return e&&a.Children.map(e,function(e){return e}).forEach(function(e){r[e.key]=t&&(0,a.isValidElement)(e)?t(e):e}),r}function tE(e,t,r){return null!=r[t]?r[t]:e.props[t]}var tw=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},tS=function(e){function t(t,r){var n,i=(n=e.call(this,t,r)||this).handleExited.bind(function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n));return n.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},n}tg(t,e);var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var r,n,i=t.children,o=t.handleExited;return{children:t.firstRender?tb(e.children,function(t){return(0,a.cloneElement)(t,{onExited:o.bind(null,t),in:!0,appear:tE(t,"appear",e),enter:tE(t,"enter",e),exit:tE(t,"exit",e)})}):(Object.keys(n=function(e,t){function r(r){return r in t?t[r]:e[r]}e=e||{},t=t||{};var n,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(n=0;n<i[l].length;n++){var c=i[l][n];s[i[l][n]]=r(c)}s[l]=r(l)}for(n=0;n<o.length;n++)s[o[n]]=r(o[n]);return s}(i,r=tb(e.children))).forEach(function(t){var s=n[t];if((0,a.isValidElement)(s)){var l=t in i,c=t in r,d=i[t],u=(0,a.isValidElement)(d)&&!d.props.in;c&&(!l||u)?n[t]=(0,a.cloneElement)(s,{onExited:o.bind(null,s),in:!0,exit:tE(s,"exit",e),enter:tE(s,"enter",e)}):c||!l||u?c&&l&&(0,a.isValidElement)(d)&&(n[t]=(0,a.cloneElement)(s,{onExited:o.bind(null,s),in:d.props.in,exit:tE(s,"exit",e),enter:tE(s,"enter",e)})):n[t]=(0,a.cloneElement)(s,{in:!1})}}),n),firstRender:!1}},r.handleExited=function(e,t){var r=tb(this.props.children);e.key in r||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState(function(t){var r=tm({},t.children);return delete r[e.key],{children:r}}))},r.render=function(){var e=this.props,t=e.component,r=e.childFactory,n=th(e,["component","childFactory"]),i=this.state.contextValue,o=tw(this.state.children).map(r);return(delete n.appear,delete n.enter,delete n.exit,null===t)?s().createElement(tv.Provider,{value:i},o):s().createElement(tv.Provider,{value:i},s().createElement(t,n,o))},t}(s().Component);tS.propTypes={},tS.defaultProps={component:"div",childFactory:function(e){return e}};var t_={Body:"Polaris-Modal__Body",NoScrollBody:"Polaris-Modal__NoScrollBody",IFrame:"Polaris-Modal__IFrame"},tP={Section:"Polaris-Modal-Section",titleHidden:"Polaris-Modal-Section--titleHidden"};function tC({children:e,flush:t=!1,subdued:r=!1,titleHidden:n=!1}){let i=v(tP.Section,n&&tP.titleHidden);return s().createElement("div",{className:i},s().createElement(x,Object.assign({as:"section",padding:t?"0":"400"},n&&{paddingInlineEnd:"0"},r&&{background:"bg-surface-tertiary"}),e))}let tx={disabled:!1};var tA=function(e){return e.scrollTop},tk="unmounted",tT="exited",tO="entering",tI="entered",tj="exiting",tM=function(e){function t(t,r){n=e.call(this,t,r)||this;var n,i,o=r&&!r.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?o?(i=tT,n.appearStatus=tO):i=tI:i=t.unmountOnExit||t.mountOnEnter?tk:tT,n.state={status:i},n.nextCallback=null,n}tg(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===tk?{status:tT}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var r=this.state.status;this.props.in?r!==tO&&r!==tI&&(t=tO):(r===tO||r===tI)&&(t=tj)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,r,n=this.props.timeout;return e=t=r=n,null!=n&&"number"!=typeof n&&(e=n.exit,t=n.enter,r=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:r}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){if(this.cancelNextCallback(),t===tO){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:eR().findDOMNode(this);r&&tA(r)}this.performEnter(e)}else this.performExit()}else this.props.unmountOnExit&&this.state.status===tT&&this.setState({status:tk})},r.performEnter=function(e){var t=this,r=this.props.enter,n=this.context?this.context.isMounting:e,i=this.props.nodeRef?[n]:[eR().findDOMNode(this),n],o=i[0],a=i[1],s=this.getTimeouts(),l=n?s.appear:s.enter;if(!e&&!r||tx.disabled){this.safeSetState({status:tI},function(){t.props.onEntered(o)});return}this.props.onEnter(o,a),this.safeSetState({status:tO},function(){t.props.onEntering(o,a),t.onTransitionEnd(l,function(){t.safeSetState({status:tI},function(){t.props.onEntered(o,a)})})})},r.performExit=function(){var e=this,t=this.props.exit,r=this.getTimeouts(),n=this.props.nodeRef?void 0:eR().findDOMNode(this);if(!t||tx.disabled){this.safeSetState({status:tT},function(){e.props.onExited(n)});return}this.props.onExit(n),this.safeSetState({status:tj},function(){e.props.onExiting(n),e.onTransitionEnd(r.exit,function(){e.safeSetState({status:tT},function(){e.props.onExited(n)})})})},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,r=!0;return this.nextCallback=function(n){r&&(r=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var r=this.props.nodeRef?this.props.nodeRef.current:eR().findDOMNode(this),n=null==e&&!this.props.addEndListener;if(!r||n){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)},r.render=function(){var e=this.state.status;if(e===tk)return null;var t=this.props,r=t.children,n=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,th(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return s().createElement(tv.Provider,{value:null},"function"==typeof r?r(e,n):s().cloneElement(s().Children.only(r),n))},t}(s().Component);function tR(){}function tH(e,t){return e.replace(RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}tM.contextType=tv,tM.propTypes={},tM.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:tR,onEntering:tR,onEntered:tR,onExit:tR,onExiting:tR,onExited:tR},tM.UNMOUNTED=tk,tM.EXITED=tT,tM.ENTERING=tO,tM.ENTERED=tI,tM.EXITING=tj;var tD=function(e,t){return e&&t&&t.split(" ").forEach(function(t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=tH(e.className,t):e.setAttribute("class",tH(e.className&&e.className.baseVal||"",t))})},tN=function(e){function t(){for(var t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,r){var n=t.resolveArguments(e,r),i=n[0],o=n[1];t.removeClasses(i,"exit"),t.addClass(i,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,r)},t.onEntering=function(e,r){var n=t.resolveArguments(e,r),i=n[0],o=n[1];t.addClass(i,o?"appear":"enter","active"),t.props.onEntering&&t.props.onEntering(e,r)},t.onEntered=function(e,r){var n=t.resolveArguments(e,r),i=n[0],o=n[1]?"appear":"enter";t.removeClasses(i,o),t.addClass(i,o,"done"),t.props.onEntered&&t.props.onEntered(e,r)},t.onExit=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"appear"),t.removeClasses(r,"enter"),t.addClass(r,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var r=t.resolveArguments(e)[0];t.addClass(r,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"exit"),t.addClass(r,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,r){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,r]},t.getClassNames=function(e){var r=t.props.classNames,n="string"==typeof r,i=n?(n&&r?r+"-":"")+e:r[e],o=n?i+"-active":r[e+"Active"],a=n?i+"-done":r[e+"Done"];return{baseClassName:i,activeClassName:o,doneClassName:a}},t}tg(t,e);var r=t.prototype;return r.addClass=function(e,t,r){var n,i=this.getClassNames(t)[r+"ClassName"],o=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===r&&o&&(i+=" "+o),"active"===r&&e&&tA(e),i&&(this.appliedClasses[t][r]=i,n=i,e&&n&&n.split(" ").forEach(function(t){var r,n;return r=e,n=t,void(r.classList?r.classList.add(n):(r.classList?n&&r.classList.contains(n):-1!==(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+n+" "))||("string"==typeof r.className?r.className=r.className+" "+n:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+n)))}))},r.removeClasses=function(e,t){var r=this.appliedClasses[t],n=r.base,i=r.active,o=r.done;this.appliedClasses[t]={},n&&tD(e,n),i&&tD(e,i),o&&tD(e,o)},r.render=function(){var e=this.props,t=(e.classNames,th(e,["classNames"]));return s().createElement(tM,tm({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(s().Component);tN.defaultProps={classNames:""},tN.propTypes={},function(e){e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Shift=16]="Shift",e[e.Ctrl=17]="Ctrl",e[e.Alt=18]="Alt",e[e.Pause=19]="Pause",e[e.CapsLock=20]="CapsLock",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.LeftArrow=37]="LeftArrow",e[e.UpArrow=38]="UpArrow",e[e.RightArrow=39]="RightArrow",e[e.DownArrow=40]="DownArrow",e[e.Insert=45]="Insert",e[e.Delete=46]="Delete",e[e.Key0=48]="Key0",e[e.Key1=49]="Key1",e[e.Key2=50]="Key2",e[e.Key3=51]="Key3",e[e.Key4=52]="Key4",e[e.Key5=53]="Key5",e[e.Key6=54]="Key6",e[e.Key7=55]="Key7",e[e.Key8=56]="Key8",e[e.Key9=57]="Key9",e[e.KeyA=65]="KeyA",e[e.KeyB=66]="KeyB",e[e.KeyC=67]="KeyC",e[e.KeyD=68]="KeyD",e[e.KeyE=69]="KeyE",e[e.KeyF=70]="KeyF",e[e.KeyG=71]="KeyG",e[e.KeyH=72]="KeyH",e[e.KeyI=73]="KeyI",e[e.KeyJ=74]="KeyJ",e[e.KeyK=75]="KeyK",e[e.KeyL=76]="KeyL",e[e.KeyM=77]="KeyM",e[e.KeyN=78]="KeyN",e[e.KeyO=79]="KeyO",e[e.KeyP=80]="KeyP",e[e.KeyQ=81]="KeyQ",e[e.KeyR=82]="KeyR",e[e.KeyS=83]="KeyS",e[e.KeyT=84]="KeyT",e[e.KeyU=85]="KeyU",e[e.KeyV=86]="KeyV",e[e.KeyW=87]="KeyW",e[e.KeyX=88]="KeyX",e[e.KeyY=89]="KeyY",e[e.KeyZ=90]="KeyZ",e[e.LeftMeta=91]="LeftMeta",e[e.RightMeta=92]="RightMeta",e[e.Select=93]="Select",e[e.Numpad0=96]="Numpad0",e[e.Numpad1=97]="Numpad1",e[e.Numpad2=98]="Numpad2",e[e.Numpad3=99]="Numpad3",e[e.Numpad4=100]="Numpad4",e[e.Numpad5=101]="Numpad5",e[e.Numpad6=102]="Numpad6",e[e.Numpad7=103]="Numpad7",e[e.Numpad8=104]="Numpad8",e[e.Numpad9=105]="Numpad9",e[e.Multiply=106]="Multiply",e[e.Add=107]="Add",e[e.Subtract=109]="Subtract",e[e.Decimal=110]="Decimal",e[e.Divide=111]="Divide",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NumLock=144]="NumLock",e[e.ScrollLock=145]="ScrollLock",e[e.Semicolon=186]="Semicolon",e[e.Equals=187]="Equals",e[e.Comma=188]="Comma",e[e.Dash=189]="Dash",e[e.Period=190]="Period",e[e.ForwardSlash=191]="ForwardSlash",e[e.GraveAccent=192]="GraveAccent",e[e.OpenBracket=219]="OpenBracket",e[e.BackSlash=220]="BackSlash",e[e.CloseBracket=221]="CloseBracket",e[e.SingleQuote=222]="SingleQuote"}(n||(n={}));var tW={Container:"Polaris-Modal-Dialog__Container",Dialog:"Polaris-Modal-Dialog",Modal:"Polaris-Modal-Dialog__Modal",limitHeight:"Polaris-Modal-Dialog--limitHeight",sizeSmall:"Polaris-Modal-Dialog--sizeSmall",sizeLarge:"Polaris-Modal-Dialog--sizeLarge",sizeFullScreen:"Polaris-Modal-Dialog--sizeFullScreen",animateFadeUp:"Polaris-Modal-Dialog--animateFadeUp",entering:"Polaris-Modal-Dialog--entering",exiting:"Polaris-Modal-Dialog--exiting",exited:"Polaris-Modal-Dialog--exited",entered:"Polaris-Modal-Dialog--entered"};let tK=(0,a.createContext)(void 0);var tJ=r(5297);let t$=(0,a.memo)(function({children:e,disabled:t,root:r}){return(0,a.useEffect)(()=>{if(t||!r)return;let e=void 0!==r.current?r.current:r;!e||e.querySelector("[autofocus]")||eo(e,!1)},[t,r]),s().createElement(s().Fragment,null,e)});function tF({trapping:e=!0,children:t}){let{canSafelyFocus:r}=function({trapping:e}){let t=(0,a.useContext)(tJ.K),r=(0,a.useId)();if(!t)throw new L("No FocusManager was provided.");let{trapFocusList:n,add:i,remove:o}=t,s=n[0]===r,l=(0,a.useMemo)(()=>({canSafelyFocus:s}),[s]);return(0,a.useEffect)(()=>{if(e)return i(r),()=>{o(r)}},[i,r,o,e]),l}({trapping:e}),i=(0,a.useRef)(null),[o,l]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{l(!r||!!(i.current&&i.current.contains(document.activeElement))||!e)},[r,e]),s().createElement(t$,{disabled:o,root:i.current},s().createElement("div",{ref:i},s().createElement(eQ.h,{event:"focusin",handler:t=>{let n=i.current&&i.current.contains(document.activeElement);!(!1===e||!i.current||n||t.target instanceof Element&&t.target.matches(`${ef.l4.selector} *`))&&r&&t.target instanceof HTMLElement&&i.current!==t.target&&!i.current.contains(t.target)&&eo(i.current)}}),s().createElement(tr,{keyCode:n.Tab,keyEvent:"keydown",handler:t=>{if(!1===e||!i.current)return;let r=ea(i.current),n=es(i.current);t.target!==n||t.shiftKey||(t.preventDefault(),function(e,t=!0){let r=ea(e,t);r&&r.focus()}(i.current)),t.target===r&&t.shiftKey&&(t.preventDefault(),function(e,t=!0){let r=es(e,t);r&&r.focus()}(i.current))}}),t))}function tU({instant:e,labelledBy:t,children:r,limitHeight:i,size:o,onClose:l,onExited:c,onEntered:d,setClosing:u,hasToasts:p,...f}){let h;let m=(0,eH.Fg)(),y=(0,a.useRef)(null),g=(0,a.useContext)(tK);g&&(h=g.toastMessages);let E=v(tW.Modal,o&&tW[b("size",o)],i&&tW.limitHeight),w=e?tM:tL;(0,a.useEffect)(()=>{y.current&&!y.current.contains(document.activeElement)&&eo(y.current)},[]);let S=s().createElement("div",{"aria-live":"assertive"},h?h.map(e=>s().createElement(G,{visuallyHidden:!0,as:"p",key:e.id},e.content)):null);return s().createElement(w,Object.assign({},f,{nodeRef:y,mountOnEnter:!0,unmountOnExit:!0,timeout:parseInt(m.motion["motion-duration-200"],10),onEntered:d,onExited:c}),s().createElement("div",{className:tW.Container,"data-polaris-layer":!0,"data-polaris-overlay":!0,ref:y},s().createElement(tF,null,s().createElement("div",{role:"dialog","aria-modal":!0,"aria-label":t,"aria-labelledby":t,tabIndex:-1,className:tW.Dialog},s().createElement("div",{className:E},s().createElement(tr,{keyCode:n.Escape,keyEvent:"keydown",handler:()=>{u&&u(!0)}}),s().createElement(tr,{keyCode:n.Escape,handler:()=>{u&&u(!1),l()}}),r),S))))}let tB={appear:v(tW.animateFadeUp,tW.entering),appearActive:v(tW.animateFadeUp,tW.entered),enter:v(tW.animateFadeUp,tW.entering),enterActive:v(tW.animateFadeUp,tW.entered),exit:v(tW.animateFadeUp,tW.exiting),exitActive:v(tW.animateFadeUp,tW.exited)};function tL({children:e,...t}){return s().createElement(tN,Object.assign({},t,{classNames:tB}),e)}function tq({pressed:e,onClick:t}){let r=z();return s().createElement(eg,{variant:"tertiary",pressed:e,icon:O,onClick:t,accessibilityLabel:r.translate("Polaris.Common.close")})}function tz({children:e,columns:t,gap:r,alignItems:n}){let i={...S("inline-grid","grid-template-columns","object"!=typeof t||null===t||Array.isArray(t)?tV(t):Object.fromEntries(Object.entries(t).map(([e,t])=>[e,tV(t)]))),...w("inline-grid","gap","space",r),"--pc-inline-grid-align-items":n};return s().createElement("div",{className:"Polaris-InlineGrid",style:E(i)},e)}function tV(e){if(e)return"number"!=typeof e&&isNaN(Number(e))?"string"==typeof e?e:e.map(e=>{switch(e){case"oneThird":case"oneHalf":return"minmax(0, 1fr)";case"twoThirds":return"minmax(0, 2fr)"}}).join(" "):`repeat(${Number(e)}, minmax(0, 1fr))`}function tG({id:e,children:t,closing:r,titleHidden:n,onClose:i}){return n||!t?s().createElement(x,{position:"absolute",insetInlineEnd:"400",insetBlockStart:"400",zIndex:"1"},s().createElement(tq,{onClick:i})):s().createElement(x,{paddingBlockStart:"400",paddingBlockEnd:"400",paddingInlineStart:"400",paddingInlineEnd:"400",borderBlockEndWidth:"025",borderColor:"border",background:"bg-surface-tertiary"},s().createElement(tz,{columns:{xs:"1fr auto"},gap:"400"},s().createElement(ev,{gap:"400",blockAlign:"center"},s().createElement(G,{id:e,as:"h2",variant:"headingMd",breakWord:!0},t)),s().createElement(tq,{pressed:r,onClick:i})))}var tX={Backdrop:"Polaris-Backdrop",transparent:"Polaris-Backdrop--transparent",belowNavigation:"Polaris-Backdrop--belowNavigation"},tY=r(3959);function tZ(e){let t=function(){let e=(0,a.useContext)(tY.q);if(!e)throw new L("No ScrollLockManager was provided.");return e}();return(0,a.useEffect)(()=>(t.registerScrollLock(),()=>{t.unregisterScrollLock()}),[t]),null}function tQ(e){let{onClick:t,onTouchStart:r,belowNavigation:n,transparent:i,setClosing:o}=e,a=v(tX.Backdrop,n&&tX.belowNavigation,i&&tX.transparent);return s().createElement(s().Fragment,null,s().createElement(tZ,null),s().createElement("div",{className:a,onClick:()=>{o&&o(!1),t&&t()},onTouchStart:r,onMouseDown:()=>{o&&o(!0)}}))}function t0(e,t={}){return Array.isArray(e)?e.map((e,r)=>t1(e,t,r)):t1(e,t)}function t1({content:e,onAction:t,plain:r,destructive:n,...i},o,a){let l=!o?.tone&&n?"critical":o?.tone;return s().createElement(eg,Object.assign({key:a,onClick:t,tone:l,variant:(r?"plain":void 0)||(n?"primary":void 0)},i,o),e)}function t2({primaryAction:e,secondaryActions:t,children:r}){let n=e&&t0(e,{variant:"primary"})||null,i=t&&t0(t)||null,o=n||i?s().createElement(ev,{gap:"200"},i,n):null;return s().createElement(ev,{gap:"400",blockAlign:"center"},s().createElement(x,{borderColor:"border",borderBlockStartWidth:"025",padding:"400",width:"100%"},s().createElement(ev,{gap:"400",blockAlign:"center",align:"space-between"},s().createElement(x,null,r),o)))}let t5=function({children:e,title:t,titleHidden:r=!1,src:n,iFrameName:i,open:o,instant:l,sectioned:c,loading:d,size:u,limitHeight:p,footer:f,primaryAction:h,secondaryActions:y,onScrolledToBottom:g,activator:v,activatorWrapper:b="div",onClose:E,onIFrameLoad:w,onTransitionEnd:S,noScroll:_}){let P,C;let[A,k]=(0,a.useState)(200),[T,O]=(0,a.useState)(!1),I=(0,a.useId)(),j=(0,a.useRef)(null),M=z().translate("Polaris.Modal.iFrameTitle"),R=(0,a.useCallback)(()=>{S&&S()},[S]),H=(0,a.useCallback)(()=>{k(200);let e=v&&t4(v)?v&&v.current:j.current;e&&requestAnimationFrame(()=>eo(e))},[v]),D=(0,a.useCallback)(e=>{let t=e.target;if(t&&t.contentWindow)try{k(t.contentWindow.document.body.scrollHeight)}catch(e){k(400)}null!=w&&w(e)},[w]);if(o){let o=f||h||y?s().createElement(t2,{primaryAction:h,secondaryActions:y},f):null,m=c?null==e?null:!function(e,t){if(null==e||!(0,a.isValidElement)(e)||"string"==typeof e.type)return!1;let{type:r}=e,n=e.props?.__type__||r;return(Array.isArray(t)?t:[t]).some(e=>"string"!=typeof n&&J(e,n))}(e,tC)?s().createElement(tC,{titleHidden:r},e):e:e,v=d?s().createElement(x,{padding:"400"},s().createElement(ev,{gap:"400",align:"center",blockAlign:"center"},s().createElement(ep,null))):m,b=_?s().createElement("div",{className:t_.NoScrollBody},s().createElement(x,{width:"100%",overflowX:"hidden",overflowY:"hidden"},v)):s().createElement(eY,{shadow:!0,className:t_.Body,onScrolledToBottom:g},v),w=n?s().createElement("iframe",{name:i,title:M,src:n,className:t_.IFrame,onLoad:D,style:{height:`${A}px`}}):b;P=s().createElement(tU,{instant:l,labelledBy:I,onClose:E,onEntered:R,onExited:H,size:u,limitHeight:p,setClosing:O},s().createElement(tG,{titleHidden:r,id:I,closing:T,onClose:E},t),w,o),C=s().createElement(tQ,{setClosing:O,onClick:E})}let N=!l,W=v&&!t4(v)?s().createElement(x,{ref:j,as:b},v):null;return s().createElement(m.Provider,{value:!0},W,s().createElement(eJ,{idPrefix:"modal"},s().createElement(tS,{appear:N,enter:N,exit:N},P),C))};function t4(e){return Object.prototype.hasOwnProperty.call(e,"current")}t5.Section=tC;var t6=function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),a.createElement("path",{d:"M13.03 6.97a.75.75 0 0 1 0 1.06l-1.97 1.97 1.97 1.97a.75.75 0 1 1-1.06 1.06l-1.97-1.97-1.97 1.97a.75.75 0 0 1-1.06-1.06l1.97-1.97-1.97-1.97a.75.75 0 0 1 1.06-1.06l1.97 1.97 1.97-1.97a.75.75 0 0 1 1.06 0Z"}),a.createElement("path",{fillRule:"evenodd",d:"M10 17a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0-1.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11Z"}))};t6.displayName="XCircleIcon";var t3={TextField:"Polaris-TextField",ClearButton:"Polaris-TextField__ClearButton",Loading:"Polaris-TextField__Loading",disabled:"Polaris-TextField--disabled",error:"Polaris-TextField--error",readOnly:"Polaris-TextField--readOnly",Input:"Polaris-TextField__Input",Backdrop:"Polaris-TextField__Backdrop",multiline:"Polaris-TextField--multiline",hasValue:"Polaris-TextField--hasValue",focus:"Polaris-TextField--focus",VerticalContent:"Polaris-TextField__VerticalContent",InputAndSuffixWrapper:"Polaris-TextField__InputAndSuffixWrapper",toneMagic:"Polaris-TextField--toneMagic",Prefix:"Polaris-TextField__Prefix",Suffix:"Polaris-TextField__Suffix",AutoSizeWrapper:"Polaris-TextField__AutoSizeWrapper",AutoSizeWrapperWithSuffix:"Polaris-TextField__AutoSizeWrapperWithSuffix",suggestion:"Polaris-TextField--suggestion",borderless:"Polaris-TextField--borderless",slim:"Polaris-TextField--slim","Input-hasClearButton":"Polaris-TextField__Input--hasClearButton","Input-suffixed":"Polaris-TextField__Input--suffixed","Input-alignRight":"Polaris-TextField__Input--alignRight","Input-alignLeft":"Polaris-TextField__Input--alignLeft","Input-alignCenter":"Polaris-TextField__Input--alignCenter","Input-autoSize":"Polaris-TextField__Input--autoSize",PrefixIcon:"Polaris-TextField__PrefixIcon",CharacterCount:"Polaris-TextField__CharacterCount",AlignFieldBottom:"Polaris-TextField__AlignFieldBottom",Spinner:"Polaris-TextField__Spinner",SpinnerIcon:"Polaris-TextField__SpinnerIcon",Resizer:"Polaris-TextField__Resizer",DummyInput:"Polaris-TextField__DummyInput",Segment:"Polaris-TextField__Segment",monospaced:"Polaris-TextField--monospaced"};let t7=s().forwardRef(function({onChange:e,onClick:t,onMouseDown:r,onMouseUp:n,onBlur:i},o){function a(t){return()=>e(t)}function l(e){return t=>{0===t.button&&r?.(e)}}return s().createElement("div",{className:t3.Spinner,onClick:t,"aria-hidden":!0,ref:o},s().createElement("div",{role:"button",className:t3.Segment,tabIndex:-1,onClick:a(1),onMouseDown:l(a(1)),onMouseUp:n,onBlur:i},s().createElement("div",{className:t3.SpinnerIcon},s().createElement(Y,{source:Z}))),s().createElement("div",{role:"button",className:t3.Segment,tabIndex:-1,onClick:a(-1),onMouseDown:l(a(-1)),onMouseUp:n,onBlur:i},s().createElement("div",{className:t3.SpinnerIcon},s().createElement(Y,{source:Q}))))});var t8={hidden:"Polaris-Labelled--hidden",LabelWrapper:"Polaris-Labelled__LabelWrapper",disabled:"Polaris-Labelled--disabled",HelpText:"Polaris-Labelled__HelpText",readOnly:"Polaris-Labelled--readOnly",Error:"Polaris-Labelled__Error",Action:"Polaris-Labelled__Action"},t9=function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),a.createElement("path",{d:"M10 6a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5a.75.75 0 0 1 .75-.75Z"}),a.createElement("path",{d:"M11 13a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"}),a.createElement("path",{fillRule:"evenodd",d:"M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Zm-1.5 0a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0Z"}))};function re({message:e,fieldID:t}){return e?s().createElement("div",{id:`${t}Error`,className:"Polaris-InlineError"},s().createElement("div",{className:"Polaris-InlineError__Icon"},s().createElement(Y,{source:t9})),s().createElement(G,{as:"span",variant:"bodyMd"},e)):null}t9.displayName="AlertCircleIcon";var rt={Label:"Polaris-Label",hidden:"Polaris-Label--hidden",Text:"Polaris-Label__Text",RequiredIndicator:"Polaris-Label__RequiredIndicator"};function rr({children:e,id:t,hidden:r,requiredIndicator:n}){let i=v(rt.Label,r&&rt.hidden);return s().createElement("div",{className:i},s().createElement("label",{id:`${t}Label`,htmlFor:t,className:v(rt.Text,n&&rt.RequiredIndicator)},s().createElement(G,{as:"span",variant:"bodyMd"},e)))}function rn({id:e,label:t,error:r,action:n,helpText:i,children:o,labelHidden:a,requiredIndicator:l,disabled:c,readOnly:d,...u}){let p=v(a&&t8.hidden,c&&t8.disabled,d&&t8.readOnly),f=n?s().createElement("div",{className:t8.Action},t1(n,{variant:"plain"})):null,h=i?s().createElement("div",{className:t8.HelpText,id:ri(e),"aria-disabled":c},s().createElement(G,{as:"span",tone:"subdued",variant:"bodyMd",breakWord:!0},i)):null,m=r&&"boolean"!=typeof r&&s().createElement("div",{className:t8.Error},s().createElement(re,{message:r,fieldID:e})),y=t?s().createElement("div",{className:t8.LabelWrapper},s().createElement(rr,Object.assign({id:e,requiredIndicator:l},u,{hidden:!1}),t),f):null;return s().createElement("div",{className:p},y,o,m,h)}function ri(e){return`${e}HelpText`}var ro={Connected:"Polaris-Connected",Item:"Polaris-Connected__Item","Item-primary":"Polaris-Connected__Item--primary","Item-focused":"Polaris-Connected__Item--focused"};function ra({children:e,position:t}){let{value:r,setTrue:n,setFalse:i}=F(!1),o=v(ro.Item,r&&ro["Item-focused"],"primary"===t?ro["Item-primary"]:ro["Item-connection"]);return s().createElement("div",{onBlur:i,onFocus:n,className:o},e)}function rs({children:e,left:t,right:r}){let n=t?s().createElement(ra,{position:"left"},t):null,i=r?s().createElement(ra,{position:"right"},r):null;return s().createElement("div",{className:ro.Connected},n,s().createElement(ra,{position:"primary"},e),i)}function rl({contents:e,currentHeight:t=null,minimumLines:r,onHeightChange:n}){let i=(0,a.useRef)(null),o=(0,a.useRef)(null),l=(0,a.useRef)(),c=(0,a.useRef)(t);t!==c.current&&(c.current=t),(0,a.useEffect)(()=>()=>{l.current&&cancelAnimationFrame(l.current)},[]);let d=r?s().createElement("div",{ref:o,className:t3.DummyInput,dangerouslySetInnerHTML:{__html:function(e){let t="";for(let r=0;r<e;r++)t+="<br>";return t}(r)}}):null,u=(0,a.useCallback)(()=>{l.current&&cancelAnimationFrame(l.current),l.current=requestAnimationFrame(()=>{if(!i.current||!o.current)return;let e=Math.max(i.current.offsetHeight,o.current.offsetHeight);e!==c.current&&n(e)})},[n]);return(0,j.L)(()=>{u()}),s().createElement("div",{"aria-hidden":!0,className:t3.Resizer},s().createElement(eQ.h,{event:"resize",handler:u}),s().createElement("div",{ref:i,className:t3.DummyInput,dangerouslySetInnerHTML:{__html:e?`${e.replace(rd,ru)}<br>`:"<br>"}}),d)}let rc={"&":"&amp;","<":"&lt;",">":"&gt;","\n":"<br>","\r":""},rd=RegExp(`[${Object.keys(rc).join()}]`,"g");function ru(e){return rc[e]}function rp({prefix:e,suffix:t,verticalContent:r,placeholder:i,value:o="",helpText:l,label:c,labelAction:d,labelHidden:u,disabled:p,clearButton:f,readOnly:h,autoFocus:m,focused:y,multiline:g,error:E,connectedRight:w,connectedLeft:S,type:_="text",name:P,id:C,role:x,step:A,largeStep:k,autoComplete:T,max:O,maxLength:I,maxHeight:j,min:R,minLength:H,pattern:D,inputMode:N,spellCheck:W,ariaOwns:K,ariaControls:J,ariaExpanded:$,ariaActiveDescendant:F,ariaAutocomplete:U,showCharacterCount:B,align:L,requiredIndicator:q,monospaced:V,selectTextOnFocus:X,suggestion:Z,variant:Q="inherit",size:ee="medium",onClearButtonClick:et,onChange:er,onSpinnerChange:en,onFocus:ei,onBlur:eo,tone:ea,autoSize:es,loading:el}){let ec=z(),[eu,ef]=(0,a.useState)(null),[eh,em]=(0,a.useState)(!!y),ey=(0,ed.u)(),eg=(0,a.useId)(),ev=C??eg,eb=(0,a.useRef)(null),eE=(0,a.useRef)(null),ew=(0,a.useRef)(null),eS=(0,a.useRef)(null),e_=(0,a.useRef)(null),eP=(0,a.useRef)(null),eC=(0,a.useRef)(null),ex=(0,a.useRef)(),eA=(0,a.useRef)(null),ek=(0,a.useCallback)(()=>g?ew.current:eE.current,[g]);(0,a.useEffect)(()=>{let e=ek();e&&void 0!==y&&(y?e.focus():e.blur())},[y,r,ek]),(0,a.useEffect)(()=>{let e=eE.current,t="text"===_||"tel"===_||"search"===_||"url"===_||"password"===_;e&&t&&Z&&e.setSelectionRange(o.length,Z.length)},[eh,o,_,Z]);let eT=Z||o,eO=null!=A?A:1,eI=null!=O?O:1/0,ej=null!=R?R:-1/0,eM=v(t3.TextField,!!eT&&t3.hasValue,p&&t3.disabled,h&&t3.readOnly,E&&t3.error,ea&&t3[b("tone",ea)],g&&t3.multiline,eh&&!p&&t3.focus,"inherit"!==Q&&t3[Q],"slim"===ee&&t3.slim),eR="currency"===_?"text":_,eH="number"===_||"integer"===_,eD=s().isValidElement(e)&&e.type===Y,eN=e?s().createElement("div",{className:v(t3.Prefix,eD&&t3.PrefixIcon),id:`${ev}-Prefix`,ref:eS},s().createElement(G,{as:"span",variant:"bodyMd"},e)):null,eW=t?s().createElement("div",{className:t3.Suffix,id:`${ev}-Suffix`,ref:e_},s().createElement(G,{as:"span",variant:"bodyMd"},t)):null,eK=el?s().createElement("div",{className:t3.Loading,id:`${ev}-Loading`,ref:eP},s().createElement(ep,{size:"small"})):null,eJ=null;if(B){let e=eT.length,t=I?ec.translate("Polaris.TextField.characterCountWithMaxLength",{count:e,limit:I}):ec.translate("Polaris.TextField.characterCount",{count:e}),r=v(t3.CharacterCount,g&&t3.AlignFieldBottom),n=I?`${e}/${I}`:e;eJ=s().createElement("div",{id:`${ev}-CharacterCounter`,className:r,"aria-label":t,"aria-live":eh?"polite":"off","aria-atomic":"true",onClick:e3},s().createElement(G,{as:"span",variant:"bodyMd"},n))}let e$=""!==eT,eF=f&&e$?s().createElement("button",{type:"button",className:t3.ClearButton,onClick:function(){et&&et(ev)},disabled:p},s().createElement(G,{as:"span",visuallyHidden:!0},ec.translate("Polaris.Common.clear")),s().createElement(Y,{source:t6,tone:"base"})):null,eU=(0,a.useCallback)((e,t=eO)=>{if(null==er&&null==en)return;let r=o?parseFloat(o):0;if(isNaN(r))return;let n="integer"===_?0:Math.max((r.toString().split(".")[1]||[]).length,(t.toString().split(".")[1]||[]).length),i=Math.min(Number(eI),Math.max(r+e*t,Number(ej)));null!=en?en(String(i.toFixed(n)),ev):null!=er&&er(String(i.toFixed(n)),ev)},[ev,eI,ej,er,en,eO,_,o]),eB=(0,a.useCallback)(()=>{clearTimeout(ex.current)},[]),eL=(0,a.useCallback)(e=>{let t=200,r=()=>{t>50&&(t-=10),e(0),ex.current=window.setTimeout(r,t)};ex.current=window.setTimeout(r,t),document.addEventListener("mouseup",eB,{once:!0})},[eB]),eq=!eH||0===A||p||h?null:s().createElement(t7,{onClick:e3,onChange:eU,onMouseDown:eL,onMouseUp:eB,ref:eA,onBlur:e7}),ez=g&&eu?{height:eu,maxHeight:j}:null,eV=(0,a.useCallback)(e=>{ef(e)},[]),eG=g&&ey?s().createElement(rl,{contents:eT||i,currentHeight:eu,minimumLines:"number"==typeof g?g:1,onHeightChange:eV}):null,eX=[];E&&eX.push(`${ev}Error`),l&&eX.push(ri(ev)),B&&eX.push(`${ev}-CharacterCounter`);let eY=[];e&&eY.push(`${ev}-Prefix`),t&&eY.push(`${ev}-Suffix`),r&&eY.push(`${ev}-VerticalContent`),eY.unshift(`${ev}Label`);let eZ=v(t3.Input,L&&t3[b("Input-align",L)],t&&t3["Input-suffixed"],f&&t3["Input-hasClearButton"],V&&t3.monospaced,Z&&t3.suggestion,es&&t3["Input-autoSize"]),eQ=e=>{if(em(!0),X&&!Z){let e=ek();e?.select()}ei&&ei(e)};M("wheel",function(e){document.activeElement===e.target&&eH&&e.stopPropagation()},eE);let e0=(0,a.createElement)(g?"textarea":"input",{name:P,id:ev,disabled:p,readOnly:h,role:x,autoFocus:m,value:eT,placeholder:i,style:ez,autoComplete:T,className:eZ,ref:g?ew:eE,min:R,max:O,step:A,minLength:H,maxLength:I,spellCheck:W,pattern:D,inputMode:N,type:eR,rows:function(e){if(e)return"number"==typeof e?e:1}(g),size:es?1:void 0,"aria-describedby":eX.length?eX.join(" "):void 0,"aria-labelledby":eY.join(" "),"aria-invalid":!!E,"aria-owns":K,"aria-activedescendant":F,"aria-autocomplete":U,"aria-controls":J,"aria-expanded":$,"aria-required":q,...function(e){if(e)return e||"number"==typeof e&&e>0?{"aria-multiline":!0}:void 0}(g),onFocus:eQ,onBlur:e7,onClick:e3,onKeyPress:function(e){let{key:t,which:r}=e;!eH||r===n.Enter||"number"===_&&/[\d.,eE+-]$/.test(t)||"integer"===_&&/[\deE+-]$/.test(t)||e.preventDefault()},onKeyDown:function(e){if(!eH)return;let{key:t,which:r}=e;"integer"===_&&("ArrowUp"===t||r===n.UpArrow)&&(eU(1),e.preventDefault()),"integer"===_&&("ArrowDown"===t||r===n.DownArrow)&&(eU(-1),e.preventDefault()),(r===n.Home||"Home"===t)&&void 0!==R&&(null!=en?en(String(R),ev):null!=er&&er(String(R),ev)),(r===n.End||"End"===t)&&void 0!==O&&(null!=en?en(String(O),ev):null!=er&&er(String(O),ev)),(r===n.PageUp||"PageUp"===t)&&void 0!==k&&eU(1,k),(r===n.PageDown||"PageDown"===t)&&void 0!==k&&eU(-1,k)},onChange:Z?void 0:e6,onInput:Z?e6:void 0,"data-1p-ignore":"off"===T||void 0,"data-lpignore":"off"===T||void 0,"data-form-type":"off"===T?"other":void 0}),e1=r?s().createElement("div",{className:t3.VerticalContent,id:`${ev}-VerticalContent`,ref:eC,onClick:e3},r,e0):null,e2=r?e1:e0,e5=s().createElement("div",{className:v(t3.Backdrop,S&&t3["Backdrop-connectedLeft"],w&&t3["Backdrop-connectedRight"])}),e4=es?s().createElement("div",{className:t3.InputAndSuffixWrapper},s().createElement("div",{className:v(t3.AutoSizeWrapper,t&&t3.AutoSizeWrapperWithSuffix),"data-auto-size-value":o||i},e2),eW):s().createElement(s().Fragment,null,e2,eW);return s().createElement(rn,{label:c,id:ev,error:E,action:d,labelHidden:u,helpText:l,requiredIndicator:q,disabled:p,readOnly:h},s().createElement(rs,{left:S,right:w},s().createElement("div",{className:eM,onClick:function(e){let{target:t}=e,r=eE?.current?.getAttribute("role");if(t===eE.current&&"combobox"===r){eE.current?.focus(),eQ(e);return}e9(t)||tr(t)||e8(t)||te(t)||tt(t)||eh||ek()?.focus()},ref:eb},eN,e4,eJ,eK,eF,eq,e5,eG)));function e6(e){er&&er(e.currentTarget.value,ev)}function e3(e){te(e.target)||e8(e.target)||e.stopPropagation(),e9(e.target)||tr(e.target)||e8(e.target)||tt(e.target)||eh||(em(!0),ek()?.focus())}function e7(e){em(!1),!eb.current?.contains(e?.relatedTarget)&&eo&&eo(e)}function e8(e){let t=ek();return e instanceof HTMLElement&&t&&(t.contains(e)||t.contains(document.activeElement))}function e9(e){return e instanceof Element&&(eS.current&&eS.current.contains(e)||e_.current&&e_.current.contains(e))}function te(e){return e instanceof Element&&eA.current&&eA.current.contains(e)}function tt(e){return e instanceof Element&&eP.current&&eP.current.contains(e)}function tr(e){return e instanceof Element&&eC.current&&(eC.current.contains(e)||eC.current.contains(document.activeElement))}}var rf={Select:"Polaris-Select",disabled:"Polaris-Select--disabled",error:"Polaris-Select--error",Backdrop:"Polaris-Select__Backdrop",Input:"Polaris-Select__Input",Content:"Polaris-Select__Content",InlineLabel:"Polaris-Select__InlineLabel",Icon:"Polaris-Select__Icon",SelectedOption:"Polaris-Select__SelectedOption",Prefix:"Polaris-Select__Prefix",hover:"Polaris-Select--hover",toneMagic:"Polaris-Select--toneMagic"};function rh({options:e,label:t,labelAction:r,labelHidden:n,labelInline:i,disabled:o,helpText:l,placeholder:c,id:d,name:u,value:p="",error:f,onChange:h,onFocus:m,onBlur:y,requiredIndicator:g,tone:E}){let{value:w,toggle:S}=F(!1),_=(0,a.useId)(),P=d??_,C=v(rf.Select,f&&rf.error,E&&rf[b("tone",E)],o&&rf.disabled),A=(0,a.useCallback)(e=>{S(),m?.(e)},[m,S]),k=(0,a.useCallback)(e=>{S(),y?.(e)},[y,S]),T=h?e=>h(e.currentTarget.value,P):void 0,O=[];l&&O.push(ri(P)),f&&O.push(`${P}Error`);let I=(e||[]).map(rv);c&&(I=[{label:c,value:"",disabled:!0},...I]);let j=i&&s().createElement(x,{paddingInlineEnd:"100"},s().createElement(G,{as:"span",variant:"bodyMd",tone:E&&"magic"===E&&!w?"magic-subdued":"subdued",truncate:!0},t)),M=function(e,t){let r;let n=(r=[],e.forEach(e=>{ry(e)?r=r.concat(e.options):r.push(e)}),r),i=n.find(e=>t===e.value);return void 0===i&&(i=n.find(e=>!e.hidden)),i||{value:"",label:""}}(I,p),R=M.prefix&&s().createElement("div",{className:rf.Prefix},M.prefix),H=s().createElement("div",{className:rf.Content,"aria-hidden":!0,"aria-disabled":o},j,R,s().createElement("span",{className:rf.SelectedOption},M.label),s().createElement("span",{className:rf.Icon},s().createElement(Y,{source:ee}))),D=I.map(rE);return s().createElement(rn,{id:P,label:t,error:f,action:r,labelHidden:!!i||n,helpText:l,requiredIndicator:g,disabled:o},s().createElement("div",{className:C},s().createElement("select",{id:P,name:u,value:p,className:rf.Input,disabled:o,onFocus:A,onBlur:k,onChange:T,"aria-invalid":!!f,"aria-describedby":O.length?O.join(" "):void 0,"aria-required":g},D),H,s().createElement("div",{className:rf.Backdrop})))}function rm(e){return"string"==typeof e}function ry(e){return"object"==typeof e&&"options"in e&&null!=e.options}function rg(e){return{label:e,value:e}}function rv(e){if(rm(e))return rg(e);if(ry(e)){let{title:t,options:r}=e;return{title:t,options:r.map(e=>rm(e)?rg(e):e)}}return e}function rb(e){let{value:t,label:r,prefix:n,key:i,...o}=e;return s().createElement("option",Object.assign({key:i??t,value:t},o),r)}function rE(e){if(ry(e)){let{title:t,options:r}=e;return s().createElement("optgroup",{label:t,key:t},r.map(rb))}return rb(e)}var rw=function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),a.createElement("path",{fillRule:"evenodd",d:"M16.5 10a.75.75 0 0 1-.75.75h-9.69l2.72 2.72a.75.75 0 0 1-1.06 1.06l-4-4a.75.75 0 0 1 0-1.06l4-4a.75.75 0 1 1 1.06 1.06l-2.72 2.72h9.69a.75.75 0 0 1 .75.75Z"}))};rw.displayName="ArrowLeftIcon";var rS=function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),a.createElement("path",{fillRule:"evenodd",d:"M3.5 10a.75.75 0 0 1 .75-.75h9.69l-2.72-2.72a.75.75 0 1 1 1.06-1.06l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06-1.06l2.72-2.72h-9.69a.75.75 0 0 1-.75-.75Z"}))};function r_(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function rP(e){return 11===e?0:e+1}function rC(e,t){return e.getTime()>t.getTime()}function rx(e,t){return e.getTime()<t.getTime()}function rA(e,t){return t.some(t=>e.getTime()===t.getTime())}rS.displayName="ArrowRightIcon";let rk=[0,1,2,3,4,5,6];function rT(e){let t=[...rk];return[...t.splice(e),...t]}function rO(e){switch(e){case 0:return"january";case 1:return"february";case 2:return"march";case 3:return"april";case 4:return"may";case 5:return"june";case 6:return"july";case 7:return"august";case 8:return"september";case 9:return"october";case 10:return"november";case 11:return"december"}}function rI(e){switch(e){case 0:return"sunday";case 1:return"monday";case 2:return"tuesday";case 3:return"wednesday";case 4:return"thursday";case 5:return"friday";case 6:return"saturday"}}var rj={DatePicker:"Polaris-DatePicker",MonthLayout:"Polaris-DatePicker__MonthLayout",MonthContainer:"Polaris-DatePicker__MonthContainer",Month:"Polaris-DatePicker__Month",DayCell:"Polaris-DatePicker__DayCell","DayCell-inRange":"Polaris-DatePicker__DayCell--inRange",Day:"Polaris-DatePicker__Day","Day-inRange":"Polaris-DatePicker__Day--inRange","Day-selected":"Polaris-DatePicker__Day--selected","Day-disabled":"Polaris-DatePicker__Day--disabled",EmptyDayCell:"Polaris-DatePicker__EmptyDayCell",Weekday:"Polaris-DatePicker__Weekday",Header:"Polaris-DatePicker__Header",Title:"Polaris-DatePicker__Title","Day-firstInRange":"Polaris-DatePicker__Day--firstInRange","Day-hasRange":"Polaris-DatePicker__Day--hasRange","Day-hoverRight":"Polaris-DatePicker__Day--hoverRight","Day-lastInRange":"Polaris-DatePicker__Day--lastInRange",Week:"Polaris-DatePicker__Week"};let rM=(0,a.memo)(function({label:e,title:t,current:r}){return s().createElement("th",{"aria-label":e,scope:"col",className:rj.Weekday},s().createElement(G,{as:"span",variant:"bodySm",alignment:"center",fontWeight:r?"bold":"regular",tone:r?void 0:"subdued"},t))}),rR=(0,a.memo)(function({day:e,focused:t,onClick:r,onHover:n=rH,onFocus:i=rH,selected:o,inRange:l,inHoveringRange:c,disabled:d,lastDayOfMonth:u,isLastSelectedDay:p,isFirstSelectedDay:f,isHoveringRight:h,rangeIsDifferent:m,weekday:y,selectedAccessibilityLabelPrefix:g}){let b=z(),E=(0,a.useRef)(null),w=u||e;if((0,a.useEffect)(()=>{t&&E.current&&E.current.focus()},[t]),!e)return s().createElement("td",{className:rj.EmptyDayCell,onMouseOver:()=>n(w)});let S=r&&!d?r.bind(null,e):rH,_=r_(new Date,e),P=v(rj.DayCell,o&&rj["DayCell-selected"],(l||c)&&!d&&rj["DayCell-inRange"],p&&rj["DayCell-lastInRange"],f&&rj["DayCell-firstInRange"],h&&rj["DayCell-hoverRight"],m&&rj["DayCell-hasRange"]),C=v(rj.Day,o&&rj["Day-selected"],d&&rj["Day-disabled"],(l||c)&&!d&&rj["Day-inRange"],p&&rj["Day-lastInRange"],f&&rj["Day-firstInRange"],h&&rj["Day-hoverRight"],m&&rj["Day-hasRange"]),x=e.getDate(),A=(t||o||_||1===x)&&!d?0:-1,k=[o&&g?`${g} `:"",`${_?b.translate("Polaris.DatePicker.today"):""}`,`${y||""} `,`${b.translate(`Polaris.DatePicker.months.${rO(e.getMonth())}`)} `,`${x} `,`${e.getFullYear()}`].join("");return s().createElement("td",{className:P},s().createElement("button",{onFocus:()=>i(e),type:"button",ref:E,tabIndex:A,className:C,onMouseOver:()=>n(w),onClick:S,"aria-label":k,"aria-disabled":d,"aria-pressed":o},s().createElement(G,{as:"span",variant:"bodySm",alignment:"center",fontWeight:_?"bold":"regular"},x)))});function rH(){}function rD({focusedDate:e,selected:t,hoverDate:r,disableDatesBefore:n,disableDatesAfter:i,disableSpecificDates:o,allowRange:l,onChange:c=rN,onHover:d=rN,onFocus:u=rN,month:p,year:f,weekStartsOn:h,accessibilityLabelPrefixes:m}){let y=z(),g=l?rW:()=>!1,v=new Date,b=v.getMonth()===p&&v.getFullYear()===f,E=(0,a.useMemo)(()=>(function(e,t,r=0){let n=new Date(t,e,1),i=n.getDay(),o=[[]],a=o[0],s=n,l=rT(r);for(let e=0;e<l.indexOf(i);e++)a.push(null);for(;s.getMonth()===e;)7===a.length&&o.push(a=[]),a.push(s),s=new Date(t,e,s.getDate()+1);for(;a.length<7;)a.push(null);return o})(p,f,h),[p,h,f]),w=rT(h).map(e=>s().createElement(rM,{key:e,title:y.translate(`Polaris.DatePicker.daysAbbreviated.${rI(e)}`),label:x(e),current:b&&new Date().getDay()===e})),S=(0,a.useCallback)(e=>{c(function(e,t){if(null==e)return{start:t,end:t};let{start:r,end:n}=e;return n&&(rC(r,n)||rx(r,n))?{start:t,end:t}:r?rx(t,r)?{start:t,end:t}:{start:r,end:t}:n?rx(t,n)?{start:t,end:n}:{start:r||n,end:t}:{start:t,end:t}}(l?t:void 0,e))},[l,c,t]),_=(0,a.useMemo)(()=>new Date(f,p+1,0),[p,f]);function P(a,c){let p;if(null==a)return s().createElement(rR,{key:c,onHover:d,lastDayOfMonth:_});let f=n&&rx(a,n)||i&&rC(a,i)||o&&rA(a,o),h=l&&t&&function(e,t){if(null==e)return!1;let{start:r}=t;return!!(r&&r_(r,e))}(a,t),y=l&&t&&(!r_(t.start,t.end)&&function(e,t){if(null==e)return!1;let{end:r}=t;return!!(r&&r_(r,e))}(a,t)||r&&r_(t.start,t.end)&&rC(r,t.start)&&r_(a,r)&&!h),v=!(t&&r_(t.start,t.end)),b=r&&rx(a,r),[E,w]=m;return l&&h||!l&&E?p=E:l&&y&&(p=w),s().createElement(rR,{selectedAccessibilityLabelPrefix:p,weekday:x(c),focused:null!=e&&r_(a,e),day:a,key:c,onFocus:u,onClick:S,onHover:d,selected:null!=t&&function(e,t){if(null==e)return!1;let{start:r,end:n}=t;return!!(r&&r_(r,e)||n&&r_(n,e))}(a,t),inRange:null!=t&&function(e,t){if(null==e)return!1;let{start:r,end:n}=t;return!!(r&&e>r&&n&&e<n)}(a,t),disabled:f,inHoveringRange:null!=t&&null!=r&&g(a,t,r),isLastSelectedDay:y,isFirstSelectedDay:h,isHoveringRight:b,rangeIsDifferent:v})}let C=E.map((e,t)=>s().createElement("tr",{className:rj.Week,key:t},e.map(P)));return s().createElement("div",{className:rj.MonthContainer},s().createElement("table",{role:"grid",className:rj.Month},s().createElement("caption",{className:rj.Title},s().createElement(G,{as:"span",variant:"bodyMd",alignment:"center",fontWeight:b?"bold":"medium"},y.translate(`Polaris.DatePicker.months.${rO(p)}`)," ",f)),s().createElement("thead",null,s().createElement("tr",{className:rj.WeekHeadings},w)),s().createElement("tbody",null,C)));function x(e){return y.translate(`Polaris.DatePicker.days.${rI(e)}`)}}function rN(){}function rW(e,t,r){if(null==e)return!1;let{start:n,end:i}=t;return!!(r_(n,i)&&e>n&&e<=r)}function rK({id:e,selected:t,month:r,year:n,allowRange:i,multiMonth:o,disableDatesBefore:l,disableDatesAfter:c,disableSpecificDates:d,weekStartsOn:u=0,dayAccessibilityLabelPrefix:p,onMonthChange:f,onChange:h=rJ}){let m=z(),[y,g]=(0,a.useState)(void 0),[b,E]=(0,a.useState)(void 0);(0,a.useEffect)(()=>{E(void 0)},[t]);let w=(0,a.useCallback)(e=>{E(e)},[]),S=(0,a.useCallback)(e=>{f&&f(e.getMonth(),e.getFullYear()),g(e),E(e)},[f]),_=(0,a.useCallback)(e=>{let{end:t}=e;g(t),E(new Date(t)),h(e)},[h]),P=(0,a.useCallback)((e,t)=>{f&&(E(void 0),f(e,t))},[f]),C=(0,a.useCallback)(e=>{g(e)},[]),x=(0,a.useCallback)(e=>{let{key:r}=e,n=rF(t),i=b||n&&n.start;if(null!=i){if("ArrowUp"===r){let e=new Date(i);e.setDate(i.getDate()-7),l&&rx(e,l)||d&&rA(e,d)||S(e)}if("ArrowDown"===r){let e=new Date(i);e.setDate(i.getDate()+7),c&&rC(e,c)||d&&rA(e,d)||S(e)}if("ArrowRight"===r){let e=new Date(i);e.setDate(i.getDate()+1),c&&rC(e,c)||d&&rA(e,d)||S(e)}if("ArrowLeft"===r){let e=new Date(i);e.setDate(i.getDate()-1),l&&rx(e,l)||d&&rA(e,d)||S(e)}}},[c,l,d,b,t,S]),A=11===r?n+1:n,k=rP(r),T=11===k?A+1:A,O=rP(k),I=0===r?n-1:n,j=0===r?11:r-1,M=m.translate(`Polaris.DatePicker.months.${rO(j)}`),R=o?m.translate(`Polaris.DatePicker.months.${rO(O)}`):m.translate(`Polaris.DatePicker.months.${rO(k)}`),H=o?T:A,D=(0,a.useMemo)(()=>rF(t),[t]),N=[i?m.translate("Polaris.DatePicker.start"):p,m.translate("Polaris.DatePicker.end")],W=o?s().createElement(rD,{onFocus:w,focusedDate:b,month:k,year:A,selected:D,hoverDate:y,onChange:_,onHover:C,disableDatesBefore:l,disableDatesAfter:c,disableSpecificDates:d,allowRange:i,weekStartsOn:u,accessibilityLabelPrefixes:N}):null,K=v(rj.DatePicker);return s().createElement("div",{id:e,className:K,onKeyDown:r$,onKeyUp:x},s().createElement("div",{className:rj.Header},s().createElement(eg,{variant:"tertiary",icon:rw,accessibilityLabel:m.translate("Polaris.DatePicker.previousMonth",{previousMonthName:M,showPreviousYear:I}),onClick:()=>P(j,I)}),s().createElement(eg,{variant:"tertiary",icon:rS,accessibilityLabel:m.translate("Polaris.DatePicker.nextMonth",{nextMonth:R,nextYear:H}),onClick:()=>P(k,A)})),s().createElement("div",{className:rj.MonthLayout},s().createElement(rD,{onFocus:w,focusedDate:b,month:r,year:n,selected:rF(t),hoverDate:y,onChange:_,onHover:C,disableDatesBefore:l,disableDatesAfter:c,disableSpecificDates:d,allowRange:i,weekStartsOn:u,accessibilityLabelPrefixes:N}),W))}function rJ(){}function r$(e){let{key:t}=e;("ArrowUp"===t||"ArrowDown"===t||"ArrowLeft"===t||"ArrowRight"===t)&&(e.preventDefault(),e.stopPropagation())}function rF(e){return e instanceof Date?{start:e,end:e}:e}var rU=r(3218);f.getInstance();let rB=()=>{let{user:e,session:t}=(0,rU.aC)(),[r,n]=(0,a.useState)([]),[i,s]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,p]=(0,a.useState)(""),[f,h]=(0,a.useState)({code:"",discountType:"percentage",discountValue:"",minPurchaseAmount:"",maxDiscountAmount:"",startDate:new Date,expiryDate:new Date,usageLimit:""});(0,a.useEffect)(()=>{t?(console.log("Loading cupons with session:",t),m()):(console.log("No session available"),p("Please sign in to manage cupons"))},[t]);let m=async()=>{try{d(!0),console.log("Fetching cupons...");let{data:e,error:t}=await l.O.from("eco_cupons").select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching cupons:",t),t;console.log("Cupons loaded:",e),n(e||[])}catch(e){console.error("Error in loadCupons:",e),p("Error al cargar cupones: "+(e.message||"Unknown error"))}finally{d(!1)}},y=async()=>{if(!t){p("Please sign in to create cupons");return}try{d(!0),p(""),console.log("Creating cupon with data:",f);let{data:t,error:r}=await l.O.from("eco_cupons").insert([{...f,user_id:e?.id,status:"active"}]).select().single();if(r)throw console.error("Error creating cupon:",r),r;console.log("Cupon created successfully:",t),s(!1),await m()}catch(e){console.error("Error in handleSubmit:",e),p("Error al crear el cup\xf3n: "+(e.message||"Unknown error"))}finally{d(!1)}},g=async e=>{if(!t){p("Please sign in to deactivate cupons");return}try{d(!0),console.log("Deactivating cupon:",e);let{error:t}=await l.O.from("eco_cupons").update({status:"inactive"}).eq("id",e);if(t)throw console.error("Error deactivating cupon:",t),t;console.log("Cupon deactivated successfully"),await m()}catch(e){console.error("Error in handleDeactivate:",e),p("Error al desactivar el cup\xf3n: "+(e.message||"Unknown error"))}finally{d(!1)}};if(!t)return o.jsx(A,{children:o.jsx(T,{children:o.jsx(eb,{tone:"warning",children:o.jsx("p",{children:"Please sign in to manage cupons"})})})});let v=r.map(e=>[e.code,"percentage"===e.discount_type?`${e.discount_value}%`:`$${e.discount_value}`,e.min_purchase_amount?`$${e.min_purchase_amount}`:"N/A",e.times_used||0,e.status,o.jsx(eg,{disabled:"active"!==e.status||c,onClick:()=>g(e.id),children:"Desactivar"})]);return(0,o.jsxs)("div",{children:[u&&o.jsx(eb,{tone:"critical",onDismiss:()=>p(""),children:o.jsx("p",{children:u})}),o.jsx(A,{children:(0,o.jsxs)(T,{children:[(0,o.jsxs)(ev,{align:"space-between",children:[o.jsx(G,{as:"h2",variant:"headingLg",children:"Eco Cupones"}),o.jsx(eg,{variant:"primary",onClick:()=>s(!0),disabled:c,children:"Crear Cup\xf3n"})]}),c?o.jsx("div",{className:"flex justify-center p-4",children:o.jsx(ep,{accessibilityLabel:"Loading cupons",size:"large"})}):o.jsx(tf,{columnContentTypes:["text","text","text","numeric","text","text"],headings:["C\xf3digo","Descuento","M\xednimo de compra","Usos","Estado","Acciones"],rows:v})]})}),o.jsx(t5,{open:i,onClose:()=>s(!1),title:"Crear Eco Cup\xf3n",primaryAction:{content:"Crear",onAction:y,loading:c},secondaryActions:[{content:"Cancelar",onAction:()=>s(!1)}],children:o.jsx(t5.Section,{children:(0,o.jsxs)(T,{children:[o.jsx(rp,{label:"C\xf3digo",value:f.code,onChange:e=>h({...f,code:e}),autoComplete:"off",disabled:c}),o.jsx(rh,{label:"Tipo de descuento",options:[{label:"Porcentaje",value:"percentage"},{label:"Monto fijo",value:"fixed_amount"}],value:f.discountType,onChange:e=>h({...f,discountType:e}),disabled:c}),o.jsx(rp,{label:"Valor del descuento",value:f.discountValue,onChange:e=>h({...f,discountValue:e}),type:"number",autoComplete:"off",disabled:c}),o.jsx(rp,{label:"Monto m\xednimo de compra",value:f.minPurchaseAmount,onChange:e=>h({...f,minPurchaseAmount:e}),type:"number",autoComplete:"off",disabled:c}),o.jsx(rp,{label:"L\xedmite de uso",value:f.usageLimit,onChange:e=>h({...f,usageLimit:e}),type:"number",autoComplete:"off",disabled:c}),(0,o.jsxs)(x,{children:[o.jsx(G,{as:"p",variant:"bodyMd",children:"Fecha de inicio"}),o.jsx(rK,{month:f.startDate.getMonth(),year:f.startDate.getFullYear(),onMonthChange:(e,t)=>{let r=new Date(f.startDate);r.setMonth(e),r.setFullYear(t),h({...f,startDate:r})},selected:{start:f.startDate,end:f.startDate},onChange:e=>{e.start&&h({...f,startDate:e.start})}})]}),(0,o.jsxs)(x,{children:[o.jsx(G,{as:"p",variant:"bodyMd",children:"Fecha de expiraci\xf3n"}),o.jsx(rK,{month:f.expiryDate.getMonth(),year:f.expiryDate.getFullYear(),onMonthChange:(e,t)=>{let r=new Date(f.expiryDate);r.setMonth(e),r.setFullYear(t),h({...f,expiryDate:r})},selected:{start:f.expiryDate,end:f.expiryDate},onChange:e=>{e.start&&h({...f,expiryDate:e.start})}})]})]})})})]})}},7503:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p,metadata:()=>u});var n=r(1325),i=r(4579),o=r.n(i);r(2938);var a=r(534);let s=(0,a.createProxy)(String.raw`/Users/macbook/developer/2025/eco-capture-and-claim/apps/web/src/app/providers.tsx`),{__esModule:l,$$typeof:c}=s;s.default;let d=(0,a.createProxy)(String.raw`/Users/macbook/developer/2025/eco-capture-and-claim/apps/web/src/app/providers.tsx#Providers`),u={title:"EcoCapture - Gesti\xf3n de Cupones",description:"Sistema de gesti\xf3n de cupones ecol\xf3gicos"};function p({children:e}){return n.jsx("html",{lang:"es",children:n.jsx("body",{className:o().className,children:n.jsx(d,{children:e})})})}},7400:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>X});var n,i,o=r(1325),a=r(388),s=r.n(a);function l(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=function e(t){var r,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t)){var o=t.length;for(r=0;r<o;r++)t[r]&&(n=e(t[r]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n)}return i}(e))&&(n&&(n+=" "),n+=t);return n}let c=e=>"boolean"==typeof e?`${e}`:0===e?"0":e;var d=/^\[(.+)\]$/;function u(e,t){var r=e;return t.split("-").forEach(function(e){r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r}var p=/\s+/;function f(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=function e(t){if("string"==typeof t)return t;for(var r,n="",i=0;i<t.length;i++)t[i]&&(r=e(t[i]))&&(n&&(n+=" "),n+=r);return n}(e))&&(n&&(n+=" "),n+=t);return n}function h(e){var t=function(t){return t[e]||[]};return t.isThemeGetter=!0,t}var m=/^\[(?:([a-z-]+):)?(.+)\]$/i,y=/^\d+\/\d+$/,g=new Set(["px","full","screen"]),v=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,b=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,E=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function w(e){return A(e)||g.has(e)||y.test(e)||S(e)}function S(e){return R(e,"length",H)}function _(e){return R(e,"size",D)}function P(e){return R(e,"position",D)}function C(e){return R(e,"url",N)}function x(e){return R(e,"number",A)}function A(e){return!Number.isNaN(Number(e))}function k(e){return e.endsWith("%")&&A(e.slice(0,-1))}function T(e){return W(e)||R(e,"number",W)}function O(e){return m.test(e)}function I(){return!0}function j(e){return v.test(e)}function M(e){return R(e,"",K)}function R(e,t,r){var n=m.exec(e);return!!n&&(n[1]?n[1]===t:r(n[2]))}function H(e){return b.test(e)}function D(){return!1}function N(e){return e.startsWith("url(")}function W(e){return Number.isInteger(Number(e))}function K(e){return E.test(e)}var J=function(){for(var e,t,r,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=function(n){var o=i[0];return t=(e=function(e){var t,r,n,i,o,a,s,l,c,p,f;return{cache:function(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,n=new Map;function i(i,o){r.set(i,o),++t>e&&(t=0,n=r,r=new Map)}return{get:function(e){var t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(i(e,t),t):void 0},set:function(e,t){r.has(e)?r.set(e,t):i(e,t)}}}(e.cacheSize),splitModifiers:(r=1===(t=e.separator||":").length,n=t[0],i=t.length,function(e){for(var o,a=[],s=0,l=0,c=0;c<e.length;c++){var d=e[c];if(0===s){if(d===n&&(r||e.slice(c,c+i)===t)){a.push(e.slice(l,c)),l=c+i;continue}if("/"===d){o=c;continue}}"["===d?s++:"]"===d&&s--}var u=0===a.length?e:e.substring(l),p=u.startsWith("!"),f=p?u.substring(1):u;return{modifiers:a,hasImportantModifier:p,baseClassName:f,maybePostfixModifierPosition:o&&o>l?o-l:void 0}}),...(l=e.theme,c=e.prefix,p={nextPart:new Map,validators:[]},(f=Object.entries(e.classGroups),c?f.map(function(e){return[e[0],e[1].map(function(e){return"string"==typeof e?c+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(function(e){return[c+e[0],e[1]]})):e})]}):f).forEach(function(e){var t=e[0];(function e(t,r,n,i){t.forEach(function(t){if("string"==typeof t){(""===t?r:u(r,t)).classGroupId=n;return}if("function"==typeof t){if(t.isThemeGetter){e(t(i),r,n,i);return}r.validators.push({validator:t,classGroupId:n});return}Object.entries(t).forEach(function(t){var o=t[0];e(t[1],u(r,o),n,i)})})})(e[1],p,t,l)}),o=e.conflictingClassGroups,s=void 0===(a=e.conflictingClassGroupModifiers)?{}:a,{getClassGroupId:function(e){var t=e.split("-");return""===t[0]&&1!==t.length&&t.shift(),function e(t,r){if(0===t.length)return r.classGroupId;var n=t[0],i=r.nextPart.get(n),o=i?e(t.slice(1),i):void 0;if(o)return o;if(0!==r.validators.length){var a=t.join("-");return r.validators.find(function(e){return(0,e.validator)(a)})?.classGroupId}}(t,p)||function(e){if(d.test(e)){var t=d.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}(e)},getConflictingClassGroupIds:function(e,t){var r=o[e]||[];return t&&s[e]?[].concat(r,s[e]):r}})}}(i.slice(1).reduce(function(e,t){return t(e)},o()))).cache.get,r=e.cache.set,a=s,s(n)};function s(n){var i,o,a,s,l,c=t(n);if(c)return c;var d=(o=(i=e).splitModifiers,a=i.getClassGroupId,s=i.getConflictingClassGroupIds,l=new Set,n.trim().split(p).map(function(e){var t=o(e),r=t.modifiers,n=t.hasImportantModifier,i=t.baseClassName,s=t.maybePostfixModifierPosition,l=a(s?i.substring(0,s):i),c=!!s;if(!l){if(!s||!(l=a(i)))return{isTailwindClass:!1,originalClassName:e};c=!1}var d=(function(e){if(e.length<=1)return e;var t=[],r=[];return e.forEach(function(e){"["===e[0]?(t.push.apply(t,r.sort().concat([e])),r=[]):r.push(e)}),t.push.apply(t,r.sort()),t})(r).join(":");return{isTailwindClass:!0,modifierId:n?d+"!":d,classGroupId:l,originalClassName:e,hasPostfixModifier:c}}).reverse().filter(function(e){if(!e.isTailwindClass)return!0;var t=e.modifierId,r=e.classGroupId,n=e.hasPostfixModifier,i=t+r;return!l.has(i)&&(l.add(i),s(r,n).forEach(function(e){return l.add(t+e)}),!0)}).reverse().map(function(e){return e.originalClassName}).join(" "));return r(n,d),d}return function(){return a(f.apply(null,arguments))}}(function(){var e=h("colors"),t=h("spacing"),r=h("blur"),n=h("brightness"),i=h("borderColor"),o=h("borderRadius"),a=h("borderSpacing"),s=h("borderWidth"),l=h("contrast"),c=h("grayscale"),d=h("hueRotate"),u=h("invert"),p=h("gap"),f=h("gradientColorStops"),m=h("gradientColorStopPositions"),y=h("inset"),g=h("margin"),v=h("opacity"),b=h("padding"),E=h("saturate"),R=h("scale"),H=h("sepia"),D=h("skew"),N=h("space"),W=h("translate"),K=function(){return["auto","contain","none"]},J=function(){return["auto","hidden","clip","visible","scroll"]},$=function(){return["auto",O,t]},F=function(){return[O,t]},U=function(){return["",w]},B=function(){return["auto",A,O]},L=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},q=function(){return["solid","dashed","dotted","double","none"]},z=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},V=function(){return["start","end","center","between","around","evenly","stretch"]},G=function(){return["","0",O]},X=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},Y=function(){return[A,x]},Z=function(){return[A,O]};return{cacheSize:500,theme:{colors:[I],spacing:[w],blur:["none","",j,O],brightness:Y(),borderColor:[e],borderRadius:["none","","full",j,O],borderSpacing:F(),borderWidth:U(),contrast:Y(),grayscale:G(),hueRotate:Z(),invert:G(),gap:F(),gradientColorStops:[e],gradientColorStopPositions:[k,S],inset:$(),margin:$(),opacity:Y(),padding:F(),saturate:Y(),scale:Y(),sepia:G(),skew:Z(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",O]}],container:["container"],columns:[{columns:[j]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(L(),[O])}],overflow:[{overflow:J()}],"overflow-x":[{"overflow-x":J()}],"overflow-y":[{"overflow-y":J()}],overscroll:[{overscroll:K()}],"overscroll-x":[{"overscroll-x":K()}],"overscroll-y":[{"overscroll-y":K()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",T]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",O]}],grow:[{grow:G()}],shrink:[{shrink:G()}],order:[{order:["first","last","none",T]}],"grid-cols":[{"grid-cols":[I]}],"col-start-end":[{col:["auto",{span:["full",T]},O]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[I]}],"row-start-end":[{row:["auto",{span:[T]},O]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",O]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",O]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal"].concat(V())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(V(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(V(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",O,t]}],"min-w":[{"min-w":["min","max","fit",O,w]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[j]},j,O]}],h:[{h:[O,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",O,w]}],"max-h":[{"max-h":[O,t,"min","max","fit"]}],"font-size":[{text:["base",j,S]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",x]}],"font-family":[{font:[I]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",O]}],"line-clamp":[{"line-clamp":["none",A,x]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",O,w]}],"list-image":[{"list-image":["none",O]}],"list-style-type":[{list:["none","disc","decimal",O]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(q(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",w]}],"underline-offset":[{"underline-offset":["auto",O,w]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",O]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",O]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(L(),[P])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",_]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},C]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(q(),["hidden"])}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:q()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(q())}],"outline-offset":[{"outline-offset":[O,w]}],"outline-w":[{outline:[w]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[w]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",j,M]}],"shadow-color":[{shadow:[I]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":z()}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",j,O]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[E]}],sepia:[{sepia:[H]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[H]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",O]}],duration:[{duration:Z()}],ease:[{ease:["linear","in","out","in-out",O]}],delay:[{delay:Z()}],animate:[{animate:["none","spin","ping","pulse","bounce",O]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[T,O]}],"translate-x":[{"translate-x":[W]}],"translate-y":[{"translate-y":[W]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",O]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",O]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",O]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[w,x]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});let $=(n="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",i={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if((null==i?void 0:i.variants)==null)return l(n,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:r,defaultVariants:o}=i,a=Object.keys(r).map(t=>{let n=null==e?void 0:e[t],i=null==o?void 0:o[t];if(null===n)return null;let a=c(n)||c(i);return r[t][a]}),s=e&&Object.entries(e).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return l(n,a,null==i?void 0:null===(t=i.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:r,className:n,...i}=t;return Object.entries(i).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...o,...s}[t]):({...o,...s})[t]===r})?[...e,r,n]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)});s().forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},a)=>o.jsx("button",{className:function(...e){return J(l(e))}($({variant:t,size:r,className:e})),ref:a,...i})).displayName="Button";var F=r(534);let U=(0,F.createProxy)(String.raw`/Users/macbook/developer/2025/eco-capture-and-claim/packages/ui/src/components/EcoCuponManager.tsx`),{__esModule:B,$$typeof:L}=U;U.default;let q=(0,F.createProxy)(String.raw`/Users/macbook/developer/2025/eco-capture-and-claim/packages/ui/src/components/EcoCuponManager.tsx#EcoCuponManager`);var z=r(6826),V=r(6702);function G(){return o.jsx(z.E,{gap:"4",children:o.jsx(V.x,{as:"h2",variant:"headingLg",children:"Loading..."})})}function X(){return o.jsx("main",{className:"min-h-screen p-8",children:(0,o.jsxs)(z.E,{gap:"4",children:[o.jsx(V.x,{as:"h1",variant:"headingXl",children:"Gesti\xf3n de Cupones"}),o.jsx(a.Suspense,{fallback:o.jsx(G,{}),children:o.jsx(q,{})})]})})}},5384:()=>{},6431:e=>{function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function r(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}function n(e,r,n){return(r=t(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){var r=l(e,t,"get");return r.get?r.get.call(e):r.value}function s(e,t,r){var n=l(e,t,"set");return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=r}}(e,n,r),r}function l(e,t,r){if(!t.has(e))throw TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function c(e,t,r){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return r}function d(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function u(e,t,r){d(e,t),t.set(e,r)}function p(e,t){d(e,t),t.add(e)}var f=[" daum[ /]"," deusu/"," yadirectfetcher","(?:^| )site","(?:^|[^g])news","@[a-z]","\\(at\\)[a-z]","\\(github\\.com/","\\[at\\][a-z]","^12345","^<","^[\\w \\.\\-\\(\\)]+(/v?\\d+(\\.\\d+)?(\\.\\d{1,10})?)?$","^[^ ]{50,}$","^active","^ad muncher","^amaya","^anglesharp/","^anonymous","^avsdevicesdk/","^axios/","^bidtellect/","^biglotron","^btwebclient/","^castro","^clamav[ /]","^client/","^cobweb/","^coccoc","^custom","^ddg[_-]android","^discourse","^dispatch/\\d","^downcast/","^duckduckgo","^facebook","^fdm[ /]\\d","^getright/","^gozilla/","^hatena","^hobbit","^hotzonu","^hwcdn/","^jeode/","^jetty/","^jigsaw","^linkdex","^lwp[-: ]","^metauri","^microsoft bits","^movabletype","^mozilla/\\d\\.\\d \\(compatible;?\\)$","^mozilla/\\d\\.\\d \\w*$","^navermailapp","^netsurf","^offline explorer","^php","^postman","^postrank","^python","^read","^reed","^restsharp/","^snapchat","^space bison","^svn","^swcd ","^taringa","^test certificate info","^thumbor/","^tumblr/","^user-agent:mozilla","^valid","^venus/fedoraplanet","^w3c","^webbandit/","^webcopier","^wget","^whatsapp","^xenu link sleuth","^yahoo","^yandex","^zdm/\\d","^zoom marketplace/","^{{.*}}$","adbeat\\.com","appinsights","archive","ask jeeves/teoma","bit\\.ly/","bluecoat drtr","bot","browsex","burpcollaborator","capture","catch","check","chrome-lighthouse","chromeframe","cloud","crawl","cryptoapi","dareboost","datanyze","dataprovider","dejaclick","dmbrowser","download","evc-batch/","feed","firephp","freesafeip","gomezagent","google","headlesschrome/","http","httrack","hubspot marketing grader","hydra","ibisbrowser","images","inspect","iplabel","ips-agent","java","library","mail\\.ru/","manager","monitor","morningscore/","neustar wpm","nutch","offbyone","optimize","pageburst","pagespeed","perl","phantom","pingdom","powermarks","preview","proxy","ptst[ /]\\d","reader","rexx;","rigor","rss","scan","scrape","search","serp ?reputation ?management","server","sogou","sparkler/","speedcurve","spider","splash","statuscake","stumbleupon\\.com","supercleaner","synapse","synthetic","torrent","tracemyfile","transcoder","trendsmapresolver","twingly recon","url","virtuoso","wappalyzer","webglance","webkit2png","websitemetadataretriever","whatcms/","wordpress","zgrab"];!function(e){try{RegExp("(?<! cu)bot").test("dangerbot")}catch(t){return e}[["bot","(?<! cu)bot"],["google","(?<! (?:channel/|google/))google(?!(app|/google| pixel))"],["http","(?<!(?:lib))http"],["java","java(?!;)"],["search","(?<! ya(?:yandex)?)search"]].forEach(function(t){var r=i(t,2),n=r[0],o=r[1],a=e.lastIndexOf(n);~a&&e.splice(a,1,o)})}(f);var h=new WeakMap,m=new WeakMap,y=new WeakSet,g=new WeakSet;function v(){s(this,m,RegExp(a(this,h).join("|"),"i"))}function b(e){return a(this,h).indexOf(e.toLowerCase())}var E=new(function(){var e,t;function o(e){var t=this;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),p(this,g),p(this,y),u(this,h,{writable:!0,value:void 0}),u(this,m,{writable:!0,value:void 0}),s(this,h,e||f.slice()),c(this,y,v).call(this),Object.defineProperties(function(e){return t.test(e)},Object.entries(Object.getOwnPropertyDescriptors(o.prototype)).reduce(function(e,r){var o=i(r,2),a=o[0],s=o[1];return"function"==typeof s.value&&Object.assign(e,n({},a,{value:t[a].bind(t)})),"function"==typeof s.get&&Object.assign(e,n({},a,{get:function(){return t[a]}})),e},{}))}return e=[{key:"pattern",get:function(){return new RegExp(a(this,m))}},{key:"test",value:function(e){return!!e&&a(this,m).test(e)}},{key:"isbot",value:function(e){return!!e&&a(this,m).test(e)}},{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.match(a(this,m));return t&&t[0]}},{key:"matches",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a(this,h).filter(function(t){return RegExp(t,"i").test(e)})}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.exclude(this.matches(e))}},{key:"extend",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];[].push.apply(a(this,h),t.filter(function(t){return -1===c(e,g,b).call(e,t)}).map(function(e){return e.toLowerCase()})),c(this,y,v).call(this)}},{key:"exclude",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.length;t--;){var r=c(this,g,b).call(this,e[t]);r>-1&&a(this,h).splice(r,1)}c(this,y,v).call(this)}},{key:"spawn",value:function(e){return new o(e||a(this,h))}}],r(o.prototype,e),t&&r(o,t),Object.defineProperty(o,"prototype",{writable:!1}),o}());e.exports=E},5690:(e,t,r)=>{"use strict";var n;r.r(t),r.d(t,{createAdminApiClient:()=>N,createAdminRestApiClient:()=>W});let i="GraphQL Client",o="An error occurred while fetching from the API. Review 'graphQLErrors' for details.",a="Response returned unexpected Content-Type:",s="An unknown error has occurred. The API did not return a data object or any errors in its response.",l={json:"application/json",multipart:"multipart/mixed"},c="X-SDK-Variant",d="X-SDK-Version",u=[429,503],p=/@(defer)\b/i,f=/boundary="?([^=";]+)"?/i,h="\r\n\r\n";function m(e,t=i){return e.startsWith(`${t}`)?e:`${t}: ${e}`}function y(e){return e instanceof Error?e.message:JSON.stringify(e)}function g(e){return e instanceof Error&&e.cause?e.cause:void 0}function v(e){return e.flatMap(({errors:e})=>e??[])}function b({client:e,retries:t}){if(void 0!==t&&("number"!=typeof t||t<0||t>3))throw Error(`${e}: The provided "retries" value (${t}) is invalid - it cannot be less than 0 or greater than 3`)}function E(e,t){return t&&("object"!=typeof t||Array.isArray(t)||"object"==typeof t&&Object.keys(t).length>0)?{[e]:t}:{}}function w([e,...t]){return t.reduce(function e(t,r){return Object.keys(r||{}).reduce((n,i)=>(("object"==typeof r[i]||Array.isArray(r[i]))&&t[i]?n[i]=e(t[i],r[i]):n[i]=r[i],n),Array.isArray(t)?[...t]:{...t})},{...e})}function S({clientLogger:e,customFetchApi:t=fetch,client:r=i,defaultRetryWaitTime:n=1e3,retriableCodes:o=u}){let a=async(i,s,l)=>{let c;let d=s+1,u=l+1;try{if(c=await t(...i),e({type:"HTTP-Response",content:{requestParams:i,response:c}}),!c.ok&&o.includes(c.status)&&d<=u)throw Error();return c}catch(t){if(d<=u){let t=c?.headers.get("Retry-After");return await _(t?parseInt(t,10):n),e({type:"HTTP-Retry",content:{requestParams:i,lastResponse:c,retryAttempt:s,maxRetries:l}}),a(i,d,l)}throw Error(m(`${l>0?`Attempted maximum number of ${l} network retries. Last message - `:""}${y(t)}`,r))}};return a}async function _(e){return new Promise(t=>setTimeout(t,e))}async function P(e){let{errors:t,data:r,extensions:n}=await e.json();return{...E("data",r),...E("extensions",n),...t||!r?{errors:{networkStatusCode:e.status,message:m(t?o:s),...E("graphQLErrors",t),response:e}}:{}}}async function*C(e){let t=new TextDecoder;if(e.body[Symbol.asyncIterator])for await(let r of e.body)yield t.decode(r);else{let r;let n=e.body.getReader();try{for(;!(r=await n.read()).done;)yield t.decode(r.value)}finally{n.cancel()}}}function x({client:e,storeDomain:t}){try{if(!t||"string"!=typeof t)throw Error();let e=t.trim(),r=e.match(/^https?:/)?e:`https://${e}`,n=new URL(r);return n.protocol="https",n.origin}catch(r){throw Error(`${e}: a valid store domain ("${t}") must be provided`)}}function A({client:e,currentSupportedApiVersions:t,apiVersion:r,logger:n}){let i=`${e}: the provided apiVersion ("${r}")`,o=`Currently supported API versions: ${t.join(", ")}`;if(!r||"string"!=typeof r)throw Error(`${i} is invalid. ${o}`);let a=r.trim();t.includes(a)||(n?n({type:"Unsupported_Api_Version",content:{apiVersion:r,supportedApiVersions:t}}):console.warn(`${i} is likely deprecated or not supported. ${o}`))}function k(e){let t=3*e-2;return 10===t?t:`0${t}`}function T(e,t,r){let n=t-r;return n<=0?`${e-1}-${k(n+4)}`:`${e}-${k(n)}`}function O(){let{year:e,quarter:t,version:r}=function(){let e=new Date,t=e.getUTCMonth(),r=e.getUTCFullYear(),n=Math.floor(t/3+1);return{year:r,quarter:n,version:`${r}-${k(n)}`}}(),n=4===t?`${e+1}-01`:`${e}-${k(t+1)}`;return[T(e,t,3),T(e,t,2),T(e,t,1),r,n,"unstable"]}let I="application/json",j="0.2.9",M="X-Shopify-Access-Token",R="Admin API Client",H=[429,500,503];function D(e){if(!e)throw Error(`${R}: an access token must be provided`)}function N({storeDomain:e,apiVersion:t,accessToken:r,userAgentPrefix:n,retries:u=0,customFetchApi:_,logger:k}){var T;let H=O(),N=x({client:R,storeDomain:e});A({client:R,currentSupportedApiVersions:H,apiVersion:t,logger:k}),D(r);let W=(T={client:R,currentSupportedApiVersions:H,logger:k},e=>{e&&A({...T,apiVersion:e});let r=(e??t).trim();return`${N}/admin/api/${r}/graphql.json`}),K={storeDomain:N,apiVersion:t,accessToken:r,headers:{"Content-Type":I,Accept:I,[M]:r,"User-Agent":`${n?`${n} | `:""}${R} v${j}`},apiUrl:W(),userAgentPrefix:n},J=function({headers:e,url:t,customFetchApi:r=fetch,retries:n=0,logger:u}){b({client:i,retries:n});let _={headers:e,url:t,retries:n},x=function(e,{url:t,headers:r,retries:n}){return async(o,a={})=>{let{variables:s,headers:l,url:u,retries:p}=a,f=JSON.stringify({query:o,variables:s});b({client:i,retries:p});let h=Object.entries({...r,...l}).reduce((e,[t,r])=>(e[t]=Array.isArray(r)?r.join(", "):r.toString(),e),{});return h[c]||h[d]||(h[c]="shopify-graphql-client",h[d]="0.10.4"),e([u??t,{method:"POST",headers:h,body:f}],1,p??n)}}(S({customFetchApi:r,clientLogger:e=>{u&&u(e)},defaultRetryWaitTime:1e3}),_),A=async(...e)=>{if(p.test(e[0]))throw Error(m("This operation will result in a streamable response - use requestStream() instead."));try{let t=await x(...e),{status:r,statusText:n}=t,i=t.headers.get("content-type")||"";if(!t.ok)return{errors:{networkStatusCode:r,message:m(n),response:t}};if(!i.includes(l.json))return{errors:{networkStatusCode:r,message:m(`${a} ${i}`),response:t}};return P(t)}catch(e){return{errors:{message:y(e)}}}},k=async(...e)=>{if(!p.test(e[0]))throw Error(m("This operation does not result in a streamable response - use request() instead."));try{let t=await x(...e),{statusText:r}=t;if(!t.ok)throw Error(r,{cause:t});let n=t.headers.get("content-type")||"";switch(!0){case n.includes(l.json):return{async *[Symbol.asyncIterator](){let e=await P(t);yield{...e,hasNext:!1}}};case n.includes(l.multipart):return function(e,t){let r;let n=(t??"").match(f),i=`--${n?n[1]:"-"}`;if(!e.body?.getReader&&!e.body[Symbol.asyncIterator])throw Error("API multipart response did not return an iterable body",{cause:e});let a=C(e),l={};return{async *[Symbol.asyncIterator](){try{let e=!0;for await(let t of{async *[Symbol.asyncIterator](){try{let e="";for await(let t of a)if((e+=t).indexOf(i)>-1){let t=e.lastIndexOf(i),r=e.slice(0,t).split(i).filter(e=>e.trim().length>0).map(e=>e.slice(e.indexOf(h)+h.length).trim());r.length>0&&(yield r),e=e.slice(t+i.length),"--"===e.trim()&&(e="")}}catch(e){throw Error(`Error occured while processing stream payload - ${y(e)}`)}}}){let n=t.map(e=>{try{return JSON.parse(e)}catch(e){throw Error(`Error in parsing multipart response - ${y(e)}`)}}).map(e=>{let{data:t,incremental:r,hasNext:n,extensions:i,errors:o}=e;if(!r)return{data:t||{},...E("errors",o),...E("extensions",i),hasNext:n};let a=r.map(({data:e,path:t,errors:r})=>({data:e&&t?function e(t,r){if(0===t.length)return r;let n={[t.pop()]:r};return 0===t.length?n:e(t,n)}(t,e):{},...E("errors",r)}));return{data:1===a.length?a[0].data:w([...a.map(({data:e})=>e)]),...E("errors",v(a)),hasNext:n}});r=n.find(e=>e.extensions)?.extensions??r;let i=v(n);l=w([l,...n.map(({data:e})=>e)]),e=n.slice(-1)[0].hasNext,function(e,t){if(e.length>0)throw Error(o,{cause:{graphQLErrors:e}});if(0===Object.keys(t).length)throw Error(s)}(i,l),yield{...E("data",l),...E("extensions",r),hasNext:e}}if(e)throw Error("Response stream terminated unexpectedly")}catch(n){let t=g(n);yield{...E("data",l),...E("extensions",r),errors:{message:m(y(n)),networkStatusCode:e.status,...E("graphQLErrors",t?.graphQLErrors),response:e},hasNext:!1}}}}}(t,n);default:throw Error(`${a} ${n}`,{cause:t})}}catch(e){return{async *[Symbol.asyncIterator](){let t=g(e);yield{errors:{message:m(y(e)),...E("networkStatusCode",t?.status),...E("response",t)},hasNext:!1}}}}};return{config:_,fetch:x,request:A,requestStream:k}}({headers:K.headers,url:K.apiUrl,retries:u,customFetchApi:_,logger:k}),$=e=>({...e??{},...K.headers}),F=e=>e?W(e):K.apiUrl,U=function({getHeaders:e,getApiUrl:t}){return(r,n)=>{let i=[r];if(n&&Object.keys(n).length>0){let{variables:r,apiVersion:o,headers:a,retries:s}=n;i.push({...r?{variables:r}:{},...a?{headers:e(a)}:{},...o?{url:t(o)}:{},...s?{retries:s}:{}})}return i}}({getHeaders:$,getApiUrl:F});return Object.freeze({config:K,getHeaders:$,getApiUrl:F,fetch:(...e)=>J.fetch(...U(...e)),request:(...e)=>J.request(...U(...e))})}function W({storeDomain:e,apiVersion:t,accessToken:r,userAgentPrefix:i,logger:o,customFetchApi:a=fetch,retries:s=0,scheme:l="https",defaultRetryTime:c=1e3,formatPaths:d=!0}){let u=O(),p=x({client:R,storeDomain:e}).replace("https://",`${l}://`);A({client:R,currentSupportedApiVersions:u,apiVersion:t,logger:o}),D(r),b({client:R,retries:s});let f=function(e,t,r,n=!0){return(i,o,a)=>{a&&A({...r,apiVersion:a});let s=(a??t).trim(),l=i.replace(/^\//,"");n&&(l.startsWith("admin")||(l=`admin/api/${s}/${l}`),l.endsWith(".json")||(l=`${l}.json`));let c=new URLSearchParams;if(o)for(let[e,t]of Object.entries(o))!function e(t,r,n){if(Array.isArray(n)){n.forEach(n=>e(t,`${r}[]`,n));return}if("object"==typeof n){Object.entries(n).forEach(([n,i])=>e(t,`${r}[${n}]`,i));return}t.append(r,String(n))}(c,e,t);let d=c.toString()?`?${c.toString()}`:"";return`${e}/${l}${d}`}}(p,t,{client:R,currentSupportedApiVersions:u,logger:o},d),h=S({customFetchApi:a,clientLogger:e=>{o&&o(e)},defaultRetryWaitTime:c,client:R,retriableCodes:H}),m=async(e,{method:t,data:n,headers:o,searchParams:a,retries:l=0,apiVersion:c})=>{b({client:R,retries:l});let d=f(e,a??{},c),u=K(o??{}),p=[...u["user-agent"]?[u["user-agent"]]:[],...i?[i]:[],`${R} v${j}`].join(" | "),m=K({"Content-Type":I,...u,Accept:I,[M]:r,"User-Agent":p}),y=n&&"string"!=typeof n?JSON.stringify(n):n;return h([d,{method:t,headers:m,...y?{body:y}:void 0}],1,l??s)};return{get:(e,t)=>m(e,{method:n.Get,...t}),put:(e,t)=>m(e,{method:n.Put,...t}),post:(e,t)=>m(e,{method:n.Post,...t}),delete:(e,t)=>m(e,{method:n.Delete,...t})}}function K(e){let t={};for(let[r,n]of Object.entries(e))t[r.toLowerCase()]=Array.isArray(n)?n.join(", "):String(n);return t}!function(e){e.Get="GET",e.Post="POST",e.Put="PUT",e.Delete="DELETE"}(n||(n={}))},3929:(e,t,r)=>{"use strict";r.r(t),r.d(t,{createStorefrontApiClient:()=>g});let n="GraphQL Client",i={json:"application/json"},o=[429,503];function a(e,t=n){return e.startsWith(`${t}`)?e:`${t}: ${e}`}function s(e){return e instanceof Error?e.message:JSON.stringify(e)}function l({client:e,retries:t}){if(void 0!==t&&("number"!=typeof t||t<0||t>3))throw Error(`${e}: The provided "retries" value (${t}) is invalid - it cannot be less than 0 or greater than 3`)}function c(e,t){return t&&("object"!=typeof t||Array.isArray(t)||"object"==typeof t&&Object.keys(t).length>0)?{[e]:t}:{}}async function d(e){return new Promise(t=>setTimeout(t,e))}async function u(e){let{errors:t,data:r,extensions:n}=await e.json();return{...c("data",r),...c("extensions",n),...t||!r?{errors:{networkStatusCode:e.status,message:a(t?"An error occurred while fetching from the API. Review 'graphQLErrors' for details.":"An unknown error has occurred. The API did not return a data object or any errors in its response."),...c("graphQLErrors",t),response:e}}:{}}}function p({client:e,currentSupportedApiVersions:t,apiVersion:r,logger:n}){let i=`${e}: the provided apiVersion ("${r}")`,o=`Currently supported API versions: ${t.join(", ")}`;if(!r||"string"!=typeof r)throw Error(`${i} is invalid. ${o}`);let a=r.trim();t.includes(a)||(n?n({type:"Unsupported_Api_Version",content:{apiVersion:r,supportedApiVersions:t}}):console.warn(`${i} is likely deprecated or not supported. ${o}`))}function f(e){let t=3*e-2;return 10===t?t:`0${t}`}function h(e,t,r){let n=t-r;return n<=0?`${e-1}-${f(n+4)}`:`${e}-${f(n)}`}let m="application/json",y="Storefront API Client";function g({storeDomain:e,apiVersion:t,publicAccessToken:r,privateAccessToken:c,clientName:g,retries:v=0,customFetchApi:b,logger:E}){let w=function(){let{year:e,quarter:t,version:r}=function(){let e=new Date,t=e.getUTCMonth(),r=e.getUTCFullYear(),n=Math.floor(t/3+1);return{year:r,quarter:n,version:`${r}-${f(n)}`}}(),n=4===t?`${e+1}-01`:`${e}-${f(t+1)}`;return[h(e,t,3),h(e,t,2),h(e,t,1),r,n,"unstable"]}(),S=function({client:e,storeDomain:t}){try{if(!t||"string"!=typeof t)throw Error();let e=t.trim(),r=e.startsWith("http:")||e.startsWith("https:")?e:`https://${e}`,n=new URL(r);return n.protocol="https",n.origin}catch(r){throw Error(`${e}: a valid store domain ("${t}") must be provided`)}}({client:y,storeDomain:e}),_={client:y,currentSupportedApiVersions:w,logger:E};p({..._,apiVersion:t}),function(e,t){if(!e&&!t)throw Error(`${y}: a public or private access token must be provided`);if(e&&t)throw Error(`${y}: only provide either a public or private access token`)}(r,c);let P=e=>{e&&p({..._,apiVersion:e});let r=(e??t).trim();return`${S}/api/${r}/graphql.json`},C={storeDomain:S,apiVersion:t,...r?{publicAccessToken:r}:{privateAccessToken:c},headers:{"Content-Type":m,Accept:m,"X-SDK-Variant":"storefront-api-client","X-SDK-Version":"0.2.4",...g?{"X-SDK-Variant-Source":g}:{},...r?{"X-Shopify-Storefront-Access-Token":r}:{"Shopify-Storefront-Private-Token":c}},apiUrl:P(),clientName:g},x=function({headers:e,url:t,customFetchApi:r=fetch,retries:c=0,logger:p}){l({client:n,retries:c});let f={headers:e,url:t,retries:c},h=function(e,{url:t,headers:r,retries:i}){return async(o,a={})=>{let{variables:s,headers:c,url:d,retries:u}=a,p=JSON.stringify({query:o,variables:s});return l({client:n,retries:u}),e([d??t,{method:"POST",headers:Object.fromEntries(Object.entries({...r,...c}).map(([e,t])=>[e,Array.isArray(t)?t.join(", "):t.toString()])),body:p}],1,u??i)}}(function({clientLogger:e,customFetchApi:t=fetch,client:r=n,defaultRetryWaitTime:i=1e3,retriableCodes:l=o}){let c=async(n,o,u)=>{let p;let f=o+1,h=u+1;try{if(p=await t(...n),e({type:"HTTP-Response",content:{requestParams:n,response:p}}),!p.ok&&l.includes(p.status)&&f<=h)throw Error();return p}catch(t){if(f<=h){let t=p?.headers.get("Retry-After");return await d(t?parseInt(t,10):i),e({type:"HTTP-Retry",content:{requestParams:n,lastResponse:p,retryAttempt:o,maxRetries:u}}),c(n,f,u)}throw Error(a(`${u>0?`Attempted maximum number of ${u} network retries. Last message - `:""}${s(t)}`,r))}};return c}({customFetchApi:r,clientLogger:e=>{p&&p(e)},defaultRetryWaitTime:1e3}),f),m=async(...e)=>{try{let t=await h(...e),{status:r,statusText:n}=t,o=t.headers.get("content-type")||"";if(!t.ok)return{errors:{networkStatusCode:r,message:a(n),response:t}};if(!o.includes(i.json))return{errors:{networkStatusCode:r,message:a(`Response returned unexpected Content-Type: ${o}`),response:t}};return u(t)}catch(e){return{errors:{message:s(e)}}}};return{config:f,fetch:h,request:m}}({headers:C.headers,url:C.apiUrl,retries:v,customFetchApi:b,logger:E}),A=e=>({...e??{},...C.headers}),k=e=>e?P(e):C.apiUrl,T=function({getHeaders:e,getApiUrl:t}){return(r,n)=>{let i=[r];if(n&&Object.keys(n).length>0){let{variables:r,apiVersion:o,headers:a,retries:s}=n;i.push({...r?{variables:r}:{},...a?{headers:e(a)}:{},...o?{url:t(o)}:{},...s?{retries:s}:{}})}return i}}({getHeaders:A,getApiUrl:k});return Object.freeze({config:C,getHeaders:A,getApiUrl:k,fetch:(...e)=>x.fetch(...T(...e)),request:(...e)=>x.request(...T(...e))})}},1222:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__addDisposableResource:()=>H,__assign:()=>o,__asyncDelegator:()=>C,__asyncGenerator:()=>P,__asyncValues:()=>x,__await:()=>_,__awaiter:()=>h,__classPrivateFieldGet:()=>j,__classPrivateFieldIn:()=>R,__classPrivateFieldSet:()=>M,__createBinding:()=>y,__decorate:()=>s,__disposeResources:()=>N,__esDecorate:()=>c,__exportStar:()=>g,__extends:()=>i,__generator:()=>m,__importDefault:()=>I,__importStar:()=>O,__makeTemplateObject:()=>A,__metadata:()=>f,__param:()=>l,__propKey:()=>u,__read:()=>b,__rest:()=>a,__rewriteRelativeImportExtension:()=>W,__runInitializers:()=>d,__setFunctionName:()=>p,__spread:()=>E,__spreadArray:()=>S,__spreadArrays:()=>w,__values:()=>v,default:()=>K});var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function s(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}function l(e,t){return function(r,n){t(r,n,e)}}function c(e,t,r,n,i,o){function a(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var s,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",d=!t&&e?n.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),p=!1,f=r.length-1;f>=0;f--){var h={};for(var m in n)h[m]="access"===m?{}:n[m];for(var m in n.access)h.access[m]=n.access[m];h.addInitializer=function(e){if(p)throw TypeError("Cannot add initializers after decoration has completed");o.push(a(e||null))};var y=(0,r[f])("accessor"===l?{get:u.get,set:u.set}:u[c],h);if("accessor"===l){if(void 0===y)continue;if(null===y||"object"!=typeof y)throw TypeError("Object expected");(s=a(y.get))&&(u.get=s),(s=a(y.set))&&(u.set=s),(s=a(y.init))&&i.unshift(s)}else(s=a(y))&&("field"===l?i.unshift(s):u[c]=s)}d&&Object.defineProperty(d,n.name,u),p=!0}function d(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function u(e){return"symbol"==typeof e?e:"".concat(e)}function p(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function f(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function h(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})}function m(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var y=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function g(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||y(t,e,r)}function v(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function E(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function w(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function S(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function P(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),n[Symbol.asyncIterator]=function(){return this},n;function a(e,t){i[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||s(e,t)})},t&&(n[e]=t(n[e])))}function s(e,t){try{var r;(r=i[e](t)).value instanceof _?Promise.resolve(r.value.v).then(l,c):d(o[0][2],r)}catch(e){d(o[0][3],e)}}function l(e){s("next",e)}function c(e){s("throw",e)}function d(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function C(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:_(e[n](t)),done:!1}:i?i(t):t}:i}}function x(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=v(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,i,(t=e[r](t)).done,t.value)})}}}function A(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var k=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},T=function(e){return(T=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)};function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=T(e),n=0;n<r.length;n++)"default"!==r[n]&&y(t,e,r[n]);return k(t,e),t}function I(e){return e&&e.__esModule?e:{default:e}}function j(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function M(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function R(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function H(e,t,r){if(null!=t){var n,i;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(i=n)}if("function"!=typeof n)throw TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var D="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function N(e){function t(t){e.error=e.hasError?new D(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,n=0;return function i(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(i,function(e){return t(e),i()})}else n|=1}catch(e){t(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function W(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,n,i,o){return r?t?".jsx":".js":!n||i&&o?n+i+"."+o.toLowerCase()+"js":e}):e}let K={__extends:i,__assign:o,__rest:a,__decorate:s,__param:l,__esDecorate:c,__runInitializers:d,__propKey:u,__setFunctionName:p,__metadata:f,__awaiter:h,__generator:m,__createBinding:y,__exportStar:g,__values:v,__read:b,__spread:E,__spreadArrays:w,__spreadArray:S,__await:_,__asyncGenerator:P,__asyncDelegator:C,__asyncValues:x,__makeTemplateObject:A,__importStar:O,__importDefault:I,__classPrivateFieldGet:j,__classPrivateFieldSet:M,__classPrivateFieldIn:R,__addDisposableResource:H,__disposeResources:N,__rewriteRelativeImportExtension:W}}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[946,182],()=>r(2552));module.exports=n})();